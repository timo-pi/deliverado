!function(n,t){"use strict";function r(n){a[a.length]=n}function k(n){var t=new RegExp(" ?\\b"+n+"\\b");c.className=c.className.replace(t,"")}function p(n,t){for(var i=0,r=n.length;i<r;i++)t.call(n,n[i],i)}function tt(){var t,e,f,o;c.className=c.className.replace(/ (w-|eq-|gt-|gte-|lt-|lte-|portrait|no-portrait|landscape|no-landscape)\d+/g,""),t=n.innerWidth||c.clientWidth,e=n.outerWidth||n.screen.width,u.screen.innerWidth=t,u.screen.outerWidth=e,r("w-"+t),p(i.screens,function(n){n<t?(i.screensCss.gt&&r("gt-"+n),i.screensCss.gte&&r("gte-"+n)):t<n?(i.screensCss.lt&&r("lt-"+n),i.screensCss.lte&&r("lte-"+n)):t===n&&(i.screensCss.lte&&r("lte-"+n),i.screensCss.eq&&r("e-q"+n),i.screensCss.gte&&r("gte-"+n))}),f=n.innerHeight||c.clientHeight,o=n.outerHeight||n.screen.height,u.screen.innerHeight=f,u.screen.outerHeight=o,u.feature("portrait",t<f),u.feature("landscape",f<t)}function it(){n.clearTimeout(b),b=n.setTimeout(tt,50)}var v,u,s,w,o,h,l,d,f,g,nt,e,b,y=n.document,rt=n.navigator,ut=n.location,c=y.documentElement,a=[],i={screens:[240,320,480,640,768,800,1024,1280,1440,1680,1920],screensCss:{gt:!0,gte:!1,lt:!0,lte:!1,eq:!1},browsers:[{ie:{min:6,max:11}}],browserCss:{gt:!0,gte:!1,lt:!0,lte:!1,eq:!0},html5:!0,page:"-page",section:"-section",head:"head"};if(n.head_conf)for(v in n.head_conf)n.head_conf[v]!==t&&(i[v]=n.head_conf[v]);switch((u=n[i.head]=function(){u.ready.apply(null,arguments)}).feature=function(n,t,i){return n?("[object Function]"===Object.prototype.toString.call(t)&&(t=t.call()),r((t?"":"no-")+n),u[n]=!!t,i||(k("no-"+n),k(n),u.feature())):(c.className+=" "+a.join(" "),a=[]),u},u.feature("js",!0),s=rt.userAgent.toLowerCase(),w=/mobile|android|kindle|silk|midp|phone|(windows .+arm|touch)/.test(s),u.feature("mobile",w,!0),u.feature("desktop",!w,!0),o=(s=/(chrome|firefox)[ \/]([\w.]+)/.exec(s)||/(iphone|ipad|ipod)(?:.*version)?[ \/]([\w.]+)/.exec(s)||/(android)(?:.*version)?[ \/]([\w.]+)/.exec(s)||/(webkit|opera)(?:.*version)?[ \/]([\w.]+)/.exec(s)||/(msie) ([\w.]+)/.exec(s)||/(trident).+rv:(\w.)+/.exec(s)||[])[1],h=parseFloat(s[2]),o){case"msie":case"trident":o="ie",h=y.documentMode||h;break;case"firefox":o="ff";break;case"ipod":case"ipad":case"iphone":o="ios";break;case"webkit":o="safari"}for(u.browser={name:o,version:h},u.browser[o]=!0,l=0,d=i.browsers.length;l<d;l++)for(f in i.browsers[l])if(o===f)for(r(f),g=i.browsers[l][f].min,nt=i.browsers[l][f].max,e=g;e<=nt;e++)e<h?(i.browserCss.gt&&r("gt-"+f+e),i.browserCss.gte&&r("gte-"+f+e)):h<e?(i.browserCss.lt&&r("lt-"+f+e),i.browserCss.lte&&r("lte-"+f+e)):h===e&&(i.browserCss.lte&&r("lte-"+f+e),i.browserCss.eq&&r("eq-"+f+e),i.browserCss.gte&&r("gte-"+f+e));else r("no-"+f);r(o),r(o+parseInt(h,10)),i.html5&&"ie"===o&&h<9&&p("abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|progress|section|summary|time|video".split("|"),function(n){y.createElement(n)}),p(ut.pathname.split("/"),function(n,u){if(2<this.length&&this[u+1]!==t)u&&r(this.slice(u,u+1).join("-").toLowerCase()+i.section);else{var f=n||"index",e=f.indexOf(".");0<e&&(f=f.substring(0,e)),c.id=f.toLowerCase()+i.page,u||r("root"+i.section)}}),u.screen={height:n.screen.height,width:n.screen.width},tt(),b=0,n.addEventListener?n.addEventListener("resize",it,!1):n.attachEvent("onresize",it)}(window),function(n,t){"use strict";function a(n){for(var r in n)if(i[n[r]]!==t)return!0;return!1}function r(n){var t=n.charAt(0).toUpperCase()+n.substr(1);return!!a((n+" "+c.join(t+" ")+t).split(" "))}var o=n.document.createElement("i"),i=o.style,s=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),c="Webkit Moz O ms Khtml".split(" "),l=n.head_conf&&n.head_conf.head||"head",u=n[l],f={gradient:function(){var n="background-image:";return i.cssText=(n+s.join("gradient(linear,left top,right bottom,from(#9f9),to(#fff));"+n)+s.join("linear-gradient(left top,#eee,#fff);"+n)).slice(0,-n.length),!!i.backgroundImage},rgba:function(){return i.cssText="background-color:rgba(0,0,0,0.5)",!!i.backgroundColor},opacity:function(){return""===o.style.opacity},textshadow:function(){return""===i.textShadow},multiplebgs:function(){i.cssText="background:url(https://),url(https://),red url(https://)";var n=(i.background||"").match(/url/g);return"[object Array]"===Object.prototype.toString.call(n)&&3===n.length},boxshadow:function(){return r("boxShadow")},borderimage:function(){return r("borderImage")},borderradius:function(){return r("borderRadius")},cssreflections:function(){return r("boxReflect")},csstransforms:function(){return r("transform")},csstransitions:function(){return r("transition")},touch:function(){return"ontouchstart"in n},retina:function(){return 1<n.devicePixelRatio},fontface:function(){var t=u.browser.name,n=u.browser.version;switch(t){case"ie":return 9<=n;case"chrome":return 13<=n;case"ff":return 6<=n;case"ios":return 5<=n;case"android":return!1;case"webkit":return 5.1<=n;case"opera":return 10<=n;default:return!1}}};for(var e in f)f[e]&&u.feature(e,f[e].call(),!0);u.feature()}(window),function(n,t){"use strict";function w(){}function u(n,t){if(n){"object"==typeof n&&(n=[].slice.call(n));for(var i=0,r=n.length;i<r;i++)t.call(n,n[i],i)}}function it(n,i){var r=Object.prototype.toString.call(i).slice(8,-1);return i!==t&&null!==i&&r===n}function s(n){return it("Function",n)}function a(n){return it("Array",n)}function f(n){(n=n||w)._done||(n(),n._done=1)}function v(n){var i,r,t={};if("object"==typeof n)for(i in n)!n[i]||(t={name:i,url:n[i]});else t={name:function(n){var i=n.split("/"),t=i[i.length-1],r=t.indexOf("?");return-1!==r?t.substring(0,r):t}(n),url:n};return(r=c[t.name])&&r.url===t.url?r:c[t.name]=t}function y(n){for(var t in n=n||c)if(n.hasOwnProperty(t)&&n[t].state!==l)return!1;return!0}function ht(n){n.state===t&&(n.state=nt,n.onpreload=[],rt({url:n.url,type:"cache"},function(){!function(n){n.state=ft,u(n.onpreload,function(n){n.call()})}(n)}))}function b(n,t){t=t||w,n.state!==l?n.state!==tt?n.state!==nt?(n.state=tt,rt(n,function(){n.state=l,t(),u(h[n.name],function(n){f(n)}),o&&y()&&u(h.ALL,function(n){f(n)})})):n.onpreload.push(function(){b(n,t)}):i.ready(n.name,t):t()}function rt(t,i){function e(t){t=t||n.event,u.onload=u.onreadystatechange=u.onerror=null,i()}function o(f){("load"===(f=f||n.event).type||/loaded|complete/.test(u.readyState)&&(!r.documentMode||r.documentMode<9))&&(n.clearTimeout(t.errorTimeout),n.clearTimeout(t.cssTimeout),u.onload=u.onreadystatechange=u.onerror=null,i())}var u,f;i=i||w,"css"===function(n){var t=(n=n||"").split("?")[0].split(".");return t[t.length-1].toLowerCase()}(t.url)?((u=r.createElement("link")).type="text/"+(t.type||"css"),u.rel="stylesheet",u.href=t.url,t.cssRetries=0,t.cssTimeout=n.setTimeout(function s(){if(t.state!==l&&t.cssRetries<=20){for(var i=0,f=r.styleSheets.length;i<f;i++)if(r.styleSheets[i].href===u.href)return void o({type:"load"});t.cssRetries++,t.cssTimeout=n.setTimeout(s,250)}},500)):((u=r.createElement("script")).type="text/"+(t.type||"javascript"),u.src=t.url),u.onload=u.onreadystatechange=o,u.onerror=e,u.async=!1,u.defer=!1,t.errorTimeout=n.setTimeout(function(){e({type:"timeout"})},7e3),(f=r.head||r.getElementsByTagName("head")[0]).insertBefore(u,f.lastChild)}function e(){if(!r.body)return n.clearTimeout(i.readyTimeout),void(i.readyTimeout=n.setTimeout(e,50));o||(o=!0,function(){for(var t,u=r.getElementsByTagName("script"),n=0,f=u.length;n<f;n++)if(t=u[n].getAttribute("data-headjs-load"))return i.load(t)}(),u(d,function(n){f(n)}))}function k(){r.addEventListener?(r.removeEventListener("DOMContentLoaded",k,!1),e()):"complete"===r.readyState&&(r.detachEvent("onreadystatechange",k),e())}var o,p,r=n.document,d=[],h={},c={},ut="async"in r.createElement("script")||"MozAppearance"in r.documentElement.style||n.opera,g=n.head_conf&&n.head_conf.head||"head",i=n[g]=n[g]||function(){i.ready.apply(null,arguments)},nt=1,ft=2,tt=3,l=4;if("complete"===r.readyState)e();else if(r.addEventListener)r.addEventListener("DOMContentLoaded",k,!1),n.addEventListener("load",e,!1);else{r.attachEvent("onreadystatechange",k),n.attachEvent("onload",e),p=!1;try{p=!n.frameElement&&r.documentElement}catch(wt){}p&&p.doScroll&&function pt(){if(!o){try{p.doScroll("left")}catch(t){return n.clearTimeout(i.readyTimeout),void(i.readyTimeout=n.setTimeout(pt,50))}e()}}()}i.load=i.js=ut?function(){var n=arguments,t=n[n.length-1],r={};return s(t)||(t=null),a(n[0])?(n[0].push(t),i.load.apply(null,n[0])):(u(n,function(n){n!==t&&(n=v(n),r[n.name]=n)}),u(n,function(n){n!==t&&b(n=v(n),function(){y(r)&&f(t)})})),i}:function(){var n=arguments,t=n[n.length-1],r=[].slice.call(n,1),f=r[0];return s(t)||(t=null),a(n[0])?(n[0].push(t),i.load.apply(null,n[0])):f?(u(r,function(n){s(n)||!n||ht(v(n))}),b(v(n[0]),s(f)?f:function(){i.load.apply(null,r)})):b(v(n[0])),i},i.test=function(n,t,r,u){var f="object"==typeof n?n:{test:n,success:!!t&&(a(t)?t:[t]),failure:!!r&&(a(r)?r:[r]),callback:u||w},e=!!f.test;return e&&f.success?(f.success.push(f.callback),i.load.apply(null,f.success)):e||!f.failure?u():(f.failure.push(f.callback),i.load.apply(null,f.failure)),i},i.ready=function(n,t){var v,p,e;return n===r?o?f(t):d.push(t):(s(n)&&(t=n,n="ALL"),a(n)?(v={},u(n,function(n){v[n]=c[n],i.ready(n,function(){y(v)&&f(t)})})):"string"==typeof n&&s(t)&&((p=c[n])&&p.state===l||"ALL"===n&&y()&&o?f(t):(e=h[n])?e.push(t):e=h[n]=[t])),i},i.ready(r,function(){y()&&u(h.ALL,function(n){f(n)}),i.feature&&i.feature("domloaded",!0)})}(window),head.feature("svginline",function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"==(e.firstChild&&e.firstChild.namespaceURI)}),head.feature("cssanimation",function(){var e=["Webkit","Moz","O","ms","Khtml"],t=document.createElement("div");if(void 0!==t.style.animationName)return!0;for(var n=e.length;n--;)if(void 0!==t.style[e[n]+"AnimationName"])return!0;return!1}),function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.3",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};function r(a){var b="length"in a&&a.length,c=m.type(a);return"function"!==c&&!m.isWindow(a)&&(!(1!==a.nodeType||!b)||("array"===c||0===b||"number"==typeof b&&0<b&&b-1 in a))}m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(0<=c&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],g!==(c=e[d])&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&0<=a-parseFloat(a)+1},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var e=0,f=a.length,g=r(a);if(c){if(g)for(;e<f&&!1!==b.apply(a[e],c);e++);else for(e in a)if(!1===b.apply(a[e],c))break}else if(g)for(;e<f&&!1!==b.call(a[e],e,a[e]);e++);else for(e in a)if(!1===b.call(a[e],e,a[e]))break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;)a[e++]=b[d++];if(c!=c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var e=[],f=0,g=a.length,h=!c;f<g;f++)!b(a[f],f)!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,i=[];if(r(a))for(;f<g;f++)null!=(d=b(a[f],f,c))&&i.push(d);else for(f in a)null!=(d=b(a[f],f,c))&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),(e=function(){return a.apply(b||this,c.concat(d.call(arguments)))}).guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!=d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),d=d||[],k=(b=b||n).nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(!(h=b.getElementById(j))||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){for(o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;l--;)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];return function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){for(var c=a.split("|"),e=a.length;e--;)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&void 0!==a.getElementsByTagName&&a}for(b in c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(o=(n=g).documentElement,(e=g.defaultView)&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(void 0!==b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c=void 0!==a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return void 0!==b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d||(1&(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return 0<ga(b,n,null,[a]).length},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){for(;b=a[f++];)b===a[f]&&(e=d.push(f));for(;e--;)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else for(;b=a[d++];)c+=e(b);return c},(d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||void 0!==a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&-1<e.indexOf(c):"$="===b?c&&e.slice(-c.length)===c:"~="===b?-1<(" "+e.replace(Q," ")+" ").indexOf(c):"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(n=(j=(k=q[u]||(q[u]={}))[a]||[])[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[u]||(l[u]={}))[a]=[w,m]),l!==b)););return(m-=e)===d||m%d==0&&0<=m/d}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):1<e.length?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)a[d=J(a,f[g])]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return 0<ga(a,b).length}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return-1<(b.textContent||b.innerText||e(b)).indexOf(a)}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do{if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(c=c.toLowerCase())===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[c<0?c+b:c]}),even:oa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=c<0?c+b:c;0<=--d;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}}).pseudos.nth=d.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}function ra(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if((h=(i=b[u]||(b[u]={}))[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if((i[d]=j)[2]=a(b,c,g))return!0}}}function ta(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||function(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d)for(j=va(r,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l));if(f){if(e||a){if(e){for(j=[],k=r.length;k--;)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}for(k=r.length;k--;)(l=r[k])&&-1<(j=e?J(f,l):m[k])&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return-1<J(b,a)},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if((c=d.filter[a[i].type].apply(null,a[i].matches))[u]){for(e=++i;e<f&&!d.relative[a[e].type];e++);return wa(1<i&&ta(m),1<i&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,i<e&&xa(a.slice(i,e)),e<f&&xa(a=a.slice(e)),e<f&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=0<b.length,e=0<a.length,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){for(m=0;o=a[m++];)if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){for(m=0;o=b[m++];)o(r,s,g,h);if(f){if(0<p)for(;q--;)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&0<s.length&&1<p+b.length&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=d.preFilter;h;){for(g in(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length)),d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)},h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){for(b||(b=g(a)),c=b.length;c--;)(f=xa(b[c]))[u]?d.push(f):e.push(f);(f=A(a,ya(e,d))).selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(2<(j=o[0]=o[0].slice(0)).length&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(!(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0]))return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}for(i=X.needsContext.test(a)?0:j.length;i--&&(k=j[i],!d.relative[l=k.type]);)if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),!(a=f.length&&ra(j)))return H.apply(e,f),e;break}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return 0<=m.inArray(a,b)!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;b<e;b++)if(m.contains(d[b],this))return!0}));for(b=0;b<e;b++)m.find(a,d[b],c);return(c=this.pushStack(1<e?m.unique(c):c)).selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(!(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:z.exec(a))||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if((d=y.getElementById(c[2]))&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?void 0!==x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))}).prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};function D(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}m.extend({dir:function(a,b,c){for(var d=[],e=a[b];e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c));)1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?-1<g.index(c):1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(1<f.length?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),1<this.length&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var H,E=/\S+/g,F={};function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.Callbacks=function(a){a="string"==typeof a?F[a]||function(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&f<e;f++)if(!1===h[f].apply(l[0],l[1])&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){for(var d;-1<(d=m.inArray(c,h,d));)h.splice(d,1),b&&(d<=e&&e--,d<=f&&f--)}),this},has:function(a){return a?-1<m.inArray(a,h):!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=[a,(c=c||[]).slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var i,j,k,b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=1<arguments.length?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}};if(1<e)for(i=new Array(e),j=new Array(e),k=new Array(e);b<e;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}}),m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(!0===a?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);(m.isReady=!0)!==a&&0<--m.readyWait||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}}),m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var L,K="undefined";for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;(c=y.getElementsByTagName("body")[0])&&c.style&&(b=y.createElement("div"),(d=y.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return(1===c||9===c)&&(!b||!0!==b&&a.getAttribute("classid")===b)};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if("string"==typeof(c=a.getAttribute(d))){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c)}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?null==(f=g[b])&&(f=g[m.camelCase(b)]):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:b=(b=m.camelCase(b))in d?[b]:b.split(" "),e=b.length;for(;e--;)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return!!(a=a.nodeType?m.cache[a[m.expando]]:a[m.expando])&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){for(c=g.length;c--;)g[c]&&(0===(d=g[c].name).indexOf("data-")&&O(f,d=m.camelCase(d.slice(5)),e[d]));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):1<arguments.length?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b);"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,function(){m.dequeue(a,b)},f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)(c=m._data(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c))for(h in e=!0,c)m.access(a,b,h,c[h],!0,f,g);else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=!1===d.attributes[c].expando);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function aa(){return!0}function ba(){return!1}function ca(){try{return y.activeElement}catch(a){}}function da(a){var b=ea.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){for(c.handler&&(c=(i=c).handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||((k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)}).elem=a),h=(b=(b||"").match(E)||[""]).length;h--;)o=q=(f=_.exec(b[h])||[])[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||((n=g[o]=[]).delegateCount=0,j.setup&&!1!==j.setup.call(a,d,p,k)||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){for(j=(b=(b||"").match(E)||[""]).length;j--;)if(o=q=(h=_.exec(b[j])||[])[1],p=(h[2]||"").split(".").sort(),o){for(l=m.event.special[o]||{},n=k[o=(d?l.delegateType:l.bindType)||o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;f--;)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&!1!==l.teardown.call(a,p,r.handle)||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(0<=p.indexOf(".")&&(p=(q=p.split(".")).shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,(b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b)).isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||!1!==k.trigger.apply(d,c))){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}for(n=0;(h=o[n++])&&!b.isPropagationStopped();)b.type=1<n?i:k.bindType||p,(f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"))&&f.apply(h,c),(f=g&&h[g])&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),!1===b.result&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||!1===k._default.apply(o.pop(),c))&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){(l=d[g])&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if((i[0]=a).delegateTarget=this,!k.preDispatch||!1!==k.preDispatch.call(this,a)){for(h=m.event.handlers.call(this,a,j),b=0;(f=h[b++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,void 0!==(c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i))&&!1===(a.result=c)&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(!0!==i.disabled||"click"!==a.type)){for(e=[],f=0;f<h;f++)void 0===e[c=(d=b[f]).selector+" "]&&(e[c]=d.needsContext?0<=m(c,this).index(i):m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;b--;)a[c=d[b]]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(e=(d=a.target.ownerDocument||y).documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ca()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ca()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?aa:ba):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=aa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=aa,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=aa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,e=a.relatedTarget,f=a.handleObj;return(!e||e!==this&&!m.contains(this,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return!m.nodeName(this,"form")&&void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return!m.nodeName(this,"form")&&void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){for(f in"string"!=typeof b&&(c=c||b,b=void 0),a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),!1===d)d=ba;else if(!d)return this;return 1===e&&(g=d,(d=function(a){return m().off(a),g.apply(this,arguments)}).guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(!1===b||"function"==typeof b)&&(c=b,b=void 0),!1===c&&(c=ba),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});var ea="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fa=/ jQuery\d+="(?:null|\d+)"/g,ga=new RegExp("<(?:"+ea+")[\\s/>]","i"),ha=/^\s+/,ia=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ja=/<([\w:]+)/,ka=/<tbody/i,la=/<|&#?\w+;/,ma=/<(?:script|style|link)/i,na=/checked\s*(?:[^=]|=\s*.checked.)/i,oa=/^$|\/(?:java|ecma)script/i,pa=/^true\/(.*)/,qa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ra={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ta=da(y).appendChild(y.createElement("div"));function ua(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ua(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function va(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wa(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xa(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function ya(a){var b=pa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function za(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Aa(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h)for(c in delete g.handle,g.events={},h)for(d=0,e=h[c].length;d<e;d++)m.event.add(b,c,h[c][d]);g.data&&(g.data=m.extend({},g.data))}}function Ba(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){for(d in(e=m._data(b)).events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xa(b).text=a.text,ya(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}ra.optgroup=ra.option,ra.tbody=ra.tfoot=ra.colgroup=ra.caption=ra.thead,ra.th=ra.td,m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!ga.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ta.innerHTML=a.outerHTML,ta.removeChild(f=ta.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ua(f),h=ua(a),g=0;null!=(e=h[g]);++g)d[g]&&Ba(e,d[g]);if(b)if(c)for(h=h||ua(a),d=d||ua(f),g=0;null!=(e=h[g]);g++)Aa(e,d[g]);else Aa(a,f);return 0<(d=ua(f,"script")).length&&za(d,!i&&ua(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=da(b),p=[],q=0;q<n;q++)if((f=a[q])||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(la.test(f)){for(h=h||o.appendChild(b.createElement("div")),i=(ja.exec(f)||["",""])[1].toLowerCase(),l=ra[i]||ra._default,h.innerHTML=l[1]+f.replace(ia,"<$1></$2>")+l[2],e=l[0];e--;)h=h.lastChild;if(!k.leadingWhitespace&&ha.test(f)&&p.push(b.createTextNode(ha.exec(f)[0])),!k.tbody)for(e=(f="table"!==i||ka.test(f)?"<table>"!==l[1]||ka.test(f)?0:h:h.firstChild)&&f.childNodes.length;e--;)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(m.merge(p,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));for(h&&o.removeChild(h),k.appendChecked||m.grep(ua(p,"input"),va),q=0;f=p[q++];)if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ua(o.appendChild(f),"script"),g&&za(h),c))for(e=0;f=h[e++];)oa.test(f.type||"")&&c.push(f);return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(g=(f=d[i])&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||wa(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ua(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&za(ua(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&m.cleanData(ua(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fa,""):void 0;if(!("string"!=typeof a||ma.test(a)||!k.htmlSerialize&&ga.test(a)||!k.leadingWhitespace&&ha.test(a)||ra[(ja.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ia,"<$1></$2>");try{for(;c<d;c++)1===(b=this[c]||{}).nodeType&&(m.cleanData(ua(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ua(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||1<l&&"string"==typeof p&&!k.checkClone&&na.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=(i=m.buildFragment(a,this[0].ownerDocument,!1,this)).firstChild,1===i.childNodes.length&&(i=c),c)){for(f=(g=m.map(ua(i,"script"),xa)).length;j<l;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ua(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,ya),j=0;j<f;j++)d=g[j],oa.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qa,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;d<=h;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Ca,Da={};function Ea(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fa(a){var b=y,c=Da[a];return c||("none"!==(c=Ea(a,b))&&c||((b=((Ca=(Ca||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement))[0].contentWindow||Ca[0].contentDocument).document).write(),b.close(),c=Ea(a,b),Ca.detach()),Da[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){return null!=a?a:(a=!1,(c=y.getElementsByTagName("body")[0])&&c.style?(b=y.createElement("div"),(d=y.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0);var b,c,d}}();var Ia,Ja,Ga=/^margin/,Ha=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ka=/^(top|right|bottom|left)$/;function La(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}a.getComputedStyle?(Ia=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},Ja=function(a,b,c){var d,e,f,g,h=a.style;return g=(c=c||Ia(a))?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Ha.test(g)&&Ga.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ia=function(a){return a.currentStyle},Ja=function(a,b,c){var d,e,f,g,h=a.style;return null==(g=(c=c||Ia(a))?c[b]:void 0)&&h&&h[b]&&(g=h[b]),Ha.test(g)&&!Ka.test(b)&&(d=h.left,(f=(e=a.runtimeStyle)&&e.left)&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"}),function(){var b,c,d,e,f,g,h;if((b=y.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=(d=b.getElementsByTagName("a")[0])&&d.style){function i(){var b,c,d,i;(c=y.getElementsByTagName("body")[0])&&c.style&&(b=y.createElement("div"),(d=y.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,(i=b.appendChild(y.createElement("div"))).style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight),b.removeChild(i)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(i=b.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(g=0===i[0].offsetHeight)&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}})}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];for(f in e=c.apply(a,d||[]),b)a.style[f]=g[f];return e};var Ma=/alpha\([^)]*\)/i,Na=/opacity\s*=\s*([^)]*)/,Oa=/^(none|table(?!-c[ea]).+)/,Pa=new RegExp("^("+S+")(.*)$","i"),Qa=new RegExp("^([+-])=("+S+")","i"),Ra={position:"absolute",visibility:"hidden",display:"block"},Sa={letterSpacing:"0",fontWeight:"400"},Ta=["Webkit","O","Moz","ms"];function Ua(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ta.length;e--;)if((b=Ta[e]+c)in a)return b;return d}function Va(a,b){for(var c,d,e,f=[],g=0,h=a.length;g<h;g++)(d=a[g]).style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fa(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;g<h;g++)(d=a[g]).style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wa(a,b,c){var d=Pa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Ya(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ia(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(e<=0||null==e){if(((e=Ja(a,b,f))<0||null==e)&&(e=a.style[b]),Ha.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xa(a,b,c||(g?"border":"content"),d,f)+"px"}function Za(a,b,c,d,e){return new Za.prototype.init(a,b,c,d,e)}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ja(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ua(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if("string"===(f=typeof c)&&(e=Qa.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c==c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ua(a.style,h)),(g=m.cssHooks[b]||m.cssHooks[h])&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Ja(a,b,d)),"normal"===f&&b in Sa&&(f=Sa[b]),""===c||c?(e=parseFloat(f),!0===c||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Oa.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Ra,function(){return Ya(a,b,d)}):Ya(a,b,d):void 0},set:function(a,c,d){var e=d&&Ia(a);return Wa(0,c,d?Xa(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Na.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";((c.zoom=1)<=b||""===b)&&""===m.trim(f.replace(Ma,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Ma.test(f)?f.replace(Ma,e):f+" "+e)}}),m.cssHooks.marginRight=La(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Ja,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Ga.test(a)||(m.cssHooks[a+b].set=Wa)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ia(a),e=b.length;g<e;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,1<arguments.length)},show:function(){return Va(this,!0)},hide:function(){return Va(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}}),((m.Tween=Za).prototype={constructor:Za,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Za.propHooks[this.prop];return a&&a.get?a.get(this):Za.propHooks._default.get(this)},run:function(a){var b,c=Za.propHooks[this.prop];return this.options.duration?this.pos=b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Za.propHooks._default.set(this),this}}).init.prototype=Za.prototype,(Za.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""))&&"auto"!==b?b:0:a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}}).scrollTop=Za.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Za.prototype.init,m.fx.step={};var $a,_a,ab=/^(?:toggle|show|hide)$/,bb=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cb=/queueHooks$/,db=[function(a,b,c){var d,e,f,g,h,i,j,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");for(d in c.queue||(null==(h=m._queueHooks(a,"fx")).unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),"inline"===("none"===j?m._data(a,"olddisplay")||Fa(a.nodeName):j)&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fa(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]})),b)if(e=b[d],ab.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fa(a.nodeName):j)&&(p.display=j);else for(d in r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;for(b in m._removeData(a,"fxshow"),o)m.style(a,b,o[b])}),o)g=hb(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}],eb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bb.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bb.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f)for(f=f||g[3],e=e||[],g=+d||1;g/=h=h||".5",m.style(c.elem,a,g+f),h!==(h=c.cur()/d)&&1!==h&&--i;);return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fb(){return setTimeout(function(){$a=void 0}),$a=m.now()}function gb(a,b){var c,d={height:a},e=0;for(b=b?1:0;e<4;e+=2-b)d["margin"+(c=T[e])]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hb(a,b,c){for(var d,e=(eb[b]||[]).concat(eb["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function kb(a,b,c){var d,e,f=0,g=db.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$a||fb(),c=Math.max(0,j.startTime+j.duration-b),f=1-(c/j.duration||0),g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$a||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(function(a,b){var c,d,e,f,g;for(c in a)if(e=b[d=m.camelCase(c)],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=m.cssHooks[d])&&"expand"in g)for(c in f=g.expand(f),delete a[d],f)c in a||(a[c]=f[c],b[c]=e);else b[d]=e}(k,j.opts.specialEasing);f<g;f++)if(d=db[f].call(j,a,k,j.opts))return d;return m.map(k,hb,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kb,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],eb[c]=eb[c]||[],eb[c].unshift(b)},prefilter:function(a,b){b?db.unshift(a):db.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||!0===d.queue)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kb(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),m.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($a=m.now();c<b.length;c++)(a=b[c])()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$a=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_a||(_a=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_a),_a=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx&&m.fx.speeds[a]||a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;(b=y.createElement("div")).setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],e=(c=y.createElement("select")).appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,(a=y.createElement("input")).setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lb=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(null==(e=d?a.call(this,c,m(this).val()):a)?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),(b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:"string"==typeof(c=e.value)?c.replace(lb,""):null==c?"":c:void 0}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(!(!(c=d[i]).selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=m.makeArray(b),g=e.length;g--;)if(d=e[g],0<=m.inArray(m.valHooks.option.get(d),f))try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=0<=m.inArray(m(a).val(),b):void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mb,nb,ob=m.expr.attrHandle,pb=/^(?:checked|selected)$/i,qb=k.getSetAttribute,rb=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nb:mb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:null==(e=m.find.attr(a,b))?void 0:e:null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)for(;c=f[e++];)d=m.propFix[c]||c,m.expr.match.bool.test(c)?rb&&qb||!pb.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qb?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nb={set:function(a,b,c){return!1===b?m.removeAttr(a,c):rb&&qb||!pb.test(c)?a.setAttribute(!qb&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ob[b]||m.find.attr;ob[b]=rb&&qb||!pb.test(b)?function(a,b,d){var e,f;return d||(f=ob[b],ob[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ob[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rb&&qb||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mb&&mb.set(a,b,c)}}),qb||(mb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},ob.id=ob.name=ob.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mb.set},m.attrHooks.contenteditable={set:function(a,b,c){mb.set(a,""!==b&&b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sb=/^(?:input|select|textarea|button|object)$/i,tb=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,1<arguments.length)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{for:"htmlFor",class:"className"},prop:function(a,b,c){var d,e,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return(1!==g||!m.isXMLDoc(a))&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sb.test(a.nodeName)||tb.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var ub=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];h<i;h++)if(d=1===(c=this[h]).nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];h<i;h++)if(d=1===(c=this[h]).nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):"")){for(f=0;e=b[f++];)for(;0<=d.indexOf(" "+e+" ");)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=m(this),f=a.match(E)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||!1===a?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&0<=(" "+this[c].className+" ").replace(ub," ").indexOf(b))return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vb=m.now(),wb=/\?/,xb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{a.DOMParser?c=(new DOMParser).parseFromString(b,"text/xml"):((c=new ActiveXObject("Microsoft.XMLDOM")).async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yb,zb,Ab=/#.*$/,Bb=/([?&])_=[^&]*/,Cb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Eb=/^(?:GET|HEAD)$/,Fb=/^\/\//,Gb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hb={},Ib={},Jb="*/".concat("*");try{zb=location.href}catch(Kb){(zb=y.createElement("a")).href="",zb=zb.href}function Lb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mb(a,b,c,d){var e={},f=a===Ib;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nb(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}yb=Gb.exec(zb.toLowerCase())||[],m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zb,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(yb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nb(Nb(a,m.ajaxSettings),b):Nb(m.ajaxSettings,a)},ajaxPrefilter:Lb(Hb),ajaxTransport:Lb(Ib),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j)for(j={};b=Cb.exec(f);)j[b[1].toLowerCase()]=b[2];b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(t<2)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zb)+"").replace(Ab,"").replace(Fb,yb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gb.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yb[1]&&c[2]===yb[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yb[3]||("http:"===yb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mb(Hb,k,b,v),2===t)return v;for(d in(h=m.event&&k.global)&&0==m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Eb.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wb.test(e)?"&":"?")+k.data,delete k.data),!1===k.cache&&(k.url=Bb.test(e)?e.replace(Bb,"$1_="+vb++):e+(wb.test(e)?"&":"?")+"_="+vb++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&!1!==k.contentType||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jb+"; q=0.01":""):k.accepts["*"]),k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(!1===k.beforeSend.call(l,v,k)||2===t))return v.abort();for(d in u="abort",{success:1,error:1,complete:1})v[d](k[d]);if(i=Mb(Ib,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&0<k.timeout&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(t<2))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=0<a?4:0,j=200<=a&&a<300||304===a,c&&(u=function(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}(k,v,c)),u=function(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(!(g=j[i+" "+f]||j["* "+f]))for(e in j)if((h=e.split(" "))[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){!0===g?g=j[e]:!0!==j[e]&&(f=h[0],k.unshift(h[1]));break}if(!0!==g)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}(k,u,v,j),j?(k.ifModified&&((w=v.getResponseHeader("Last-Modified"))&&(m.lastModified[e]=w),(w=v.getResponseHeader("etag"))&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,j=!(s=u.error))):(s=x,(a||!x)&&(x="error",a<0&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qb=/%20/g,Rb=/\[\]$/,Sb=/\r?\n/g,Tb=/^(?:submit|button|image|reset|file)$/i,Ub=/^(?:input|select|textarea|keygen)/i;function Vb(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rb.test(a)?d(a,e):Vb(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vb(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vb(c,a[c],b,e);return d.join("&").replace(Qb,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Ub.test(this.nodeName)&&!Tb.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sb,"\r\n")}}):{name:b.name,value:c.replace(Sb,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zb()||function(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}()}:Zb;var Wb=0,Xb={},Yb=m.ajaxSettings.xhr();function Zb(){try{return new a.XMLHttpRequest}catch(b){}}a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Xb)Xb[a](void 0,!0)}),k.cors=!!Yb&&"withCredentials"in Yb,(Yb=k.ajax=!!Yb)&&m.ajaxTransport(function(a){var b;if(!a.crossDomain||k.cors)return{send:function(c,d){var e,f=a.xhr(),g=++Wb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];for(e in a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest"),c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xb[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xb[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){(b=y.createElement("script")).async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _b=[],ac=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_b.pop()||m.expando+"_"+vb++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=!1!==b.jsonp&&(ac.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ac,"$1"+e):!1!==b.jsonp&&(b.url+=(wb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_b.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bc=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bc)return bc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return 0<=h&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),0<g.length&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cc=a.document.documentElement;function dc(a){return m.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),("absolute"===k||"fixed"===k)&&-1<m.inArray("auto",[f,i])?(g=(d=l.position()).top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;return f?(b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d):void 0},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||cc;a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position");)a=a.offsetParent;return a||cc})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=La(k.pixelPosition,function(a,c){return c?(c=Ja(a,b),Ha.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(!0===d||!0===e?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ec=a.jQuery,fc=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fc),b&&a.jQuery===m&&(a.jQuery=ec),m},typeof b===K&&(a.jQuery=a.$=m),m}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,f,a,h,g){return jQuery.easing.easeOutQuad(e,f,a,h,g)},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return-h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){return(f/=g/2)<1?h/2*f*f+a:-h/2*(--f*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){return(f/=g/2)<1?h/2*f*f*f+a:h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return-h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){return(f/=g/2)<1?h/2*f*f*f*f+a:-h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){return(f/=g/2)<1?h/2*f*f*f*f*f+a:h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return-h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return-h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return 0==f?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return f==g?a+h:h*(1-Math.pow(2,-10*f/g))+a},easeInOutExpo:function(e,f,a,h,g){return 0==f?a:f==g?a+h:(f/=g/2)<1?h/2*Math.pow(2,10*(f-1))+a:h/2*(2-Math.pow(2,-10*--f))+a},easeInCirc:function(e,f,a,h,g){return-h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){return(f/=g/2)<1?-h/2*(Math.sqrt(1-f*f)-1)+a:h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,l,k){var i=1.70158,j=0,g=l;if(0==h)return e;if(1==(h/=k))return e+l;if(j||(j=.3*k),g<Math.abs(l)){g=l;i=j/4}else i=j/(2*Math.PI)*Math.asin(l/g);return-g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j)+e},easeOutElastic:function(f,h,e,l,k){var i=1.70158,j=0,g=l;if(0==h)return e;if(1==(h/=k))return e+l;if(j||(j=.3*k),g<Math.abs(l)){g=l;i=j/4}else i=j/(2*Math.PI)*Math.asin(l/g);return g*Math.pow(2,-10*h)*Math.sin((h*k-i)*(2*Math.PI)/j)+l+e},easeInOutElastic:function(f,h,e,l,k){var i=1.70158,j=0,g=l;if(0==h)return e;if(2==(h/=k/2))return e+l;if(j||(j=k*(.3*1.5)),g<Math.abs(l)){g=l;i=j/4}else i=j/(2*Math.PI)*Math.asin(l/g);return h<1?g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j)*-.5+e:g*Math.pow(2,-10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j)*.5+l+e},easeInBack:function(e,f,a,i,h,g){return null==g&&(g=1.70158),i*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,i,h,g){return null==g&&(g=1.70158),i*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,i,h,g){return null==g&&(g=1.70158),(f/=h/2)<1?i/2*(f*f*((1+(g*=1.525))*f-g))+a:i/2*((f-=2)*f*((1+(g*=1.525))*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){return(f/=g)<1/2.75?h*(7.5625*f*f)+a:f<2/2.75?h*(7.5625*(f-=1.5/2.75)*f+.75)+a:f<2.5/2.75?h*(7.5625*(f-=2.25/2.75)*f+.9375)+a:h*(7.5625*(f-=2.625/2.75)*f+.984375)+a},easeInOutBounce:function(e,f,a,h,g){return f<g/2?.5*jQuery.easing.easeInBounce(e,2*f,0,h,g)+a:.5*jQuery.easing.easeOutBounce(e,2*f-g,0,h,g)+.5*h+a}}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory:factory(jQuery)}(function($){var nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($.event.fixHooks)for(var i=toFix.length;i;)$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;var special=$.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=toBind.length;i;)this.addEventListener(toBind[--i],handler,!1);else this.onmousewheel=handler;$.data(this,"mousewheel-line-height",special.getLineHeight(this)),$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=toBind.length;i;)this.removeEventListener(toBind[--i],handler,!1);else this.onmousewheel=null;$.removeData(this,"mousewheel-line-height"),$.removeData(this,"mousewheel-page-height")},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem["offsetParent"in $.fn?"offsetParent":"parent"]();return $parent.length||($parent=$("body")),parseInt($parent.css("fontSize"),10)||parseInt($elem.css("fontSize"),10)||16},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function handler(event){var absDelta,orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,offsetX=0,offsetY=0;if((event=$.event.fix(orgEvent)).type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(delta=deltaY=-1*orgEvent.deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}if(absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||absDelta<lowestDelta)&&shouldAdjustOldDeltas(orgEvent,lowestDelta=absDelta)&&(lowestDelta/=40),shouldAdjustOldDeltas(orgEvent,absDelta)&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[1<=delta?"floor":"ceil"](delta/lowestDelta),deltaX=Math[1<=deltaX?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[1<=deltaY?"floor":"ceil"](deltaY/lowestDelta),special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left,offsetY=event.clientY-boundingRect.top}return event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.offsetX=offsetX,event.offsetY=offsetY,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($.event.dispatch||$.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&"mousewheel"===orgEvent.type&&absDelta%120==0}$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})}),function(){"use strict";function Md5(t){if(t)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var r=new ArrayBuffer(68);this.buffer8=new Uint8Array(r),this.blocks=new Uint32Array(r)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD="function"==typeof define&&define.amd,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t){return function(r){return new Md5(!0).update(r)[t]()}},createMethod=function(){var t=createOutputMethod("hex");NODE_JS&&(t=nodeWrap(t)),t.create=function(){return new Md5},t.update=function(r){return t.create().update(r)};for(var r=0;r<OUTPUT_TYPES.length;++r){var e=OUTPUT_TYPES[r];t[e]=createOutputMethod(e)}return t},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(t){if("string"==typeof t)return crypto.createHash("md5").update(t,"utf8").digest("hex");if(null==t)throw ERROR;return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash("md5").update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod};Md5.prototype.update=function(t){if(!this.finalized){var r,e=typeof t;if("string"!==e){if("object"!==e)throw ERROR;if(null===t)throw ERROR;if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||ARRAY_BUFFER&&ArrayBuffer.isView(t)))throw ERROR;r=!0}for(var s,i,o=0,h=t.length,f=this.blocks,a=this.buffer8;o<h;){if(this.hashed&&(this.hashed=!1,f[0]=f[16],f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0),r)if(ARRAY_BUFFER)for(i=this.start;o<h&&i<64;++o)a[i++]=t[o];else for(i=this.start;o<h&&i<64;++o)f[i>>2]|=t[o]<<SHIFT[3&i++];else if(ARRAY_BUFFER)for(i=this.start;o<h&&i<64;++o)(s=t.charCodeAt(o))<128?a[i++]=s:(s<2048?a[i++]=192|s>>6:(s<55296||57344<=s?a[i++]=224|s>>12:(s=65536+((1023&s)<<10|1023&t.charCodeAt(++o)),a[i++]=240|s>>18,a[i++]=128|s>>12&63),a[i++]=128|s>>6&63),a[i++]=128|63&s);else for(i=this.start;o<h&&i<64;++o)(s=t.charCodeAt(o))<128?f[i>>2]|=s<<SHIFT[3&i++]:(s<2048?f[i>>2]|=(192|s>>6)<<SHIFT[3&i++]:(s<55296||57344<=s?f[i>>2]|=(224|s>>12)<<SHIFT[3&i++]:(s=65536+((1023&s)<<10|1023&t.charCodeAt(++o)),f[i>>2]|=(240|s>>18)<<SHIFT[3&i++],f[i>>2]|=(128|s>>12&63)<<SHIFT[3&i++]),f[i>>2]|=(128|s>>6&63)<<SHIFT[3&i++]),f[i>>2]|=(128|63&s)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,64<=i?(this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,r=this.lastByteIndex;t[r>>2]|=EXTRA[3&r],56<=r&&(this.hashed||this.hash(),t[0]=t[16],t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.bytes<<3,t[15]=this.hBytes<<3|this.bytes>>29,this.hash()}},Md5.prototype.hash=function(){var t,r,e,s,i,o,h=this.blocks;this.first?r=((t=((t=h[0]-680876937)<<7|t>>>25)-271733879<<0)^(e=((e=(-271733879^(s=((s=(-1732584194^2004318071&t)+h[1]-117830708)<<12|s>>>20)+t<<0)&(-271733879^t))+h[2]-1126478375)<<17|e>>>15)+s<<0)&(s^t))+h[3]-1316259209:(t=this.h0,r=this.h1,e=this.h2,r+=((t=((t+=((s=this.h3)^r&(e^s))+h[0]-680876936)<<7|t>>>25)+r<<0)^(e=((e+=(r^(s=((s+=(e^t&(r^e))+h[1]-389564586)<<12|s>>>20)+t<<0)&(t^r))+h[2]+606105819)<<17|e>>>15)+s<<0)&(s^t))+h[3]-1044525330),r=(r<<22|r>>>10)+e<<0,r=((r+=((t=((t+=(s^r&(e^s))+h[4]-176418897)<<7|t>>>25)+r<<0)^(e=((e+=(r^(s=((s+=(e^t&(r^e))+h[5]+1200080426)<<12|s>>>20)+t<<0)&(t^r))+h[6]-1473231341)<<17|e>>>15)+s<<0)&(s^t))+h[7]-45705983)<<22|r>>>10)+e<<0,r=((r+=((t=((t+=(s^r&(e^s))+h[8]+1770035416)<<7|t>>>25)+r<<0)^(e=((e+=(r^(s=((s+=(e^t&(r^e))+h[9]-1958414417)<<12|s>>>20)+t<<0)&(t^r))+h[10]-42063)<<17|e>>>15)+s<<0)&(s^t))+h[11]-1990404162)<<22|r>>>10)+e<<0,r=((r+=((t=((t+=(s^r&(e^s))+h[12]+1804603682)<<7|t>>>25)+r<<0)^(e=((e+=(r^(s=((s+=(e^t&(r^e))+h[13]-40341101)<<12|s>>>20)+t<<0)&(t^r))+h[14]-1502002290)<<17|e>>>15)+s<<0)&(s^t))+h[15]+1236535329)<<22|r>>>10)+e<<0,r=((r+=((s=((s+=(r^e&((t=((t+=(e^s&(r^e))+h[1]-165796510)<<5|t>>>27)+r<<0)^r))+h[6]-1069501632)<<9|s>>>23)+t<<0)^t&((e=((e+=(t^r&(s^t))+h[11]+643717713)<<14|e>>>18)+s<<0)^s))+h[0]-373897302)<<20|r>>>12)+e<<0,r=((r+=((s=((s+=(r^e&((t=((t+=(e^s&(r^e))+h[5]-701558691)<<5|t>>>27)+r<<0)^r))+h[10]+38016083)<<9|s>>>23)+t<<0)^t&((e=((e+=(t^r&(s^t))+h[15]-660478335)<<14|e>>>18)+s<<0)^s))+h[4]-405537848)<<20|r>>>12)+e<<0,r=((r+=((s=((s+=(r^e&((t=((t+=(e^s&(r^e))+h[9]+568446438)<<5|t>>>27)+r<<0)^r))+h[14]-1019803690)<<9|s>>>23)+t<<0)^t&((e=((e+=(t^r&(s^t))+h[3]-187363961)<<14|e>>>18)+s<<0)^s))+h[8]+1163531501)<<20|r>>>12)+e<<0,r=((r+=((s=((s+=(r^e&((t=((t+=(e^s&(r^e))+h[13]-1444681467)<<5|t>>>27)+r<<0)^r))+h[2]-51403784)<<9|s>>>23)+t<<0)^t&((e=((e+=(t^r&(s^t))+h[7]+1735328473)<<14|e>>>18)+s<<0)^s))+h[12]-1926607734)<<20|r>>>12)+e<<0,r=((r+=((o=(s=((s+=((i=r^e)^(t=((t+=(i^s)+h[5]-378558)<<4|t>>>28)+r<<0))+h[8]-2022574463)<<11|s>>>21)+t<<0)^t)^(e=((e+=(o^r)+h[11]+1839030562)<<16|e>>>16)+s<<0))+h[14]-35309556)<<23|r>>>9)+e<<0,r=((r+=((o=(s=((s+=((i=r^e)^(t=((t+=(i^s)+h[1]-1530992060)<<4|t>>>28)+r<<0))+h[4]+1272893353)<<11|s>>>21)+t<<0)^t)^(e=((e+=(o^r)+h[7]-155497632)<<16|e>>>16)+s<<0))+h[10]-1094730640)<<23|r>>>9)+e<<0,r=((r+=((o=(s=((s+=((i=r^e)^(t=((t+=(i^s)+h[13]+681279174)<<4|t>>>28)+r<<0))+h[0]-358537222)<<11|s>>>21)+t<<0)^t)^(e=((e+=(o^r)+h[3]-722521979)<<16|e>>>16)+s<<0))+h[6]+76029189)<<23|r>>>9)+e<<0,r=((r+=((o=(s=((s+=((i=r^e)^(t=((t+=(i^s)+h[9]-640364487)<<4|t>>>28)+r<<0))+h[12]-421815835)<<11|s>>>21)+t<<0)^t)^(e=((e+=(o^r)+h[15]+530742520)<<16|e>>>16)+s<<0))+h[2]-995338651)<<23|r>>>9)+e<<0,r=((r+=((s=((s+=(r^((t=((t+=(e^(r|~s))+h[0]-198630844)<<6|t>>>26)+r<<0)|~e))+h[7]+1126891415)<<10|s>>>22)+t<<0)^((e=((e+=(t^(s|~r))+h[14]-1416354905)<<15|e>>>17)+s<<0)|~t))+h[5]-57434055)<<21|r>>>11)+e<<0,r=((r+=((s=((s+=(r^((t=((t+=(e^(r|~s))+h[12]+1700485571)<<6|t>>>26)+r<<0)|~e))+h[3]-1894986606)<<10|s>>>22)+t<<0)^((e=((e+=(t^(s|~r))+h[10]-1051523)<<15|e>>>17)+s<<0)|~t))+h[1]-2054922799)<<21|r>>>11)+e<<0,r=((r+=((s=((s+=(r^((t=((t+=(e^(r|~s))+h[8]+1873313359)<<6|t>>>26)+r<<0)|~e))+h[15]-30611744)<<10|s>>>22)+t<<0)^((e=((e+=(t^(s|~r))+h[6]-1560198380)<<15|e>>>17)+s<<0)|~t))+h[13]+1309151649)<<21|r>>>11)+e<<0,r=((r+=((s=((s+=(r^((t=((t+=(e^(r|~s))+h[4]-145523070)<<6|t>>>26)+r<<0)|~e))+h[11]-1120210379)<<10|s>>>22)+t<<0)^((e=((e+=(t^(s|~r))+h[2]+718787259)<<15|e>>>17)+s<<0)|~t))+h[9]-343485551)<<21|r>>>11)+e<<0,this.first?(this.h0=t+1732584193<<0,this.h1=r-271733879<<0,this.h2=e-1732584194<<0,this.h3=s+271733878<<0,this.first=!1):(this.h0=this.h0+t<<0,this.h1=this.h1+r<<0,this.h2=this.h2+e<<0,this.h3=this.h3+s<<0)},Md5.prototype.hex=function(){this.finalize();var t=this.h0,r=this.h1,e=this.h2,s=this.h3;return HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var t=this.h0,r=this.h1,e=this.h2,s=this.h3;return[255&t,t>>8&255,t>>16&255,t>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255,255&e,e>>8&255,e>>16&255,e>>24&255,255&s,s>>8&255,s>>16&255,s>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(16),r=new Uint32Array(t);return r[0]=this.h0,r[1]=this.h1,r[2]=this.h2,r[3]=this.h3,t},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var t,r,e,s="",i=this.array(),o=0;o<15;)t=i[o++],r=i[o++],e=i[o++],s+=BASE64_ENCODE_CHAR[t>>>2]+BASE64_ENCODE_CHAR[63&(t<<4|r>>>4)]+BASE64_ENCODE_CHAR[63&(r<<2|e>>>6)]+BASE64_ENCODE_CHAR[63&e];return t=i[o],s+(BASE64_ENCODE_CHAR[t>>>2]+BASE64_ENCODE_CHAR[t<<4&63]+"==")};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&define(function(){return exports}))}(),function(){var $,cardFromNumber,cardFromType,cards,defaultFormat,formatBackCardNumber,formatBackExpiry,formatCardNumber,formatExpiry,formatForwardExpiry,formatForwardSlashAndSpace,hasTextSelected,luhnCheck,reFormatCVC,reFormatCardNumber,reFormatExpiry,reFormatNumeric,replaceFullWidthChars,restrictCVC,restrictCardNumber,restrictExpiry,restrictNumeric,safeVal,setCardType,__slice=[].slice,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};($=window.jQuery||window.Zepto||window.$).payment={},$.payment.fn={},$.fn.payment=function(){var args,method;return method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],$.payment.fn[method].apply(this,args)},defaultFormat=/(\d{1,4})/g,$.payment.cards=cards=[{type:"maestro",patterns:[5018,502,503,506,56,58,639,6220,67],format:defaultFormat,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"forbrugsforeningen",patterns:[600],format:defaultFormat,length:[16],cvcLength:[3],luhn:!0},{type:"dankort",patterns:[5019],format:defaultFormat,length:[16],cvcLength:[3],luhn:!0},{type:"visa",patterns:[4],format:defaultFormat,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",patterns:[51,52,53,54,55,22,23,24,25,26,27],format:defaultFormat,length:[16],cvcLength:[3],luhn:!0},{type:"amex",patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"dinersclub",patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",patterns:[60,64,65,622],format:defaultFormat,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",patterns:[62,88],format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",patterns:[35],format:defaultFormat,length:[16],cvcLength:[3],luhn:!0}],cardFromNumber=function(num){var card,p,_i,_j,_len,_len1,_ref;for(num=(num+"").replace(/\D/g,""),_i=0,_len=cards.length;_i<_len;_i++)for(_j=0,_len1=(_ref=(card=cards[_i]).patterns).length;_j<_len1;_j++)if(p=_ref[_j]+"",num.substr(0,p.length)===p)return card},cardFromType=function(type){var card,_i,_len;for(_i=0,_len=cards.length;_i<_len;_i++)if((card=cards[_i]).type===type)return card},luhnCheck=function(num){var digit,digits,odd,sum,_i,_len;for(odd=!0,_i=sum=0,_len=(digits=(num+"").split("").reverse()).length;_i<_len;_i++)digit=digits[_i],digit=parseInt(digit,10),(odd=!odd)&&(digit*=2),9<digit&&(digit-=9),sum+=digit;return sum%10==0},hasTextSelected=function($target){var _ref;return null!=$target.prop("selectionStart")&&$target.prop("selectionStart")!==$target.prop("selectionEnd")||!(null==("undefined"!=typeof document&&null!==document&&null!=(_ref=document.selection)?_ref.createRange:void 0)||!document.selection.createRange().text)},safeVal=function(value,$target){var currPair,cursor,digit,last,prevPair;try{cursor=$target.prop("selectionStart")}catch(_error){_error,cursor=null}if(last=$target.val(),$target.val(value),null!==cursor&&$target.is(":focus"))return cursor===last.length&&(cursor=value.length),last!==value&&(prevPair=last.slice(cursor-1,+cursor+1||9e9),currPair=value.slice(cursor-1,+cursor+1||9e9),digit=value[cursor],/\d/.test(digit)&&prevPair===digit+" "&&currPair===" "+digit&&(cursor+=1)),$target.prop("selectionStart",cursor),$target.prop("selectionEnd",cursor)},replaceFullWidthChars=function(str){var chars,chr,idx,value,_i,_len;for(null==str&&(str=""),"０１２３４５６７８９","0123456789",value="",_i=0,_len=(chars=str.split("")).length;_i<_len;_i++)chr=chars[_i],-1<(idx="０１２３４５６７８９".indexOf(chr))&&(chr="0123456789"[idx]),value+=chr;return value},reFormatNumeric=function(e){var $target;return $target=$(e.currentTarget),setTimeout(function(){var value;return value=$target.val(),value=(value=replaceFullWidthChars(value)).replace(/\D/g,""),safeVal(value,$target)})},reFormatCardNumber=function(e){var $target;return $target=$(e.currentTarget),setTimeout(function(){var value;return value=$target.val(),value=replaceFullWidthChars(value),value=$.payment.formatCardNumber(value),safeVal(value,$target)})},formatCardNumber=function(e){var $target,card,digit,length,re,upperLength,value;if(digit=String.fromCharCode(e.which),/^\d+$/.test(digit)&&($target=$(e.currentTarget),value=$target.val(),card=cardFromNumber(value+digit),length=(value.replace(/\D/g,"")+digit).length,upperLength=16,card&&(upperLength=card.length[card.length.length-1]),!(upperLength<=length||null!=$target.prop("selectionStart")&&$target.prop("selectionStart")!==value.length)))return(re=card&&"amex"===card.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(value)?(e.preventDefault(),setTimeout(function(){return $target.val(value+" "+digit)})):re.test(value+digit)?(e.preventDefault(),setTimeout(function(){return $target.val(value+digit+" ")})):void 0},formatBackCardNumber=function(e){var $target,value;if($target=$(e.currentTarget),value=$target.val(),8===e.which&&(null==$target.prop("selectionStart")||$target.prop("selectionStart")===value.length))return/\d\s$/.test(value)?(e.preventDefault(),setTimeout(function(){return $target.val(value.replace(/\d\s$/,""))})):/\s\d?$/.test(value)?(e.preventDefault(),setTimeout(function(){return $target.val(value.replace(/\d$/,""))})):void 0},reFormatExpiry=function(e){var $target;return $target=$(e.currentTarget),setTimeout(function(){var value;return value=$target.val(),value=replaceFullWidthChars(value),value=$.payment.formatExpiry(value),safeVal(value,$target)})},formatExpiry=function(e){var $target,digit,val;if(digit=String.fromCharCode(e.which),/^\d+$/.test(digit))return $target=$(e.currentTarget),val=$target.val()+digit,/^\d$/.test(val)&&"0"!==val&&"1"!==val?(e.preventDefault(),setTimeout(function(){return $target.val("0"+val+" / ")})):/^\d\d$/.test(val)?(e.preventDefault(),setTimeout(function(){var m1,m2;return m1=parseInt(val[0],10),2<(m2=parseInt(val[1],10))&&0!==m1?$target.val("0"+m1+" / "+m2):$target.val(val+" / ")})):void 0},formatForwardExpiry=function(e){var $target,digit,val;if(digit=String.fromCharCode(e.which),/^\d+$/.test(digit))return val=($target=$(e.currentTarget)).val(),/^\d\d$/.test(val)?$target.val(val+" / "):void 0},formatForwardSlashAndSpace=function(e){var $target,val,which;if("/"===(which=String.fromCharCode(e.which))||" "===which)return val=($target=$(e.currentTarget)).val(),/^\d$/.test(val)&&"0"!==val?$target.val("0"+val+" / "):void 0},formatBackExpiry=function(e){var $target,value;if($target=$(e.currentTarget),value=$target.val(),8===e.which&&(null==$target.prop("selectionStart")||$target.prop("selectionStart")===value.length))return/\d\s\/\s$/.test(value)?(e.preventDefault(),setTimeout(function(){return $target.val(value.replace(/\d\s\/\s$/,""))})):void 0},reFormatCVC=function(e){var $target;return $target=$(e.currentTarget),setTimeout(function(){var value;return value=$target.val(),value=(value=replaceFullWidthChars(value)).replace(/\D/g,"").slice(0,4),safeVal(value,$target)})},restrictNumeric=function(e){var input;return!(!e.metaKey&&!e.ctrlKey)||32!==e.which&&(0===e.which||(e.which<33||(input=String.fromCharCode(e.which),!!/[\d\s]/.test(input))))},restrictCardNumber=function(e){var $target,card,digit,value;if($target=$(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)&&!hasTextSelected($target))return value=($target.val()+digit).replace(/\D/g,""),(card=cardFromNumber(value))?value.length<=card.length[card.length.length-1]:value.length<=16},restrictExpiry=function(e){var $target,digit;if($target=$(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)&&!hasTextSelected($target))return!(6<($target.val()+digit).replace(/\D/g,"").length)&&void 0},restrictCVC=function(e){var $target,digit;if($target=$(e.currentTarget),digit=String.fromCharCode(e.which),/^\d+$/.test(digit)&&!hasTextSelected($target))return($target.val()+digit).length<=4},setCardType=function(e){var $target,allTypes,card,cardType,val;if(val=($target=$(e.currentTarget)).val(),cardType=$.payment.cardType(val)||"unknown",!$target.hasClass(cardType))return allTypes=function(){var _i,_len,_results;for(_results=[],_i=0,_len=cards.length;_i<_len;_i++)card=cards[_i],_results.push(card.type);return _results}(),$target.removeClass("unknown"),$target.removeClass(allTypes.join(" ")),$target.addClass(cardType),$target.toggleClass("identified","unknown"!==cardType),$target.trigger("payment.cardType",cardType)},$.payment.fn.formatCardCVC=function(){return this.on("keypress",restrictNumeric),this.on("keypress",restrictCVC),this.on("paste",reFormatCVC),this.on("change",reFormatCVC),this.on("input",reFormatCVC),this},$.payment.fn.formatCardExpiry=function(){return this.on("keypress",restrictNumeric),this.on("keypress",restrictExpiry),this.on("keypress",formatExpiry),this.on("keypress",formatForwardSlashAndSpace),this.on("keypress",formatForwardExpiry),this.on("keydown",formatBackExpiry),this.on("change",reFormatExpiry),this.on("input",reFormatExpiry),this},$.payment.fn.formatCardNumber=function(){return this.on("keypress",restrictNumeric),this.on("keypress",restrictCardNumber),this.on("keypress",formatCardNumber),this.on("keydown",formatBackCardNumber),this.on("keyup",setCardType),this.on("paste",reFormatCardNumber),this.on("change",reFormatCardNumber),this.on("input",reFormatCardNumber),this.on("input",setCardType),this},$.payment.fn.restrictNumeric=function(){return this.on("keypress",restrictNumeric),this.on("paste",reFormatNumeric),this.on("change",reFormatNumeric),this.on("input",reFormatNumeric),this},$.payment.fn.cardExpiryVal=function(){return $.payment.cardExpiryVal($(this).val())},$.payment.cardExpiryVal=function(value){var month,year,_ref;return month=(_ref=value.split(/[\s\/]+/,2))[0],2===(null!=(year=_ref[1])?year.length:void 0)&&/^\d+$/.test(year)&&(year=(new Date).getFullYear().toString().slice(0,2)+year),{month:month=parseInt(month,10),year:year=parseInt(year,10)}},$.payment.validateCardNumber=function(num){var card,_ref;return num=(num+"").replace(/\s+|-/g,""),!!/^\d+$/.test(num)&&(!!(card=cardFromNumber(num))&&(_ref=num.length,0<=__indexOf.call(card.length,_ref)&&(!1===card.luhn||luhnCheck(num))))},$.payment.validateCardExpiry=function(month,year){var currentTime,expiry,_ref;return"object"==typeof month&&"month"in month&&(month=(_ref=month).month,year=_ref.year),!(!month||!year)&&(month=$.trim(month),year=$.trim(year),!!/^\d+$/.test(month)&&(!!/^\d+$/.test(year)&&(1<=month&&month<=12&&(2===year.length&&(year=year<70?"20"+year:"19"+year),4===year.length&&(expiry=new Date(year,month),currentTime=new Date,expiry.setMonth(expiry.getMonth()-1),expiry.setMonth(expiry.getMonth()+1,1),currentTime<expiry)))))},$.payment.validateCardCVC=function(cvc,type){var card,_ref;return cvc=$.trim(cvc),!!/^\d+$/.test(cvc)&&(null!=(card=cardFromType(type))?(_ref=cvc.length,0<=__indexOf.call(card.cvcLength,_ref)):3<=cvc.length&&cvc.length<=4)},$.payment.cardType=function(num){var _ref;return num&&(null!=(_ref=cardFromNumber(num))?_ref.type:void 0)||null},$.payment.formatCardNumber=function(num){var card,groups,upperLength,_ref;return num=num.replace(/\D/g,""),(card=cardFromNumber(num))?(upperLength=card.length[card.length.length-1],num=num.slice(0,upperLength),card.format.global?null!=(_ref=num.match(card.format))?_ref.join(" "):void 0:null!=(groups=card.format.exec(num))?(groups.shift(),(groups=$.grep(groups,function(n){return n})).join(" ")):void 0):num},$.payment.formatExpiry=function(expiry){var mon,parts,sep,year;return(parts=expiry.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/))?(mon=parts[1]||"",sep=parts[2]||"",0<(year=parts[3]||"").length?sep=" / ":" /"===sep?(mon=mon.substring(0,1),sep=""):2===mon.length||0<sep.length?sep=" / ":1===mon.length&&"0"!==mon&&"1"!==mon&&(mon="0"+mon,sep=" / "),mon+sep+year):""}}.call(this);var MS_SECOND=1e3,MS_MINUTE=60*MS_SECOND,MS_HOUR=60*MS_MINUTE,MS_DAY=24*MS_HOUR,VectorStock=VectorStock||{};if(VectorStock.js={zclip:"/js/libraries/jquery.zclip.js",addthis:"//s7.addthis.com/js/250/addthis_widget.js#pubid=vectorstock",addthis_new:"//s7.addthis.com/js/300/addthis_widget.js#pubid=vectorstock",analytics:"//google-analytics.com/ga.js",facebook:"//connect.facebook.net/en_US/all.js#xfbml=1&appId=241100862642313",googleplus:"//apis.google.com/js/plusone.js",pinterest:"//assets.pinterest.com/js/pinit.js",twitter:"//platform.twitter.com/widgets.js"},VectorStock.google_id="101753067915-kdnvvq7hnnmrkia4f8ld6vrsuuco80c0.apps.googleusercontent.com",VectorStock.analytics_id="UA-2180430-2",VectorStock.host="//www.vectorstock.com",VectorStock.amazonHost="https://vectorstock-uploads.s3.amazonaws.com",VectorStock.domain="//cdn.vectorstock.com",VectorStock.time=(new Date).getTime(),VectorStock.defaultInputText=["Search any Keyword...","Search for Artist...","Search for Vector ID..."],VectorStock.cache={vectors:{}},window.ga){var GA_LOCAL_STORAGE_KEY="ga:clientId";window.localStorage?(ga("create",VectorStock.analytics_id,{cookieDomain:"none",storage:"none",clientId:localStorage.getItem(GA_LOCAL_STORAGE_KEY)}),ga(function(tracker){localStorage.setItem(GA_LOCAL_STORAGE_KEY,tracker.get("clientId"))})):ga("create",VectorStock.analytics_id,"none"),ga("send","pageview")}var addthis_config={data_ga_property:VectorStock.analytics_id,data_track_clickback:!0,data_ga_social:!0},adroll_adv_id="FGEN3AZRB5FR7IPG3EJY2N",adroll_pix_id="4MPPFIS53BCNTEJONTB5OY",__adroll_loaded=!0;VectorStock.track=function(){window.ga||(window.ga=function(){window.console&&window.console.log});try{ga.apply(this,arguments)}catch(err){}},VectorStock.trackPage=function(page,title){VectorStock.track("send","pageview",{page:page,title:title})},VectorStock.trackSearch=function(search,page,category,title){var search_query=encodeURIComponent(search.toLowerCase());VectorStock.trackPage(page+"?keywords="+search_query+"&category="+category+"&type=internal",title)},function(){function isFileRemote(file){return 0<=file.search(/https?:/i)&&file.search(/:\/\/[w.]*vectorstock\.com/i)<0}function isBrowserOld(){return!!(head.browser.ie&&head.browser.version<9)||!window.JSON}window.onerror=function(message,source,lineno,colno,error){if((!source||!isFileRemote(source))&&message&&message.match&&!message.match(/script error/i)&&!isBrowserOld()){var log={page:window.location.href,source:source,position:lineno?colno?lineno+":"+colno:lineno:"",user:$("#user_id").val()||$('input[name="account_timestamp"]').val()||"Unknown"};if(message.match(/nsresult:/i)){var exception=/\exception[\.]+\s+"(.+?)"/i.exec(message);if(1<exception.length){var location=/location:\s+"(.+?)"/i.exec(message);if(1<location.length){var url=/(https\S+)/i.exec(location[1]);if(url&&1<url.length){if(isFileRemote(url[1]))return;log.source=url[1]}var line=/line (\d+)/i.exec(location[1]);line&&1<line.length&&(log.position=line[1])}message=exception[1]}}if(error&&error.stack){if(isFileRemote(source=/([^@(\s]+?):([:\d]+)/i.exec(error.stack)[1]||""))return;log.stack=error.stack}VectorStock.track("send","event","Error (JS)",message,JSON.stringify(log))}},$(document).ajaxError(function(event,request,settings){if((0!=request.status||"error"!=request.statusText)&&!isBrowserOld()){var log={page:event.target.URL,request:settings.url,data:settings.data,method:settings.type,code:request.status,user:$("#user_id").val()||$('input[name="account_timestamp"]').val()||"Unknown"};401==request.status&&window.SignupBox?new SignupBox(!1,"login"):(200==request.status&&(log.response=request.responseText),VectorStock.track("send","event","Error (JS)","AJAXError: "+request.statusText,JSON.stringify(log)))}})}(),head.feature("localStorage",function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}),head.feature("sessionStorage",function(){try{return"sessionStorage"in window&&null!==window.sessionStorage}catch(e){return!1}}),$.put=function(url,data,callback,type){return $.isFunction(data)&&(type=type||callback,callback=data,data={}),$.ajax({url:url,type:"PUT",data:data,success:callback,contentType:type})},$.delete=function(url,data,callback,type){return $.isFunction(data)&&(type=type||callback,callback=data,data={}),$.ajax({url:url,type:"DELETE",data:data,success:callback,contentType:type})},$.fn.forceNumericOnly=function(){return this.each(function(){$(this).keydown(function(e){46==e.keyCode||8==e.keyCode||9==e.keyCode||27==e.keyCode||13==e.keyCode||65==e.keyCode&&!0===e.metaKey||65==e.keyCode&&!0===e.ctrlKey||35<=e.keyCode&&e.keyCode<=40||(e.shiftKey||(e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode))&&e.preventDefault()}),$(this).on("change",function(){var value=$(this).val();$(this).val(value.replace(/\D/g,""))})})},$.fn.getCaretPosition=function(){var elem=this[0];if("selectionStart"in elem)return elem.selectionStart;if(document.selection){elem.focus();var sel=document.selection.createRange(),sel_length=document.selection.createRange().text.length;return sel.moveStart("character",-elem.value.length),sel.text.length-sel_length}return null},$.fn.setCaretPosition=function(pos){return this.each(function(index,elem){if(elem.setSelectionRange)elem.setSelectionRange(pos,pos);else if(elem.createTextRange){var range=elem.createTextRange();range.collapse(!0),range.moveEnd("character",pos),range.moveStart("character",pos),range.select()}}),this},$.fn.isEmpty=function(){var val=this.val();return val==this.attr("placeholder")||""==val},$.fn.typeEvents=function(){this.each(function(){var timeout_typing,input=$(this);input.on("keydown paste",function(){var len=input.val().length;setTimeout(function(){input.val().length!==len&&input.trigger("value_change")},10)}),input.on("value_change",function(){timeout_typing?clearTimeout(timeout_typing):input.trigger("type_start"),timeout_typing=setTimeout(function(){input.trigger("type_stop"),clearTimeout(timeout_typing),timeout_typing=null},300)})})},$(window).each(function(){var timeout,init=!1,scope=$(this);scope.on("resize",function(){init||(scope.trigger("resizeStart"),init=!0),clearInterval(timeout),timeout=setTimeout(function(){scope.trigger("resizeStop"),init=!1},300)})}),Number.prototype.formatCommas=function(shorthand){if(shorthand){if(1e6<=this)return String(Math.floor(this/1e5)/10)+"m";if(1e4<=this)return String(Math.floor(this/1e3))+"k"}return String(this).replace(/(\d)(?=(\d{3})+\b)/g,"$1,")},String.prototype.zeroPad=function(len){var str=String(this);return str.length>=len?str:new Array(len-str.length+1).join("0")+str},Number.prototype.zeroPad=function(len){return String(this).zeroPad(len)},String.prototype.formatCommas=function(){var parts=this.split("."),whole=parseInt(parts.shift());return isNaN(whole)?this:whole.formatCommas()+"."+parts.join()},String.prototype.toTitleCase=function(){return this.toLowerCase().replace(/(?:^|\s)\w/g,function(match){return match.toUpperCase()})},String.prototype.toNumber=function(){var adj=this.match(/%\s?$/gi)?.01:1;return parseFloat(this.replace(/[\$,]/g,""))*adj},Array.prototype.filter||(Array.prototype.filter=function(method,scope){if(null==this||"function"!=typeof method)throw new TypeError;for(var arr=Object(this),len=arr.length>>>0,res=[],i=0;i<len;i++)if(i in arr){var val=arr[i];method.call(scope,val,i,arr)&&res.push(val)}return res}),Array.prototype.indexOf||(Array.prototype.indexOf=function(needle,index){index=index||0;for(var len=this.length;index<len;){if(this[index]===needle)return index;++index}return-1}),Array.prototype.remove=function(){for(var needle,index,len=arguments.length;len&&this.length;)for(needle=arguments[--len];-1!==(index=this.indexOf(needle));)this.splice(index,1);return this};var VSModule=function(){var INSTANCE={},events={};return INSTANCE.dispatchEvent=function(eventtype,args){if(events[eventtype]){null==args||null==args?args=[]:args instanceof Array!=!0&&(args=[args]);for(var i=events[eventtype].length;i--;)events[eventtype][i].apply(INSTANCE,args)}return INSTANCE},INSTANCE.on=function(eventtype,method){if("string"==typeof eventtype){var types=eventtype.split(" ");eventtype=1<types.length?types:eventtype}if(eventtype instanceof Array){for(var index in eventtype)INSTANCE.on(eventtype[index],method);return INSTANCE}return events[eventtype]||(events[eventtype]=[]),events[eventtype].push(method),INSTANCE},INSTANCE.off=function(eventtype,method){if("string"==typeof eventtype){var types=eventtype.split(" ");eventtype=1<types.length?types:eventtype}if(eventtype instanceof Array){for(var index in eventtype)INSTANCE.off(eventtype[index],method);return INSTANCE}if(events[eventtype])for(var i=events[eventtype].length;i--;)if(events[eventtype][i]==method){events[eventtype].splice(i,1);break}return INSTANCE},INSTANCE};!function($){var ID_CLASSNAME="vs_loadicon";$.fn.loadingIcon=function(icon_type,icon_shade){var instances,time_cleanup=1e3,num_diameter=100,num_framerate=31,num_frames=18,svg_code='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 40 40" style="enable-background:new 0 0 40 40;" xml:space="preserve"><g><path d="M12.436,35.229C6.843,32.445,3,26.671,3,20c0-9.39,7.611-17,17-17l-2.532,7.767"/><path d="M27.561,4.769C33.155,7.551,37,13.327,37,20c0,9.389-7.611,17-17,17l2.531-7.768"/></g></svg>',support_svg=$("html").hasClass("svginline"),support_animation=$("html").hasClass("cssanimation");icon_type=icon_type||"medium",icon_shade=icon_shade||"";return support_animation=support_svg=!0,this.each(function(){var container,icon,film,int_animation,int_cleanup,frame=0,offset=0;function animateJS(){var position=frame*num_diameter*-1+offset;film.css({top:position+"px"}),frame=frame<num_frames-1?frame+1:0}function isFinished(){(icon.is(":hidden")||icon.css("opacity")<.1||"hidden"==icon.css("visibility"))&&(icon.remove(),clearInterval(int_animation),clearInterval(int_cleanup))}container=$(this),function(){if(icon=$("<span></span>").addClass(ID_CLASSNAME).addClass(icon_type).addClass(icon_shade).appendTo(container),film=$("<span></span>").appendTo(icon),support_svg&&support_animation)$(svg_code).appendTo(film),icon.addClass("animate_css");else{icon.addClass("animate_fbf"),offset=parseInt(film.css("top"),10);var time_fps=Math.round(1e3/num_framerate);int_animation=setInterval(animateJS,time_fps)}int_cleanup=setInterval(isFinished,time_cleanup),instances=instances?instances.add(icon):icon}()}),instances}}(jQuery),function($){$.fn.dropdown=function(settings_custom){var settings=$.extend({},{classname:"dropdown",width:0},settings_custom);return this.each(function(){var original,module,button,label,options,area,list,icon,is_open,selected_index,scroll_position,open_height;function onMousewheel(event,delta){var top=list.scrollTop();0<delta&&0==top?event.preventDefault():delta<0&&top==list[0].scrollHeight-list.innerHeight()&&event.preventDefault()}function toggleState(){is_open?close():open()}function open(){is_open||($("."+settings.classname).not(module).each(function(){$(this).trigger("close")}),$(document).on("mousedown",mouseDown),$(document).on("keydown",scrollTo),module.addClass("open"),list.scrollTop(scroll_position),is_open=!0)}function close(){if(is_open){if($(document).off("mousedown",mouseDown),$(document).off("keydown",scrollTo),module.removeClass("open"),module.addClass("close"),$("html").hasClass("csstransitions")){var transitionEnd="webkitTransitionEnd oTransitionEnd MSTransitionEnd transitionend",transitionComplete=function(){module.removeClass("close"),module.off(transitionEnd,transitionComplete)};module.on(transitionEnd,transitionComplete)}else module.removeClass("close");is_open=!1}}function mouseDown(event){0===$(event.target).parents("."+settings.classname).length&&close()}function onListClick(event){"LI"===event.target.tagName&&(selectItem($(event.target)),setTimeout(function(){close()},150))}function selectItem(item){var item_index=$("li",list).index(item);item_index!==selected_index&&($(".selected",list).removeClass("selected"),$(".dd_icon",list).remove(),item.prepend(icon).addClass("selected"),selected_index=item_index,label.html(item.text()),scroll_position=list.scrollTop()+item.position().top-1,original[0].selectedIndex=selected_index,original.change())}function checkDirection(){var _window=$(window),boundary_top=_window.scrollTop(),boundary_bottom=boundary_top+_window.height(),module_top=module.offset().top,module_bottom=module_top+module.height();is_open||module_bottom<=boundary_bottom&&boundary_top<=module_top&&("up"==settings.direction?module_top-open_height<boundary_top?module.removeClass("dd_up"):module.addClass("dd_up"):boundary_bottom<module_bottom+open_height?module.addClass("dd_up"):module.removeClass("dd_up"))}function scrollTo(event){if(0==$(":focus").length&&65<=event.keyCode&&event.keyCode<=90){var limit=list[0].scrollHeight-list.height(),adjust=0,offset=0;$("li",list).each(function(){var code=$(this).text().charCodeAt(0);if(""==$(this).attr("data-val"))adjust=$(this).outerHeight(),offset+=adjust;else{if(code==event.keyCode)return!1;if(code>event.keyCode)return offset-=adjust,!1;adjust=$(this).outerHeight(),offset+=adjust}});offset=Math.min(offset,limit);var change=Math.abs(list.scrollTop()-offset),duration=300+5*Math.round(change/30);scroll_position=offset,list.stop().animate({scrollTop:scroll_position},duration,"easeOutCubic")}}original=$(this),function(){is_open=!1,module=$('<div class="'+settings.classname+' open"><div class="dd_button"><span class="dd_label"></span><span class="dd_icon"></span></div><div class="dd_options"><div class="dd_area"><ul></ul></div></div></div>'),button=$(".dd_button",module),label=$(".dd_label",module),options=$(".dd_options",module),area=$(".dd_area",options),list=$("ul",area),icon=$('<span class="dd_icon"></span>'),original.after(module).hide(),settings.size&&module.addClass("dd_"+settings.size),settings.direction&&module.addClass("dd_"+settings.direction),settings.theme&&module.addClass("dd_"+settings.theme),module.width(0<settings.width?settings.width:original.outerWidth());var scroll_tally=0;$("option",original).each(function(i){var item=$("<li>"+$(this).text()+"</li>").attr("data-val",$(this).val()).appendTo(list);$(this).is(":selected")&&(item.append(icon).addClass("selected"),label.html($(this).text()),scroll_position=scroll_tally,selected_index=i),scroll_tally+=item.outerHeight()}),open_height=options.height(),module.on("open",open).on("close",close),button.on("click",toggleState),list.on("mousewheel",onMousewheel).on("click",onListClick),$(window).on("scroll",checkDirection),original.on("change",function(){var item_index=$("option:selected",this).index();selectItem(list.find("li").eq(item_index))}),module.removeClass("open"),checkDirection()}()}),this}}(jQuery);var EventTracker=function(){var timeout_process,INSTANCE=new VSModule,URL_SERVER="/api/tracking",TIME_DELAY_PROCESSING=1e4,ID_EVENTS="vs_events",MAX_EVENTS_SEND=800,tracking_enabled=!0,support_localstorage=!1,support_sessionstorage=!1,support_cookies=!1,memory_events=[];function getCookie(cookie_id){for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var cookie_parts=cookies[i].split("="),cookie_key=cookie_parts.shift(),cookie_value=cookie_parts.join("=");if(cookie_key===cookie_id)return cookie_value}}function getLocalStorageEvents(){try{return JSON.parse(localStorage[ID_EVENTS])}catch(e){return[]}}function getCookieEvents(){var cookie_value=getCookie(ID_EVENTS);if(void 0!==cookie_value)try{return JSON.parse(cookie_value)}catch(e){return[]}return[]}function storeEvent(event){if(support_localstorage||support_cookies){var stored_events_arr=support_localstorage?getLocalStorageEvents():support_cookies?getCookieEvents():memory_events;stored_events_arr.push(event);var stored_events_str=JSON.stringify(stored_events_arr);support_localstorage?localStorage[ID_EVENTS]=stored_events_str:support_cookies&&(document.cookie=ID_EVENTS+"="+stored_events_str+"; path=/")}else memory_events.push(event);timeout_process||(timeout_process=setTimeout(processStoredEvents,TIME_DELAY_PROCESSING))}function sendToServer(events){return $.ajax({url:URL_SERVER,method:"POST",data:{events:events,timestamp:Math.round((new Date).getTime()/1e3)}})}function processStoredEvents(){var stored_events,extra_events,on_success;(support_localstorage?(stored_events=getLocalStorageEvents()).length>MAX_EVENTS_SEND?(extra_events=stored_events.splice(MAX_EVENTS_SEND),on_success=function(){localStorage[ID_EVENTS]=JSON.stringify(extra_events),timeout_process||(timeout_process=setTimeout(processStoredEvents,TIME_DELAY_PROCESSING))}):on_success=function(){localStorage.removeItem(ID_EVENTS)}:support_cookies?(stored_events=getCookieEvents()).length>MAX_EVENTS_SEND?(extra_events=stored_events.splice(MAX_EVENTS_SEND),on_success=function(){document.cookie=ID_EVENTS+"="+JSON.stringify(extra_events)+"; path=/",timeout_process||(timeout_process=setTimeout(processStoredEvents,TIME_DELAY_PROCESSING))}):on_success=function(){document.cookie=ID_EVENTS+"=[]; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/"}:(stored_events=memory_events).length>MAX_EVENTS_SEND?(extra_events=stored_events.splice(MAX_EVENTS_SEND),on_success=function(){memory_events=extra_events,timeout_process||(timeout_process=setTimeout(processStoredEvents,TIME_DELAY_PROCESSING))}):on_success=function(){memory_events=[]},stored_events&&stored_events.length)&&sendToServer(stored_events).success(on_success);timeout_process&&(timeout_process=null)}return INSTANCE.track=function(event,process_later){if(tracking_enabled&&event&&event.action){event.timestamp||(event.timestamp=Math.round((new Date).getTime()/1e3));for(var event_arr=[event.action,event.image||"",event.search||"",event.timestamp,event.search_scope||null,event.search_artist||null,event.search_category||null];null==event_arr[event_arr.length-1];)event_arr.pop();process_later?storeEvent(event_arr):sendToServer([event_arr])}},INSTANCE.store=function(event_id,event_value,event_is_session){support_localstorage&&support_sessionstorage?event_is_session?sessionStorage[event_id]=event_value:localStorage[event_id]=event_value:document.cookie=event_id+"="+event_value+"; path=/"},INSTANCE.retrieve=function(event_id,event_is_session){if(support_localstorage&&support_sessionstorage){if(event_is_session&&void 0!==sessionStorage[event_id]){var event_value=sessionStorage[event_id];return sessionStorage.removeItem(event_id),event_value}if(void 0!==localStorage[event_id]){event_value=localStorage[event_id];return localStorage.removeItem(event_id),event_value}}if(support_cookies&&void 0!==(event_value=getCookie(event_id)))return document.cookie=event_id+"=0; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/",event_value},function(){try{localStorage.setItem("vs_localstorage_test","vs_localstorage_test"),localStorage.removeItem("vs_localstorage_test"),support_localstorage=!0,sessionStorage.setItem("vs_sessionstorage_test","vs_sessionstorage_test"),sessionStorage.removeItem("vs_sessionstorage_test"),support_sessionstorage=!0}catch(e){}if(!(support_cookies=navigator.cookieEnabled))try{document.cookie="vs_cookies_test=1",support_cookies=-1!==document.cookie.indexOf("vs_cookies_test="),document.cookie="vs_cookies_test=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"}catch(e){}1==$('head meta[name="events-disabled"]').attr("content")&&(tracking_enabled=!1),tracking_enabled&&processStoredEvents()}(),INSTANCE}(),UserData=function(){var user_id,INSTANCE={},URL_PROFILE="/json/json_profile.php",support_sessionstorage=!1,cart=[],purchased=[],galleries=[],following=[];function getProfile(){$.get(URL_PROFILE).done(function(response){response?setProfile(response):logIssue()}).fail(logIssue)}function logIssue(){try{$.get("/api/purchases/setup",function(response){VectorStock.track("send","event","Error (JS)","CustomError: JSON Profile","User ID: "+response.user_id)})}catch(e){}}function setProfile(data){data&&data.id&&(user_id=data.id,cart=data.cart||[],cart=$.isArray(cart)?cart:[],purchased=data.purchased||[],galleries=formatGalleryContents(data.galleries||[]),following=data.following||[],save())}function save(type){try{support_sessionstorage&&JSON&&JSON.stringify&&(type&&"id"!=type||(sessionStorage.sid=JSON.stringify(user_id)),type&&"cart"!=type||(sessionStorage.cart=JSON.stringify(cart)),type&&"purchased"!=type||(sessionStorage.purchased=JSON.stringify(purchased)),type&&"galleries"!=type||(sessionStorage.galleries=JSON.stringify(galleries)),type&&"following"!=type||(sessionStorage.following=JSON.stringify(following)))}catch(e){}}function getGalleryIndexByID(gallery_id){for(var i=0;i<galleries.length;i++)if(galleries[i].id==gallery_id)return i;return null}function emptyGallery(gallery_id){var gallery_index=getGalleryIndexByID(gallery_id);galleries[gallery_index].contents=[]}function formatGalleryContents(galleries){if(!galleries||!galleries.length)return galleries;for(var i=0;i<galleries.length;i++)if(galleries[i].contents.length){for(var contents=[],j=0;j<galleries[i].contents.length;j++)galleries[i].contents[j]&&(galleries[i].contents[j].id?contents.push(galleries[i].contents[j].id):isNaN(galleries[i].contents[j])||contents.push(galleries[i].contents[j]));galleries[i].contents=contents}return galleries}function purge(){support_sessionstorage&&(sessionStorage.removeItem("sid"),sessionStorage.removeItem("cart"),sessionStorage.removeItem("purchased"),sessionStorage.removeItem("galleries"),sessionStorage.removeItem("following"))}return INSTANCE.destroy=purge,INSTANCE.refresh=getProfile,INSTANCE.setProfile=setProfile,INSTANCE.isInCart=function(vector_id){return vector_id=parseInt(vector_id),!!(cart.length&&cart.indexOf&&-1<cart.indexOf(vector_id))},INSTANCE.addToCart=function(vector_ids){vector_ids instanceof Array==0&&(vector_ids=[vector_ids]);for(var i=vector_ids.length;i--;){var vector_id=parseInt(vector_ids[i]);INSTANCE.isInCart(vector_id)||cart.push(vector_id)}return save("cart"),cart.length},INSTANCE.removeFromCart=function(vector_ids){if(vector_ids instanceof Array==0&&(vector_ids=[vector_ids]),cart.length)for(var i=vector_ids.length;i--;){var vector_id=parseInt(vector_ids[i]),vector_index=cart.indexOf(vector_id);-1<vector_index&&cart.splice(vector_index,1)}return save("cart"),cart.length},INSTANCE.emptyCart=function(){cart=[],save("cart")},INSTANCE.getCart=function(){return cart},INSTANCE.hasPurchased=function(vector_id){return vector_id=parseInt(vector_id),!!(purchased&&purchased.indexOf&&-1<purchased.indexOf(vector_id))},INSTANCE.addPurchase=function(vector_ids){vector_ids instanceof Array==0&&(vector_ids=[vector_ids]);for(var i=vector_ids.length;i--;){var vector_id=parseInt(vector_ids[i]);INSTANCE.hasPurchased(vector_id)||purchased.push(vector_id)}save("purchased")},INSTANCE.isInGallery=function(vector_id,gallery_id){vector_id=parseInt(vector_id);var gallery_index=getGalleryIndexByID(gallery_id=parseInt(gallery_id));return!!(galleries[gallery_index]&&0<=galleries[gallery_index].contents.indexOf(vector_id))},INSTANCE.createGallery=function(gallery_id,gallery_name){gallery_id=parseInt(gallery_id),galleries.unshift({id:gallery_id,name:gallery_name,contents:[]}),save("galleries")},INSTANCE.renameGallery=function(gallery_id,gallery_name){var gallery_index=getGalleryIndexByID(parseInt(gallery_id));galleries[gallery_index].name=gallery_name,save("galleries")},INSTANCE.addToGallery=function(vector_id,gallery_id){vector_id=parseInt(vector_id),gallery_id=parseInt(gallery_id);var gallery_index=getGalleryIndexByID(parseInt(gallery_id));galleries[gallery_index]?(galleries[gallery_index].contents.push(vector_id),save("galleries")):getProfile()},INSTANCE.removeFromGallery=function(vector_id,gallery_id){vector_id=parseInt(vector_id),gallery_id=parseInt(gallery_id);var gallery_index=getGalleryIndexByID(parseInt(gallery_id));if(galleries[gallery_index]){var vector_index=galleries[gallery_index].contents.indexOf(vector_id);-1<vector_index&&galleries[gallery_index].contents.splice(vector_index,1)}save("galleries")},INSTANCE.emptyGallery=function(gallery_id){emptyGallery(parseInt(gallery_id)),save("galleries")},INSTANCE.deleteGallery=function(gallery_id){emptyGallery(gallery_id=parseInt(gallery_id));var gallery_index=getGalleryIndexByID(gallery_id);gallery_index&&galleries.splice(gallery_index,1),save("galleries")},INSTANCE.isFollowing=function(artist_name){return artist_name=artist_name.toLowerCase(),!!(following&&following.indexOf&&-1<following.indexOf(artist_name))},INSTANCE.followArtist=function(artist_name){artist_name=artist_name.toLowerCase(),-1===following.indexOf(artist_name)&&(following.push(artist_name),save("purchased"))},INSTANCE.unfollowArtist=function(artist_name){artist_name=artist_name.toLowerCase();var index=following.indexOf(artist_name);-1<index&&(following.splice(index,1),save("purchased"))},function(){try{sessionStorage.setItem("vs_sessionstorage_test","vs_sessionstorage_test"),sessionStorage.removeItem("vs_sessionstorage_test"),support_sessionstorage=!0}catch(e){}support_sessionstorage&&("undefined"==sessionStorage.sid&&sessionStorage.removeItem("sid"),void 0!==sessionStorage.sid&&void 0!==sessionStorage.cart&&void 0!==sessionStorage.purchased?(user_id=JSON.parse(sessionStorage.sid),cart=JSON.parse(sessionStorage.cart)||cart,cart=$.isArray(cart)?cart:[],purchased=JSON.parse(sessionStorage.purchased)||purchased,galleries=sessionStorage.galleries&&JSON.parse(sessionStorage.galleries)||galleries,following=sessionStorage.following&&JSON.parse(sessionStorage.following)||following,void 0===(galleries=formatGalleryContents(galleries)).length&&(purge(),getProfile())):VectorStock.isLoggedIn()&&getProfile())}(),INSTANCE},MenuMobile=function(){var INSTANCE=new VSModule,icon=$("#mobilenav-icon"),menu=$("#mobilenav-menu"),logout=$("li.logout a",menu),is_open=($("html").hasClass("mobile"),!1),int_closing=!1;function open(){is_open||(clearInterval(int_closing),menu.removeClass("close"),icon.addClass("open"),menu.addClass("open"),updateHeight(),$(window).on("resize",updateHeight),$(document).on("click",clickOutside),is_open=!0)}function close(){is_open&&(icon.removeClass("open"),menu.addClass("close"),int_closing=setTimeout(function(){menu.removeClass("open close"),menu.css({height:""})},750),$(document).off("click",clickOutside),is_open=!1)}function clickOutside(event){$(event.target).closest(menu).length||close()}function updateHeight(){var height=$("body").outerHeight()-68;menu.css({height:height})}return INSTANCE.open=open,INSTANCE.close=close,$('li[data-action="login"] a').on("click",function(){if(window.SignupBox)return new SignupBox(!1,"login"),!1}),icon.on("click",function(event){is_open?close():open(),event.stopPropagation(),event.preventDefault()}),logout.on("click",function(){return VectorStock.userData.destroy(),$("form.logout",menu).submit(),!1}),INSTANCE};!function($){$.fn.filestyle=function(options){var settings={width:250};return options&&$.extend(settings,options),this.each(function(){var self=this,wrapper=$("<div>").css({width:settings.imagewidth+"px",height:settings.imageheight+"px",background:"url("+settings.image+") 0 0 no-repeat","background-position":"right",display:"inline",position:"absolute",overflow:"hidden"}),filename=$('<input class="file">').addClass($(self).attr("class")).css({display:"inline",width:settings.width+"px"});$(self).before(filename),$(self).wrap(wrapper),$(self).css({position:"relative",height:settings.imageheight+"px",width:settings.width+"px",display:"inline",cursor:"pointer",opacity:"0.0"}),$.browser.mozilla?/Win/.test(navigator.platform)?$(self).css("margin-left","-142px"):$(self).css("margin-left","-168px"):$(self).css("margin-left",settings.imagewidth-settings.width+"px"),$(self).bind("change",function(){filename.val($(self).val())})})}}(jQuery),function($){$.fn.popout=function(customSettings){$.fn.popout.defaultSettings={className:"popout",align:"left"};var settings=$.extend({},$.fn.popout.defaultSettings,customSettings);return this.each(function(){var isOpen,instance,button,panel;function open(){isOpen||($("."+settings.className).each(function(){$(this)[0]!==instance[0]&&$(this).trigger("close")}),$(document).on("mousedown",mouseDown),instance.addClass("open"),$(".po_content",panel).hide().slideDown(100,"easeOutExpo"),isOpen=!0)}function mouseDown(event){0===$(event.target).parents("."+settings.className).length&&instance.trigger("close")}function close(){isOpen&&($(document).off("mousedown",mouseDown),instance.removeClass("open"),isOpen=!1)}instance=$(this),isOpen=instance.hasClass("open"),button=$("a:first",instance).wrapInner('<span class="po_icon"></span>'),$("div:first",instance).wrap('<div class="po_panel"><div class="po_content"></div></div>'),panel=$(".po_panel",instance),instance.hasClass(settings.className)||instance.addClass(settings.className),"right"==settings.align?instance.addClass("alignr"):"center"==settings.align&&instance.addClass("alignc"),button.on("click",function(){return isOpen?instance.trigger("close"):instance.trigger("open"),!1}),instance.on("open",open),instance.on("close",close),isOpen&&$(document).on("mousedown",mouseDown),instance.addClass("ready")}),this}}(jQuery),function($){$.fn.mpopout=function(settings_custom){var CLASSNAME="mpopout";$.fn.mpopout.settings_default={align:"left"};var settings=$.extend({},$.fn.popout.settings_default,settings_custom);return this.each(function(){var is_open,instance,link_toggle;function open(){is_open||($("."+CLASSNAME).each(function(){$(this)[0]!==instance[0]&&$(this).trigger("close")}),$(document).on("mousedown",mouseDown),instance.addClass("open"),is_open=!0)}function mouseDown(event){0===$(event.target).parents("."+CLASSNAME).length&&instance.trigger("close")}function close(){is_open&&($(document).off("mousedown",mouseDown),instance.removeClass("open"),is_open=!1)}instance=$(this),function(){is_open=instance.hasClass("open");var display=$(".mpo_display",instance);$("a:eq(0)",display).addClass("instant").wrapInner('<span class="mpo_icon_instant" />'),link_toggle=$("a:eq(1)",display).addClass("toggle").wrapInner('<span class="mpo_icon_toggle" />'),$(".mpo_panel",instance).wrapInner('<div class="mpo_content"></div>'),instance.hasClass(CLASSNAME)||instance.addClass(CLASSNAME),"right"==settings.align?instance.addClass("alignr"):"center"==settings.align&&instance.addClass("alignc"),link_toggle.on("click",function(){return is_open?instance.trigger("close"):instance.trigger("open"),!1}),instance.on("open",open),instance.on("close",close),is_open&&$(document).on("mousedown",mouseDown),instance.addClass("ready")}()}),this}}(jQuery);var PreviewLink=function(element,vector_id,vector_title,is_pending){var src_thumb,src_preview,timeout_hover,pane,stem,area,grid,img,INSTANCE=VSModule(),SIZE_WIDE=237,SIZE_HIGH=250,TIME_HOVER=2e3,axis="horizontal",is_enabled=!0,is_text_only=!1,has_hovered=!1,src_cache={};function showPreviewPane(event){if(is_enabled){if($("#previewpane").remove(),element.attr("title",""),$("img",element).attr("title",""),element.parent().addClass("hover"),pane=$('<div id="previewpane"><span class="pp_title">'+vector_title+"</span></div>"),area=$("<div></div>").addClass("pp_imagearea"),stem=$("<div></div>"),pane.prepend(area).prepend(stem),img=new Image,src_cache[vector_id]||is_text_only)$(img).attr("src",src_preview).addClass("pp_preview").appendTo(area);else{var errors=0,errorCheck=function(event){$(event.target).remove().attr("src")==src_preview&&grid.fadeOut(200,"easeOutSine"),1<++errors&&$('<div class="pp_error"><p>Preview image could not be loaded...</p></div>').appendTo(area).hide().fadeIn(500)};grid=$('<div class="pp_grid"></div>').css("width",SIZE_WIDE),area.append(grid).append($('<img src="'+src_thumb+'" width="'+SIZE_WIDE+'" height="'+SIZE_HIGH+'" />').error(errorCheck)).css("width",SIZE_WIDE),$(img).load(function(){var scope=$(this).addClass("pp_preview").appendTo(area).addClass("hide");setTimeout(function(){scope.addClass("show")},10),src_cache[vector_id]=!0}).error(errorCheck).attr("src",src_preview)}pane.appendTo("body").hide().fadeIn(200,"easeOutSine");var pane_width=SIZE_WIDE+parseFloat(area.css("marginLeft"))+parseFloat(area.css("marginRight")),pane_height=pane.outerHeight();if(pane.css("width",pane_width),"vertical"===axis){event.pageY<$(window).height()/2?(buffer_top=60,stem.addClass("pp_stemtop")):(buffer_top=0-(pane_height+60),stem.addClass("pp_stembottom"));var box_space_left=event.pageX-$(event.target).offset().left,box_space_right=$(event.target).width()-box_space_left,offset_x=Math.ceil(pane_width/2);buffer_left=0-offset_x;var win_space_left=event.pageX-(offset_x+box_space_left+5);win_space_left<0&&(buffer_left=Math.abs(win_space_left)-offset_x);var win_space_right=$(window).width()-(event.pageX+offset_x+box_space_right+5);win_space_right<0&&(buffer_left=0-offset_x-Math.abs(win_space_right));var stem_left=Math.abs(buffer_left)-12;SIZE_WIDE<stem_left&&(stem_left=SIZE_WIDE),stem.css({left:stem_left})}else{event.pageX<$(window).width()/2?(buffer_left=60,stem.addClass("pp_stemleft")):(buffer_left=0-(pane_width+60),stem.addClass("pp_stemright"));var mouse_y=event.pageY-$(window).scrollTop(),perc_y=mouse_y/$(window).height();mouse_y<130?perc_y=0:mouse_y>$(window).height()-130&&(perc_y=1),buffer_top=0-Math.floor(perc_y*(pane.height()-55))-20,stem.css({top:Math.abs(buffer_top)-7})}element.on("mousemove",followMouseCursor),followMouseCursor(event),has_hovered||(timeout_hover=setTimeout(function(){has_hovered=!0,INSTANCE.dispatchEvent("hover"),timeout_hover=null},TIME_HOVER))}}function hidePreviewPane(event){element.attr("title",vector_title),$("img",element).attr("title",vector_title),element.parent().removeClass("hover"),pane&&pane.remove(),element.off("mousemove",followMouseCursor),timeout_hover&&clearTimeout(timeout_hover)}function followMouseCursor(event){pane.css("left",event.pageX+buffer_left).css("top",event.pageY+buffer_top)}return INSTANCE.disable=function(){is_enabled=!1},INSTANCE.enable=function(){is_enabled=!0},vector_title=vector_title||"",is_text_only=!$("img",element).length,src_thumb=VectorStock.imagePath(vector_id,vector_title,"small",is_pending),src_preview=VectorStock.imagePath(vector_id,vector_title,"medium",is_pending),element.on("mouseenter",showPreviewPane).on("mouseleave click",hidePreviewPane),INSTANCE};$(function(){var QUESTIONNAIRE_ANSWERS={A:"A. Adobe Illustrator",B:"B. CorelDRAW",C:"C. Something else"},questionnaire=$("#vs_questionnaire");if(questionnaire.length){try{if(void 0!==localStorage.vs_questionnaire_hide)return void questionnaire.remove()}catch(e){}var has_answered=!1,but_close=$('button[data-action="close"]',questionnaire),radio_options=new VectorStock.FieldRadioboxes($('.body ul[role="radiogroup"] li label',questionnaire)),but_submit=$('button[data-action="submit"]',questionnaire);but_close.on("click",function(){EventTracker.store("vs_questionnaire_hide",1),questionnaire.addClass("closed"),has_answered||VectorStock.track("send","event","Questionnaire Response","Not answered")}),radio_options.on("change",function(value){but_submit.prop("disabled",!1)}),but_submit.on("click",function(){has_answered=!0;var data_packet={answer:radio_options.value};$.post("/api/poll/answer",data_packet,function(){VectorStock.track("send","event","Questionnaire Response",QUESTIONNAIRE_ANSWERS[data_packet.answer]);try{localStorage.vs_questionnaire_hide=1}catch(e){}}),questionnaire.addClass("submitted")}),setTimeout(function(){questionnaire.addClass("revealed")},2e3)}}),VectorStock.FieldInput=function(input,format){var mod_fset,err_message,regex_alphanumeric,INSTANCE=new VSModule;function onFocus(){INSTANCE.dispatchEvent("focus")}function onBlur(){INSTANCE.dispatchEvent("blur")}function onUpdate(event){13==event.keyCode&&INSTANCE.dispatchEvent("return",INSTANCE.value),setTimeout(function(){var value=input.val();value!==INSTANCE.value&&(mod_fset.toggleClass("filled",""!==value),INSTANCE.value=value,INSTANCE.dispatchEvent("update",INSTANCE.value))},10)}function onChange(){INSTANCE.value=input.val(),INSTANCE.dispatchEvent("change",INSTANCE.value)}return INSTANCE.input=input,INSTANCE.name=input.attr("name"),INSTANCE.value=input.val(),INSTANCE.minlength=input.attr("minlength")?parseInt(input.attr("minlength")):null,INSTANCE.maxlength=input.attr("maxlength")?parseInt(input.attr("maxlength")):null,INSTANCE.disabled=input.prop("disabled"),INSTANCE.disable=function(){mod_fset.addClass("disabled"),input.prop("disabled",!0),INSTANCE.disabled=!0},INSTANCE.enable=function(){mod_fset.removeClass("disabled"),input.prop("disabled",!1),INSTANCE.disabled=!1},INSTANCE.focus=function(){input.focus()},INSTANCE.select=function(){input.select()},INSTANCE.showError=function(message){var icon,wrap;err_message||(mod_fset.addClass("error"),err_message=$('<div class="message" />').appendTo(mod_fset),icon=$('<div class="icon" />').appendTo(err_message),wrap=$('<div class="explanation" />').appendTo(err_message),$("<p />").html(message).appendTo(wrap),icon.on("touchstart",showError),INSTANCE.on("update",function clearError(){INSTANCE.clearError(),INSTANCE.off("update",clearError)}));function showError(){err_message.addClass("show"),icon.off("touchstart",showError),$("body").on("touchstart",hideError)}function hideError(){err_message.removeClass("show"),icon.on("touchstart",showError),$("body").off("touchstart",hideError)}},INSTANCE.clearError=function(){err_message&&(mod_fset.removeClass("error"),err_message.remove(),err_message=null)},INSTANCE.hasError=function(){return!!err_message},INSTANCE.setValue=function(value,suppress_event){return value=value||"",input.val(value),INSTANCE.value=value,suppress_event||INSTANCE.dispatchEvent("update",INSTANCE.value),INSTANCE},mod_fset=input.closest("fieldset"),input.on("focus",onFocus),input.on("blur",onBlur),input.on("keydown cut paste",onUpdate),input.on("change",onChange),format&&format==VectorStock.FieldInput.FORMAT_ALPHANUMERIC&&(regex_alphanumeric=/[^a-zA-Z\d\- ]/g,input.on("keypress",function(event){if(event.metaKey||event.ctrlKey)return!0;if(0==event.which)return!0;if(event.which<33)return!0;var character=String.fromCharCode(event.which);return!regex_alphanumeric.test(character)}),input.on("paste change input",function(event){setTimeout(function(){var value_original=input.val(),value_stripped=value_original;(value_stripped=(value_stripped=(value_stripped=value_stripped.replace(regex_alphanumeric,"")).replace(/\-+/g,"-")).replace(/\s+/g," "))!==value_original&&input.val(value_stripped)})})),INSTANCE},VectorStock.FieldInput.FORMAT_ALPHANUMERIC="alphanumeric",VectorStock.FieldCheckbox=function(input){var container,label,err_message,INSTANCE=new VSModule;function onChange(){INSTANCE.checked=input.is(":checked"),label.toggleClass("checked",INSTANCE.checked),INSTANCE.dispatchEvent("change",INSTANCE.checked)}return INSTANCE.name=input.attr("name"),INSTANCE.checked=input.is(":checked"),INSTANCE.disabled=input.prop("disabled"),INSTANCE.toggle=function(checked){checked=null==checked?!INSTANCE.checked:checked,input.prop("checked",checked),onChange()},INSTANCE.disable=function(){label.addClass("disabled"),input.prop("disabled",!0),INSTANCE.disabled=!0},INSTANCE.enable=function(){label.removeClass("disabled"),input.prop("disabled",!1),INSTANCE.disabled=!1},INSTANCE.showError=function(message){if(!err_message){var wrap;container.addClass("error"),err_message=$('<div class="message" />').appendTo(container),wrap=$('<div class="explanation" />').appendTo(err_message),$("<p />").html(message).appendTo(wrap);var clearError=function(){container.removeClass("error"),err_message.remove(),err_message=null,INSTANCE.off("change",clearError)};INSTANCE.on("change",clearError)}},INSTANCE.hasError=function(){return!!err_message},label=input.closest("label"),container=label.parent(),input.on("change",onChange),INSTANCE},VectorStock.FieldRadioboxes=function(items){var container,INSTANCE=new VSModule;function selectItem(item,suppress_bubbling){var input=$('input[type="radio"]',item);input.is(":checked")||input.prop("checked",!0),INSTANCE.value=input.val(),INSTANCE.selected=input,items.removeClass("checked"),item.addClass("checked"),suppress_bubbling||INSTANCE.dispatchEvent("change",INSTANCE.value)}return INSTANCE.value=null,INSTANCE.disabled=$('input[type="radio"]',items).prop("disabled"),INSTANCE.selected=null,INSTANCE.disable=function(){container.addClass("disabled"),$('input[type="radio"]',items).prop("disabled",!0),INSTANCE.disabled=!0},INSTANCE.enable=function(){container.removeClass("disabled"),$('input[type="radio"]',items).prop("disabled",!0),INSTANCE.disabled=!1},INSTANCE.set=function(value,suppress_bubbling){var input=$('input[value="'+value+'"]',items),item=input.closest("label");input.length&&selectItem(item,suppress_bubbling)},INSTANCE.getItems=function(){return $.makeArray(items)},container=items.parent(),items.each(function(){var item=$(this),input=$('input[type="radio"]',item);input.is(":checked")?(INSTANCE.value=input.val(),INSTANCE.selected=input,item.addClass("checked")):item.removeClass("checked"),item.on("mouseup",function(){$(this).hasClass("checked")&&INSTANCE.dispatchEvent("click")}),input.on("change",function(){selectItem(item)})}),INSTANCE},VectorStock.FieldButton=function(button){var label,icon_area,load_icon,label_default,INSTANCE=new VSModule;function onClick(event){INSTANCE.dispatchEvent("click",event)}return INSTANCE.disabled=button.prop("disabled"),INSTANCE.disable=function(){button.prop("disabled",!0),INSTANCE.disabled=!0},INSTANCE.enable=function(){button.prop("disabled",!1),INSTANCE.disabled=!1},INSTANCE.setLoading=function(message,is_light){var shade=is_light?"light":"";button.addClass("loading").prop("disabled",!0),label.html(message),load_icon=icon_area.loadingIcon("medium",shade),INSTANCE.disabled=!0},INSTANCE.setLabel=function(value){label.html(value)},INSTANCE.revert=function(){button.removeClass("loading").prop("disabled",!1),label.html(label_default),load_icon&&load_icon.remove(),INSTANCE.disabled=!1},label=$(".label",button),icon_area=$(".icon span",button),label_default=label.html(),button.on("click",onClick),INSTANCE};var ScreenSelect=function(container,is_contributor){var but_email,but_google,but_facebook,but_close,link_login,INSTANCE=new VSModule;function switchToSignup(event){INSTANCE.hide(),INSTANCE.dispatchEvent("screen_signup"),event.preventDefault()}function switchToLogin(event){INSTANCE.hide(),INSTANCE.dispatchEvent("screen_login"),event.preventDefault()}function signupWithGoogle(){but_google.setLoading("Connecting…",!0),but_close.hide(),INSTANCE.dispatchEvent("processing"),$.get("/api/google/auth",is_contributor?{contributer:1}:null,function(response){but_google.revert(),but_close.show(),INSTANCE.dispatchEvent("response"),1==response.success&&VectorStock.goToURL(response.url)})}function signupWithFacebook(){but_facebook.setLoading("Connecting…",!0),but_close.hide(),INSTANCE.dispatchEvent("processing"),$.get("/api/json/fblogin",is_contributor?{contributer:1}:null,function(response){but_facebook.revert(),but_close.show(),INSTANCE.dispatchEvent("response"),1==response.success&&VectorStock.goToURL(response.url)})}function close(){INSTANCE.dispatchEvent("close")}return INSTANCE.show=function(is_instant){container.show(),is_instant?container.addClass("reveal"):setTimeout(function(){container.addClass("reveal")},100)},INSTANCE.hide=function(){container.hide().removeClass("reveal")},but_email=new VectorStock.FieldButton($('button[data-method="email"]',container)),but_google=new VectorStock.FieldButton($('button[data-method="google"]',container)),but_facebook=new VectorStock.FieldButton($('button[data-method="facebook"]',container)),but_close=$("> button",container),link_login=$(".footer p a",container),but_email.on("click",switchToSignup),but_google.on("click",signupWithGoogle),but_facebook.on("click",signupWithFacebook),but_close.on("click",close),link_login.on("click",switchToLogin),INSTANCE},ScreenSignup=function(container,is_contributor){var input_firstname,input_surname,input_email,input_password,radioboxes_account,area_company,input_company,input_billing,checkbox_terms,checkbox_mailinglist,fields_validate,but_submit,but_close,link_login,INSTANCE=new VSModule,REGEX_EMAIL=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,RESPONSE_FIRSTNAME_MISSING="First name is required",RESPONSE_FIRSTNAME_MINCHARS="First name needs at least 2 characters",RESPONSE_FIRSTNAME_INVALID="First name contains invalid characters",RESPONSE_SURNAME_MISSING="Surname is required",RESPONSE_SURNAME_MINCHARS="Surname needs at least 2 characters",RESPONSE_SURNAME_INVALID="Surname contains invalid characters",RESPONSE_EMAIL_INVALID="Enter a valid email",RESPONSE_EMAIL_REGISTERED="Address has already been registered",RESPONSE_PASSWORD_MINCHARS="Use at least 6 characters",RESPONSE_TERMS_NOT_AGREED="You must agree to our Terms to Signup",RESPONSE_UNKNOWN="Hmm. Unknown error sorry! Please contact our support staff who will help you create an account.",email_responses={};function checkEmailAddress(){var address_id=$.trim(input_email.value.toLowerCase());function showError(response){switch(response.error){case ScreenSignup.ERROR_EMAIL_INVALID:input_email.showError(RESPONSE_EMAIL_INVALID);break;case ScreenSignup.ERROR_EMAIL_REGISTERED:input_email.showError(RESPONSE_EMAIL_REGISTERED);break;default:alert(RESPONSE_UNKNOWN)}}address_id.match(REGEX_EMAIL)?email_responses[address_id]?showError(email_responses[address_id]):$.get("/api/signup/email/check",{email:address_id},function(response){var address_id_current=$.trim(input_email.value.toLowerCase());response.success||address_id!=address_id_current||showError(response),email_responses[address_id]=response}):input_email.showError(RESPONSE_EMAIL_INVALID)}function changeAccountType(type){var is_expanded=type==ScreenSignup.ACCOUNT_TYPE_COMPANY;area_company.toggle(is_expanded),setTimeout(function(){INSTANCE.dispatchEvent("expand",is_expanded)})}function validateFields(event){event.preventDefault();var firstname=$.trim(input_firstname.value);""==firstname?input_firstname.showError(RESPONSE_FIRSTNAME_MISSING):firstname.length<input_firstname.minlength&&input_firstname.showError(RESPONSE_FIRSTNAME_MINCHARS);var surname=$.trim(input_surname.value);""==surname?input_surname.showError(RESPONSE_SURNAME_MISSING):surname.length<input_surname.minlength&&input_surname.showError(RESPONSE_SURNAME_MINCHARS),(input_email.value||"").match(REGEX_EMAIL)||input_email.showError(RESPONSE_EMAIL_INVALID),input_password.value.length<input_password.minlength&&input_password.showError(RESPONSE_PASSWORD_MINCHARS),checkbox_terms.checked||checkbox_terms.showError(RESPONSE_TERMS_NOT_AGREED);for(var i=0,len=fields_validate.length;i<len;){if(fields_validate[i].hasError()){var field=fields_validate[i].name.toTitleCase();input_email.value;return VectorStock.track("send","event","Error (User)","Signup","Client: "+field),!1}i++}!function(){input_firstname.disable(),input_surname.disable(),input_email.disable(),input_password.disable(),checkbox_terms.disable(),checkbox_mailinglist.disable(),but_submit.setLoading("Processing…"),but_close.hide(),INSTANCE.dispatchEvent("processing");var params={firstname:input_firstname.value,surname:input_surname.value,email:input_email.value,password:input_password.value,mailinglist:checkbox_mailinglist.checked,contributor:is_contributor?1:0,json:1};radioboxes_account.value==ScreenSignup.ACCOUNT_TYPE_COMPANY&&(params.company=input_company.value,params.address=input_billing.value);$.post("/api/signup",params,function(response){input_email.value;if(response.success)INSTANCE.dispatchEvent("signup",params);else{input_firstname.enable(),input_surname.enable(),input_email.enable(),input_password.enable(),checkbox_terms.enable(),checkbox_mailinglist.enable(),but_submit.revert(),but_close.show();var error_label=response.error?response.error.toTitleCase().split("_").join(" "):JSON.stringify(response);switch(INSTANCE.dispatchEvent("response"),response.error){case ScreenSignup.ERROR_FIRSTNAME_MISSING:params.firstname.length>input_firstname.minlength?input_firstname.showError(RESPONSE_FIRSTNAME_INVALID):input_firstname.showError(RESPONSE_FIRSTNAME_MISSING),error_label+=" ("+params.firstname+")";break;case ScreenSignup.ERROR_SURNAME_MISSING:params.surname.length>input_surname.minlength?input_surname.showError(RESPONSE_SURNAME_INVALID):input_surname.showError(RESPONSE_SURNAME_MISSING),error_label+=" ("+params.surname+")";break;case ScreenSignup.ERROR_EMAIL_INVALID:input_email.showError(RESPONSE_EMAIL_INVALID),error_label+=" ("+params.email+")";break;case ScreenSignup.ERROR_EMAIL_REGISTERED:input_email.showError(RESPONSE_EMAIL_REGISTERED);break;case ScreenSignup.ERROR_PASSWORD_INVALID:input_password.showError(RESPONSE_PASSWORD_MINCHARS);break;default:alert(RESPONSE_UNKNOWN)}VectorStock.track("send","event","Error (User)","Signup","Server: "+error_label)}})}()}function show(){var is_expanded=radioboxes_account.value==ScreenSignup.ACCOUNT_TYPE_COMPANY;container.addClass("reveal"),INSTANCE.dispatchEvent("expand",is_expanded),""==input_firstname.value?input_firstname.focus():""==input_surname.value?input_surname.focus():""==input_email.value?input_email.focus():""==input_password.value&&input_password.focus()}function close(){INSTANCE.dispatchEvent("close")}function switchToLogin(event){INSTANCE.hide(),INSTANCE.dispatchEvent("screen_login"),event.preventDefault()}return INSTANCE.show=function(is_instant){container.show(),is_instant?show():setTimeout(show,100)},INSTANCE.hide=function(){container.hide().removeClass("reveal")},input_firstname=new VectorStock.FieldInput($('input[name="firstname"]',container)),input_surname=new VectorStock.FieldInput($('input[name="surname"]',container)),input_email=new VectorStock.FieldInput($('input[name="email"]',container)),input_password=new VectorStock.FieldInput($('input[name="password"]',container)),radioboxes_account=new VectorStock.FieldRadioboxes($('fieldset[data-field="type"] li',container)),area_company=$('[data-area="company"]',container),input_company=new VectorStock.FieldInput($('input[name="company"]',area_company)),input_billing=new VectorStock.FieldInput($('textarea[name="billing"]',area_company)),checkbox_terms=new VectorStock.FieldCheckbox($('input[name="terms"]',container)),checkbox_mailinglist=new VectorStock.FieldCheckbox($('input[name="mailinglist"]',container)),but_submit=new VectorStock.FieldButton($('.footer button[type="submit"]',container)),but_close=$("> button",container),link_login=$(".footer p a",container),fields_validate=[input_firstname,input_surname,input_email,input_password,checkbox_terms],input_email.on("change",checkEmailAddress),radioboxes_account.on("change",changeAccountType),but_submit.on("click",validateFields),but_close.on("click",close),link_login.on("click",switchToLogin),input_email.value&&checkEmailAddress(),INSTANCE};ScreenSignup.ACCOUNT_TYPE_INDIVIDUAL="Individual",ScreenSignup.ACCOUNT_TYPE_COMPANY="Company",ScreenSignup.ERROR_FIRSTNAME_MISSING="FIRSTNAME_MISSING",ScreenSignup.ERROR_FIRSTNAME_MINCHARS="FIRSTNAME_MINCHARS",ScreenSignup.ERROR_SURNAME_MISSING="SURNAME_MISSING",ScreenSignup.ERROR_SURNAME_MINCHARS="SURNAME_MINCHARS",ScreenSignup.ERROR_EMAIL_INVALID="EMAIL_INVALID",ScreenSignup.ERROR_EMAIL_REGISTERED="EMAIL_REGISTERED",ScreenSignup.ERROR_PASSWORD_INVALID="PASSWORD_INVALID";var ScreenLogin=function(container){var input_username,input_password,but_login,but_google,but_facebook,but_close,link_select,INSTANCE=new VSModule,RESPONSE_USERNAME_INVALID="Enter a valid username or email",RESPONSE_PASSWORD_INVALID="Use at least 6 characters",RESPONSE_UNKNOWN="Hmm. Unknown error sorry! Please contact our support staff who will help you further.",credentials_changed=!1;function onFieldChange(){credentials_changed=!0}function validateFields(event){return event.preventDefault(),input_username.value.length<4?(input_username.showError(RESPONSE_USERNAME_INVALID),!1):input_password.value.length<6?(input_password.showError(RESPONSE_PASSWORD_INVALID),!1):credentials_changed?void function(){input_username.disable(),input_password.disable(),but_login.setLoading("Logging in…"),but_close.hide(),credentials_changed=!1,INSTANCE.dispatchEvent("processing");var params={login_user:input_username.value,login_password:input_password.value,login_remember:1};$.post("/api/json/login",params,function(response){if(response.success)window.location.reload();else{if(input_username.enable(),input_password.enable(),but_login.revert(),but_close.show(),INSTANCE.dispatchEvent("response"),!response)return void VectorStock.track("send","event","Error (JS)","CustomError: Login issue (No Server Response)",JSON.stringify({user:params.login_user}));switch(response.error){case ScreenLogin.ERROR_FAILED:case ScreenLogin.ERROR_NOTFOUND:input_username.showError(response.message),input_password.showError(response.message);break;case ScreenLogin.ERROR_LOCKED:case ScreenLogin.ERROR_DISABLED:case ScreenLogin.ERROR_FACEBOOK:input_username.showError(response.message);break;default:(response=response||{}).user=params.login_user,VectorStock.track("send","event","Error (JS)","CustomError: Login issue (Unknown Error)",JSON.stringify(response)),alert(RESPONSE_UNKNOWN)}}})}():(console.log("credentials havent changed"),!1)}function googleLogin(){but_google.setLoading("Connecting…",!0),$.get("/api/google/auth",function(response){1==response.success&&(but_google.revert(),VectorStock.userData.destroy(),window.location.href=response.url)})}function facebookLogin(){but_facebook.setLoading("Connecting…",!0),$.post("/api/json/fblogin",function(response){1==response.success&&(but_facebook.revert(),VectorStock.userData.destroy(),window.location.href=response.url)})}function show(){container.addClass("reveal"),""==input_username.value?input_username.focus():""==input_password.value&&input_password.focus()}function close(){INSTANCE.dispatchEvent("close")}function switchToSelect(event){INSTANCE.hide(),INSTANCE.dispatchEvent("screen_select"),event.preventDefault()}return INSTANCE.show=function(is_instant){container.show(),is_instant?show():setTimeout(show,100)},INSTANCE.hide=function(){container.hide().removeClass("reveal")},input_username=new VectorStock.FieldInput($('form input[name="username"]',container)),input_password=new VectorStock.FieldInput($('form input[name="password"]',container)),but_login=new VectorStock.FieldButton($('form button[type="submit"]',container)),but_google=new VectorStock.FieldButton($('.footer button[data-method="google"]',container)),but_facebook=new VectorStock.FieldButton($('.footer button[data-method="facebook"]',container)),but_close=$("> button",container),link_select=$(".footer p a",container),input_username.on("update",onFieldChange),input_password.on("update",onFieldChange),but_login.on("click",validateFields),but_google.on("click",googleLogin),but_facebook.on("click",facebookLogin),but_close.on("click",close),link_select.on("click",switchToSelect),INSTANCE};ScreenLogin.ERROR_FAILED="FAILED",ScreenLogin.ERROR_LOCKED="LOCKED",ScreenLogin.ERROR_NOTFOUND="NOT_FOUND",ScreenLogin.ERROR_DISABLED="DISABLED",ScreenLogin.ERROR_FACEBOOK="FACEBOOK";var ScreenLicenses=function(container){var header,INSTANCE=new VSModule;function onNextScreen(){INSTANCE.dispatchEvent("screen_next")}return INSTANCE.setName=function(name){var copy=header.text().replace(/{NAME}/i,name.toTitleCase());header.text(copy)},INSTANCE.show=function(){container.show(),setTimeout(function(){container.addClass("reveal")},100)},INSTANCE.hide=function(){container.hide().removeClass("reveal")},header=$("h1",container),$(".footer button",container).on("click",onNextScreen),INSTANCE},ScreenPricing=function(container){var INSTANCE=new VSModule;function onNextScreen(){INSTANCE.dispatchEvent("screen_next")}return INSTANCE.show=function(){container.show(),setTimeout(function(){container.addClass("reveal")},100)},INSTANCE.hide=function(){container.hide().removeClass("reveal")},$(".footer button",container).on("click",onNextScreen),INSTANCE},SignupBox=function(is_contributor,selected_screen){var overlay,container,sidebar,sb_screens,sb_background_2,screens,screen_select,screen_signup,screen_login,screen_licenses,screen_pricing,html_template,INSTANCE=new VSModule;$("html").hasClass("mobile");function onClickOverlay(event){$(event.target)[0]==overlay[0]&&INSTANCE.close()}function onLogin(){INSTANCE.dispatchEvent("login")}function expandBox(is_expanded){container.toggleClass("expanded",is_expanded)}function disableOverlay(){overlay.off("click",onClickOverlay)}function enableOverlay(){overlay.on("click",onClickOverlay)}function showSelect(is_instant){sb_screens.hide().filter("[data-type=default]").show(),screen_select.show(is_instant)}function showSignup(is_instant){screen_signup.show(is_instant)}function showLogin(is_instant){expandBox(!1),screen_login.show(is_instant)}function onSignup(params){is_contributor?VectorStock.goToURL("/account/sell-vectors"):goToPurchase()}function showPricing(){screen_licenses.hide(),screen_pricing.show(),sb_background_2.addClass("reveal")}function goToPurchase(){var url="/purchase",vector_id=$("#vector_id").val();if(vector_id){var vector_license=$('input[name="license"]:checked').val(),vector_payment=$('input[name="payment_'+vector_license+'"]:checked').val();"credits"!=vector_payment&&"subscription"!=vector_payment||(url+="/"+vector_payment),url+="?id="+vector_id,vector_license&&(url+="&license="+vector_license)}VectorStock.goToURL(url)}return INSTANCE.close=function(){container&&container.remove(),overlay.remove(),SignupBox.instance=null,INSTANCE.dispatchEvent("close")},INSTANCE.showLoginScreen=function(){sb_screens.hide().filter("[data-type=login]").show(),$("> .screen",screens).hide(),showLogin(!0)},overlay=$('<div class="overlay" />').css({height:$(document).height()}).appendTo("body").on("click",onClickOverlay),setTimeout(function(){overlay.addClass("reveal")}),html_template=SignupBox.template,container=$(html_template).appendTo(overlay),sidebar=$(".sb-sidebar",container),sb_screens=$(".sb-screen",sidebar),$('.sb-background [data-pattern="1"]',sidebar),sb_background_2=$('.sb-background [data-pattern="2"]',sidebar),screens=$(".sb-screens",container),screen_select=new ScreenSelect($('[data-screen="select"]',screens),is_contributor),screen_signup=new ScreenSignup($('[data-screen="signup"]',screens),is_contributor),screen_login=new ScreenLogin($('[data-screen="login"]',screens)),screen_licenses=new ScreenLicenses($('[data-screen="licenses"]',screens)),screen_pricing=new ScreenPricing($('[data-screen="pricing"]',screens)),function(){var date_starts=new Date(Date.UTC(2017,10,28,11,0,0));date_ends=new Date(Date.UTC(2017,11,1,23,0,0)),time_now=(new Date).getTime(),promo_active=time_now>date_starts.getTime()&&time_now<date_ends.getTime();var area_promo=$(".sb-features .promo",sb_screens),area_countdown=$("p em",area_promo);if(promo_active){function promoCountdown(){var time_remaining=date_ends.getTime()-(new Date).getTime(),days=Math.floor(time_remaining/MS_DAY),hours=Math.floor((time_remaining-days*MS_DAY)/MS_HOUR),minutes=Math.floor((time_remaining-(days*MS_DAY+hours*MS_HOUR))/MS_MINUTE),seconds=Math.floor((time_remaining-(days*MS_DAY+hours*MS_HOUR+minutes*MS_MINUTE))/MS_SECOND),display=[];days&&display.push(days+" day"+(1==days?"":"s")),hours&&display.push(hours+" hour"+(1==hours?"":"s")),minutes&&display.push(minutes+" minute"+(1==minutes?"":"s")),seconds&&display.push(seconds+" second"+(1==seconds?"":"s")),area_countdown.text(display.join(", "))}setInterval(promoCountdown,1e3),promoCountdown()}else area_promo.remove()}(),screen_select.on("processing",disableOverlay).on("response",enableOverlay).on("screen_signup",showSignup).on("close",INSTANCE.close).on("screen_login",showLogin),screen_signup.on("expand",expandBox).on("processing",disableOverlay).on("response",enableOverlay).on("close",INSTANCE.close).on("signup",onSignup).on("screen_login",showLogin),screen_login.on("processing",disableOverlay).on("login",onLogin).on("response",enableOverlay).on("close",INSTANCE.close).on("screen_select",showSelect),screen_licenses.on("screen_next",showPricing),screen_pricing.on("screen_next",goToPurchase),"login"==selected_screen?(sb_screens.hide().filter("[data-type=login]").show(),showLogin(!0)):showSelect(!0),setTimeout(function(){container.addClass("reveal")}),"absolute"==container.css("position")&&VectorStock.scrollTo(0),VectorStock.track("send","event","CTR: Signup Popup","Initiated"),EventTracker.store("ctr_signup_popup","initiated",!0),SignupBox.instance=INSTANCE};SignupBox.TIME_EXPIRE=9e5,SignupBox.template='<div id="box-signup" class="overlay-box"><div class="sb-sidebar"><div class="sb-screen" data-type="default" style="display:block;"><div class="sb-content"><h1>VectorStock</h1><div class="sb-features" data-type="signup"><div class="promo"><p><strong>Cyber Monday deal extended!</strong><br>Signup now and get double the credits. 2 for 1 deal ends in: <em>2 days, 24 hours, 23 minutes, 23 seconds</em></p></div><h2 data-type="signup">Create your <strong>Free Account</strong> for access to:</h2><h2 data-type="login">Login for access to:</h2><ul><li>170,000 Free Vectors</li><li>Millions of Royalty-Free Images</li><li>10,000+ new images added daily</li></ul></div><div class="sb-customers"><h3>Some of our customers —</h3><ul><li class="co-disney">Disney</li><li class="co-oracle">Oracle</li><li class="co-nike">Nike</li><li class="co-warner">Warner Brothers</li></ul></div></div><div class="sb-background"><div class="bg" data-pattern="1"></div><div class="bg" data-pattern="2"></div></div></div><div class="sb-screen" data-type="login"><div class="sb-content"><h1>VectorStock</h1><div class="sb-features"><p><strong>Whoops - it seems that you’re <br>not logged in.</strong></p><p>Login to continue…</p></div></div><div class="sb-background"><div class="bg reveal" data-pattern="1"></div></div></div></div><div class="sb-screens"><div class="screen" data-screen="select"><div class="header"><h1>Select Signup Method</h1><button type="button" data-method="email"><span class="label">Email Address</span><span class="icon"><span></span></span></button><button type="button" data-method="google"><span class="label">Google</span><span class="icon"><span></span></span></button><button type="button" data-method="facebook"><span class="label">Facebook</span><span class="icon"><span></span></span></button></div><div class="footer"><p>Already have an account? <a href="/">Log in</a></p></div><button data-action="close" type="button">Close</button></div><div class="screen" data-screen="signup"><form action="/signup" method="POST" novalidate><div class="header"><h1>Enter your details</h1><div class="fields"><div class="fieldgroup"><fieldset data-field="firstname"><input type="text" name="firstname" minlength="2" maxlength="45" placeholder="First name" autocomplete="on" tabindex="1001" /></fieldset><fieldset data-field="surname"><input type="text" name="surname" minlength="2" maxlength="45" placeholder="Surname" autocomplete="on" tabindex="1002" /></fieldset></div><fieldset data-field="email"><input type="email" name="email" maxlength="100" autocomplete="on" autocorrect="off" autocapitalize="off" placeholder="Email address" tabindex="1003" /></fieldset><fieldset data-field="password"><input type="password" name="password" minlength="6" maxlength="20" placeholder="Password" tabindex="1004"></fieldset><fieldset data-field="type"><h6>Account Type</h6><ul><li class="checked"><label for="f_type_individual"><span class="radio"><span></span><input type="radio" id="f_type_individual" name="account_type" value="Individual" checked="checked" tabindex="1005"></span><span class="title">Individual</span></label></li><li><label for="f_type_company"><span class="radio"><span></span><input type="radio" id="f_type_company" name="account_type" value="Company" tabindex="1006"></span><span class="title">Company</span></label></li></ul></fieldset><div data-area="company"><fieldset data-field="company"><input type="text" name="company" autocomplete="on" autocorrect="off" autocapitalize="off" placeholder="Company name" tabindex="1007"></fieldset><fieldset data-field="billing"><textarea name="billing" placeholder="Billing address" tabindex="1008"></textarea></fieldset></div></div><div class="agreements"><ul><li><label for="f_terms" class="checked"><span class="checkbox"><input type="checkbox" id="f_terms" name="terms" value="1" checked="checked" tabindex="1009" /></span><span class="title">Agree to our <a href="/faq/members/membership-agreement" target="_blank">Terms of Use</a> and <a href="/faq/members/privacy-policy" target="_blank">Privacy&nbsp;Policy</a></span></label></li><li><label for="f_mailinglist" class="checked"><span class="checkbox"><input type="checkbox" id="f_mailinglist" name="mailinglist" value="1" checked="checked" tabindex="1010" /></span><span class="title">Signup to the VectorStock mailing&nbsp;list</span></label></li></ul></div></div><div class="footer"><button type="submit" tabindex="1011"><span class="label">Create Account</span><span class="icon"><span></span></span></button><p>Already have an account? <a href="/">Log in</a></p></div></form><button data-action="close" type="button">Close</button></div><div class="screen" data-screen="login"><form action="/login" method="POST" novalidate><h1>Login<span class="full"> to your account</span></h1><div class="fields"><fieldset data-field="username"><input type="text" name="username" autocomplete="on" autocorrect="off" autocapitalize="off" maxlength="100" placeholder="Username or Email" tabindex="1001" /></fieldset><fieldset data-field="password"><input type="password" name="password" maxlength="20" placeholder="Password" tabindex="1002"></fieldset></div><button type="submit" tabindex="1003"><span class="label">Login</span><span class="icon"><span></span></span></button><p><a href="/request/password">Forgot your password?</a></p></form><div class="footer"><h1>Or login with:</h1><div class="options"><button type="button" data-method="google" tabindex="1004"><span class="label">Google</span><span class="icon"><span></span></span></button><button type="button" data-method="facebook" tabindex="1005"><span class="label">Facebook</span><span class="icon"><span></span></span></button></div><p>New to VectorStock? <a href="/signup">Sign up for&nbsp;free!</a></p></div><button data-action="close" type="button">Close</button></div><div class="screen" data-screen="licenses"><h1>Welcome {NAME}!</h1><h2>Our images are available in 3 licenses:</h2><table cellpadding="0" cellspacing="0" border="0"><tbody><tr><td class="title">Free</td><td>For personal use</td></tr><tr><td class="title">Standard</td><td>For print, advertising, design etc.</td></tr><tr><td class="title">Expanded</td><td>For resale &amp; distribution</td></tr></tbody></table><div class="footer"><button type="button"><span class="label">Continue…</span><span class="icon"><span></span></span></button></div></div><div class="screen" data-screen="pricing"><h1>Image Pricing</h1><h2>You can buy images using:<br><strong>Monthly Subscription</strong> (best price) or<br><strong>Pre-paid Credits</strong> (use anytime).</h2><table cellpadding="0" cellspacing="0" border="0"><thead><tr><th></th><th title="Free License">Free</th><th title="Standard License">Standard</th><th title="Expanded License">Expanded</th></tr></thead><tbody><tr><td class="title">Subscription</td><td><sup>$</sup>0</td><td><small>From</small> 69<sub>¢</sub></td><td class="disabled" title="Not Available">N/A</td></tr><tr><td class="title">Credits</td><td><sup>$</sup>0</td><td><small>From</small> <sup>$</sup>1</td><td><sup>$</sup>25</td></tr></tbody></table><div class="footer"><button type="button"><span class="label">Get Started!</span><span class="icon"><span></span></span></button></div></div></div></div>',SignupBox.instance=null,SignupBox.extendSession=function(){$.getJSON("/api/loggedincheck").done(function(response){if(response.success)setTimeout(SignupBox.extendSession,SignupBox.TIME_EXPIRE);else if(SignupBox.instance)SignupBox.instance.showLoginScreen();else new SignupBox(!1,"login")}).fail(function(event){setTimeout(SignupBox.extendSession,1e4)})},$(function(){function launchSignupBox(url){for(var params=1<(url=url.split("?")).length?url[1].toLowerCase().split("&"):[],is_contributor=!1,i=params.length;i--;){var parts=params[i].split("="),key=parts[0],value=1<parts.length?parts[1]:"";if("contributor"==key&&0!==value){is_contributor=!0;break}}new SignupBox(is_contributor)}"/signup"!==window.location.pathname.toLowerCase()&&($('a[href^="/signup"]').on("click",function(event){launchSignupBox($(this).attr("href")),event.preventDefault()}),$(window).on("redirect",function(event,url,path){"/signup"==path&&(launchSignupBox(url),event.preventDefault?event.preventDefault():event.isDefaultPrevented=function(){return!0})})),0<=window.location.search.search(/login=1/i)&&new SignupBox(!1,"login"),0<=window.location.search.search(/signup=1/i)&&new SignupBox});var GalleryBox=function(){var image_list,image_tally,image_id,image_title,image_artist,overlay,container,screens,imageset,header,hd_browse,hd_create,gl_list,INSTANCE=new VSModule;$.isArray(arguments[0])?(image_list=arguments[0],image_tally=arguments[1]||image_list.length,is_cart=arguments[2]||!1):(image_id=arguments[0],image_title=arguments[1],image_artist=arguments[2]);$("html").hasClass("mobile");function addImage(image_id,image_title){var figure;figure=$("<figure />").appendTo(imageset),$('<img width="238" height="250">').attr("src",VectorStock.imagePath(image_id,image_title,"medium")).attr("alt",image_title||"").appendTo(figure),$('<span class="inner" />').appendTo(figure)}function populate(galleries){hd_browse.on("filter",filterGalleries),hd_browse.setTotal(galleries.length),gl_list.populate(galleries);var search=hd_browse.getSearch();search&&filterGalleries(search)}function onClickOverlay(event){$(event.target)[0]==overlay[0]&&INSTANCE.close()}function onListUpdate(num_matches){hd_browse.setTotal(num_matches)}function filterGalleries(search){gl_list.filter(search)}function changeHeader(type,search_input){type==GalleryBox.HeaderCreate?(hd_browse.hide(),search_input&&hd_create.setName(search_input),hd_create.show(),gl_list.hide()):type==GalleryBox.HeaderBrowse&&(hd_browse.show(),hd_create.hide(),gl_list.show())}function changeHeaderCreate(gallery_name){gallery_name&&hd_create.setName(gallery_name),changeHeader(GalleryBox.HeaderCreate)}function createGallery(gallery_name,gallery_private){if(image_list){var hd_created=new GalleryBox.HeaderCreated(header,gallery_name,image_list,image_tally);hd_create.hide(),hd_created.show();var onGalleryCreated=function(response){response.success&&(VectorStock.setTally("galleries",response.galleries),VectorStock.userData.refresh(),INSTANCE.dispatchEvent("gallery_created",[response.id,gallery_name,gallery_private]))};is_cart?$.post("/api/cart/addtogallery",{name:gallery_name,private:gallery_private},"json").done(onGalleryCreated):$.post("/api/galleries",{name:gallery_name,private:gallery_private},"json").done(onGalleryCreated)}else gl_list.createGallery(gallery_name,gallery_private),changeHeader(GalleryBox.HeaderBrowse)}function cancelCreate(){image_list&&INSTANCE.close()}return INSTANCE.close=function(){container&&container.remove(),overlay.remove(),$("body").removeClass("pagelock"),INSTANCE.dispatchEvent("close")},overlay=$('<div class="overlay" />').css({height:$(document).height()}).appendTo("body").on("click",onClickOverlay).on("mousewheel",function(e){}),setTimeout(function(){overlay.addClass("reveal")}),function(html_template){var sidebar,sb_content,sb_background,screen,gl_pane;if(container=$(html_template).appendTo(overlay),sidebar=$(".gb-sidebar",container),sb_screen=$(".gb-screen",sidebar).show(),sb_content=$(".gb-content",sb_screen),sb_background=$(".gb-background",sb_screen),imageset=$(".imageset",sb_content),screens=$(".gb-screens",container),screen=$(".gb-screen",screens).show(),header=$(".header",screen),hd_browse=new GalleryBox.HeaderBrowse($(".header_browse",header),!image_list),hd_create=new GalleryBox.HeaderCreate($(".header_create",header),!!image_list),gl_pane=$(".panel",screen),gl_list=image_list?new GalleryBox.List($(".pane",gl_pane),image_list):new GalleryBox.List($(".pane",gl_pane),image_id,image_title),but_close=$('button[data-action="close"]',screen),image_list)if(imageset.attr("data-images",image_list.length),0<image_tally){for(var i=Math.min(5,image_list.length);i--;)addImage(image_list[i].id,image_list[i].title);$("<h1 />").text("Cart Images ("+image_tally+")").appendTo(sb_content)}else sb_content.empty(),sb_background.addClass("empty");else imageset.attr("data-images",1),addImage(image_id,image_title),$("<h1 />").text(image_title+" vector image").appendTo(sb_content),image_artist&&$("<h2 />").text("by "+image_artist).appendTo(sb_content),(new Image).src=VectorStock.imagePath(image_id,image_title,"small");hd_browse.on("change_header",changeHeader),hd_create.on("change_header",changeHeader).on("create_gallery",createGallery).on("cancel",cancelCreate),gl_list.on("new_gallery",changeHeaderCreate).on("update",onListUpdate),but_close.on("click",INSTANCE.close),image_list?hd_create.show():(hd_browse.show(),gl_list.show()),setTimeout(function(){container.addClass("reveal")})}(GalleryBox.template),GalleryBox.galleries?populate(GalleryBox.galleries):$.get("/api/galleries/byname").done(function(response){GalleryBox.galleries=response,populate(GalleryBox.galleries)}).fail(function(event){401==event.status&&INSTANCE.close()}),INSTANCE};GalleryBox.template='<div id="box-gallery" class="overlay-box"><div class="gb-sidebar"><div class="gb-screen" data-screen="image"><div class="gb-content"><div class="imageset" data-images="1"></div></div><div class="gb-background"></div></div></div><div class="gb-screens"><div class="gb-screen" data-screen="list"><div class="header"><div class="header_browse"><h1><span class="short">Galleries</span><span class="long">Add to Gallery</span> <data>(0)</data></h1><div class="fieldgroup"><fieldset data-field="filter"><span class="icon"></span><input type="text" name="gallery_search" placeholder="Search gallery names…" autocomplete="off" tabindex="1"></fieldset><button type="button" data-action="create" tabindex="2"><span class="icon"></span><span class="label">New</span></button></div></div><div class="header_create"><h1>New Gallery</h1><div class="fieldgroup"><fieldset data-field="gallery_name"><input type="text" name="gallery_name" placeholder="Enter name…" autocomplete="off" tabindex="1"></fieldset><label for="gallery_new_private"><span class="checkbox"><input type="checkbox" id="gallery_new_private" name="gallery_new_private"></span><span class="title">Private</span></label></div><button type="button" data-action="cancel" tabindex="2"><span class="label">Cancel</span></button><button type="button" data-action="create" tabindex="3"><span class="label">Create</span></button></div></div><div class="panel"><div class="pane"><div class="state"></div><ul></ul></div></div><button data-action="close" type="button">Close</button></div></div></div>',GalleryBox.galleries=null,GalleryBox.HeaderBrowse=function(container,is_showing){var header,header_tally,input_search,but_create,INSTANCE=new VSModule;function filterGalleries(){var value=$.trim(input_search.value);INSTANCE.dispatchEvent("filter",[value])}function createNewGallery(){INSTANCE.dispatchEvent("change_header",[GalleryBox.HeaderCreate,input_search.value])}return INSTANCE.show=function(){return container.show(),header.css({height:container.outerHeight()}),setTimeout(function(){container.addClass("reveal"),input_search.focus()}),INSTANCE},INSTANCE.hide=function(){return container.hide().removeClass("reveal"),input_search.setValue(),INSTANCE},INSTANCE.setTotal=function(total){return header_tally.show().text("("+total+")"),INSTANCE},INSTANCE.getSearch=function(){return $.trim(input_search.value)},header=container.parent(),header_tally=$("h1 data",container),input_search=new VectorStock.FieldInput($('input[name="gallery_search"]',container),VectorStock.FieldInput.FORMAT_ALPHANUMERIC),but_create=new VectorStock.FieldButton($('button[data-action="create"]',container)),input_search.on("update",filterGalleries),but_create.on("click",createNewGallery),is_showing&&container.show().addClass("reveal"),INSTANCE},GalleryBox.HeaderCreate=function(container,is_showing){var header,input_name,cbox_private,but_cancel,but_create,INSTANCE=new VSModule;function onNameUpdate(value){value?but_create.enable():but_create.disable()}function onCancel(){INSTANCE.dispatchEvent("cancel"),INSTANCE.dispatchEvent("change_header",[GalleryBox.HeaderBrowse])}function onNewGallery(){var gallery_name=$.trim(input_name.value);gallery_name?(input_name.setValue("",!0),INSTANCE.dispatchEvent("create_gallery",[gallery_name,cbox_private.checked])):(but_create.disable(),input_name.focus())}return INSTANCE.show=function(){return container.show(),header.css({height:container.outerHeight()}),setTimeout(function(){container.addClass("reveal"),input_name.focus()}),INSTANCE},INSTANCE.hide=function(){return container.hide().removeClass("reveal"),INSTANCE},INSTANCE.setName=function(gallery_name){input_name.setValue(gallery_name)},header=container.parent(),input_name=new VectorStock.FieldInput($('input[name="gallery_name"]',container),VectorStock.FieldInput.FORMAT_ALPHANUMERIC),cbox_private=new VectorStock.FieldCheckbox($('input[name="gallery_new_private"]',container)),but_cancel=new VectorStock.FieldButton($('button[data-action="cancel"]',container)),but_create=new VectorStock.FieldButton($('button[data-action="create"]',container)),input_name.on("update",onNameUpdate).on("return",onNewGallery),but_cancel.on("click",onCancel),but_create.on("click",onNewGallery),is_showing&&container.show().addClass("reveal"),INSTANCE},GalleryBox.HeaderCreated=function(header,gallery_name,gallery_images,gallery_tally){var container,gallery_imageset,INSTANCE=new VSModule;return INSTANCE.show=function(){return container.show(),header.css({height:""}),setTimeout(function(){container.addClass("reveal")}),INSTANCE},INSTANCE.hide=function(){return container.hide().removeClass("reveal"),INSTANCE},function(){var gallery_entry,gallery_imagewrap,image_index,image_id,image_title,src,figure;container=$('<div class="header_created" />').appendTo(header),$("<h1>Gallery created!</h1>").appendTo(container),gallery_entry=$('<div class="gallery" />').appendTo(container),$('<span class="title">'+gallery_name+"</span>").appendTo(gallery_entry),$('<span class="subtitle">'+gallery_tally+" Image"+(1==gallery_tally?"":"s")+"</span>").appendTo(gallery_entry),gallery_imagewrap=$('<span class="images">').appendTo(gallery_entry),gallery_imageset=$('<span class="set">').appendTo(gallery_imagewrap);for(var i=0;i<gallery_images.length;i++)image_id=gallery_images[image_index=i].id,image_title=gallery_images[i].title,figure=void 0,src="url("+VectorStock.imagePath(image_id,image_title,"small")+")",figure=$('<figure data-index="'+image_index+'" data-image="'+image_id+'" />'),$("<span />").css({backgroundImage:src}).appendTo(figure),figure.appendTo(gallery_imageset)}(),INSTANCE},GalleryBox.List=function(){var image_list,image_id,image_title,INSTANCE=new VSModule,container=arguments[0];$.isArray(arguments[1])?image_list=arguments[1]:(image_id=arguments[1],image_title=arguments[2]);var state,list,state_load,state_empty,state_none,temp_id=1e9,gallery_items=[];function updateGalleryLastModified(gallery_id){for(var i=0;i<GalleryBox.galleries.length;i++)if(GalleryBox.galleries[i].id===gallery_id){var gallery_entry=GalleryBox.galleries.splice(i,1);GalleryBox.galleries.unshift(gallery_entry[0]);break}}function createGalleryItem(gallery_id,gallery_name,gallery_private,gallery_images,gallery_checked){var item=new GalleryBox.ListItem(gallery_id,gallery_name,gallery_private,gallery_images,gallery_checked);item.getElement();return item.on("check",function(){image_list?item.addImages(image_list):item.addImage(image_id,image_title),function(gallery_id){image_id?($.put("/api/galleries/"+gallery_id+"/"+image_id,"json"),VectorStock.userData.addToGallery(image_id,gallery_id),VectorStock.track("send","event","Add To Gallery","Image",JSON.stringify({image:image_id,gallery:gallery_id}))):$.put("/api/galleries/"+gallery_id+"/cart",function(response){VectorStock.userData.refresh()},"json");updateGalleryLastModified(gallery_id)}(gallery_id),INSTANCE.dispatchEvent("image_added",[gallery_id])}).on("uncheck",function(){image_list?item.removeImages(image_list):item.removeImage(image_id),function(gallery_id){image_id?($.delete("/api/galleries/"+gallery_id+"/"+image_id,"json"),VectorStock.userData.removeFromGallery(image_id,gallery_id)):$.delete("/api/galleries/"+gallery_id+"/cart",function(response){VectorStock.userData.refresh()},"json");updateGalleryLastModified(gallery_id)}(gallery_id),INSTANCE.dispatchEvent("image_removed",[gallery_id])}),item}function toggleScrolling(){var is_scrolling=list.outerHeight()>container.outerHeight();container.toggleClass("scrolling",is_scrolling)}return INSTANCE.populate=function(galleries){for(var i=0,len=galleries.length;i<len;i++){for(var is_checked=!1,j=galleries[i].contents.length;j--;)if(galleries[i].contents[j].id==image_id){is_checked=!0;break}var item=createGalleryItem(galleries[i].id,galleries[i].name,galleries[i].private,galleries[i].contents,is_checked);item.getElement().appendTo(list),gallery_items.push(item)}state.attr("data-state",0==len?"empty":""),toggleScrolling()},INSTANCE.filter=function(term){term;for(var i=gallery_items.length,count=0;i--;)count+=gallery_items[i].match(term);state.attr("data-state",0==count?"none":""),toggleScrolling(),INSTANCE.dispatchEvent("update",[count])},INSTANCE.createGallery=function(gallery_name,gallery_private){var gallery_id=temp_id++,gallery_ids=(gallery_private=Number(gallery_private),[]),gallery_images=[];if(image_list)for(var i=0;i<image_list.length;i++)gallery_ids.push(image_list[i].id),gallery_images.push({id:image_list[i].id,title:image_list[i].title});else gallery_ids.push({id:image_id,title:image_title}),gallery_images.push({id:image_id,title:image_title});var gallery_entry={id:gallery_id,public:!gallery_private,name:gallery_name,contents:gallery_images},item=createGalleryItem(gallery_id,gallery_name,gallery_private,gallery_images,!0),item_element=item.getElement().addClass("faded");GalleryBox.galleries.unshift(gallery_entry),item_element.prependTo(list),gallery_items.unshift(item),toggleScrolling(),setTimeout(function(){container.scrollTop(item_element[0].offsetTop),item_element.removeClass("faded")}),$.post("/api/galleries",{name:gallery_name,private:gallery_private,images:gallery_ids},"json").done(function(response){response.success&&(gallery_entry.id=response.id,item.updateId(response.id),VectorStock.setTally("galleries",response.galleries),VectorStock.userData.createGallery(response.id,gallery_name),VectorStock.userData.addToGallery(image_id,response.id))}),INSTANCE.dispatchEvent("update",[GalleryBox.galleries.length])},INSTANCE.show=function(){return container.show(),setTimeout(function(){container.addClass("reveal")}),INSTANCE},INSTANCE.hide=function(){return container.hide().removeClass("reveal"),INSTANCE},state=$(".state",container).attr("data-state","load"),(state_load=$('<div class="state_load" />').appendTo(state)).loadingIcon("small"),$("<p>Loading galleries…</p>").appendTo(state_load),state_empty=$('<div class="state_empty" />').appendTo(state),$("<p>No galleries exist yet</p>").appendTo(state_empty),state_none=$('<div class="state_none" />').appendTo(state),$("<p>No matches</p>").appendTo(state_none),list=$("ul",container),INSTANCE},GalleryBox.ListItem=function(gallery_id,gallery_name,gallery_private,gallery_images,gallery_checked){var item,label,cbox_wrap,cbox_input,cbox_field,item_title,item_subtitle,item_images,INSTANCE=new VSModule;function updateTitle(title){item_title.html(title)}function updateSubtitle(){item_subtitle.html(INSTANCE.images.length+" Image"+(1==INSTANCE.images?"":"s"))}function onChecked(checked){var event_type=checked?"check":"uncheck";INSTANCE.dispatchEvent(event_type,[INSTANCE.id])}return INSTANCE.id=gallery_id,INSTANCE.name=gallery_name,INSTANCE.private=gallery_private,INSTANCE.images=gallery_images,INSTANCE.checked=gallery_checked,INSTANCE.getElement=function(){return item},INSTANCE.updateId=function(gallery_id){INSTANCE.id=gallery_id,label.attr("for","in_gallery_"+INSTANCE.id),cbox_input.attr("id","in_gallery_"+INSTANCE.id)},INSTANCE.match=function(term){if(term){var regex=new RegExp("("+term+")","gi");if(INSTANCE.name.search(regex)<0)return item.hide(),!1;updateTitle(INSTANCE.name.replace(regex,"<em>$1</em>"))}else updateTitle(INSTANCE.name);return item.show(),!0},INSTANCE.addImage=function(image_id,image_title){item_images.addImage(image_id,image_title),updateSubtitle()},INSTANCE.addImages=function(image_list){for(var i=0;i<image_list.length;i++)item_images.addImage(image_list[i].id,image_list[i].title);updateSubtitle()},INSTANCE.removeImage=function(image_id,image_title){item_images.removeImage(image_id,image_title),updateSubtitle()},INSTANCE.removeImages=function(image_list){for(var i=0;i<image_list.length;i++)item_images.removeImage(image_list[i].id);updateSubtitle()},item=$('<li data-status="'+(INSTANCE.private?"private":"")+'" />'),label=$('<label for="in_gallery_'+INSTANCE.id+'">').appendTo(item),cbox_wrap=$('<span class="checkbox" />').appendTo(label),cbox_input=$('<input type="checkbox" id="in_gallery_'+INSTANCE.id+'">').appendTo(cbox_wrap),cbox_field=new VectorStock.FieldCheckbox(cbox_input),item_title=$('<span class="title" />').appendTo(label),item_subtitle=$('<span class="subtitle" />').appendTo(label),item_images=new GalleryBox.ListItemImages(label,INSTANCE.images),updateTitle(INSTANCE.name),updateSubtitle(),cbox_field.toggle(INSTANCE.checked),cbox_field.on("change",onChecked),INSTANCE},GalleryBox.ListItemImages=function(scope,images){var container,imageset,INSTANCE=new VSModule,MAX_IMAGES=3,image_lookup={};function createImage(image_id,image_title,image_index){image_index=image_index||0;var src="url("+VectorStock.imagePath(image_id,image_title,"small")+")",figure=$('<figure data-index="'+image_index+'" data-image="'+image_id+'" />'),num_images=($("<span />").css({backgroundImage:src}).appendTo(figure),imageset.children().length);return null==image_index||0==num_images||num_images<=image_index?figure.appendTo(imageset):imageset.children().eq(image_index).before(figure),image_lookup[image_id]=figure}return INSTANCE.addImage=function(image_id,image_title){images.push({id:image_id,title:image_title}),function(image_id,image_title,image_index,is_instant){var figure=createImage(image_id,image_title,image_index);is_instant||(figure.addClass("conceal"),setTimeout(function(){$("figure",imageset).each(function(index){$(this).attr("data-index",index)}),figure.removeClass("conceal")},10))}(image_id,image_title)},INSTANCE.removeImage=function(image_id){for(var index,i=images.length;i--;)if(images[i].id==image_id){index=i;break}void 0!==index&&(images.splice(index,1),function(image_id){var figure=image_lookup[image_id];figure&&(figure.addClass("conceal"),delete image_lookup[image_id],setTimeout(function(){$("figure",imageset).not(".conceal").each(function(index){$(this).attr("data-index",index)})}),setTimeout(function(){figure.remove()},550))}(image_id))},function(){container=$('<span class="images" />').appendTo(scope),imageset=$('<span class="set" />').appendTo(container);for(var range=images.length<=MAX_IMAGES?images.length:MAX_IMAGES,group=images.slice(images.length-range),i=range;i--;){var index=range-i-1;createImage(group[i].id,group[i].title,index)}}(),INSTANCE};var PaymentScreenPay=function(){var screen,image,total_cost,is_upgrade,INSTANCE=new VSModule;void 0!==arguments[1].id?(screen=arguments[0],image=arguments[1],total_cost=arguments[2],is_upgrade=arguments[3]):(screen=arguments[0],total_cost=arguments[1]);var pane,pane_content,page,area_contact,area_select,area_card,radioboxes_payment,input_card_number,icon_card,input_card_expiry,input_card_cvv,cbox_remember,input_email,cbox_billing,field_billing,input_billing,but_submit,but_submit_label,but_submit_icon,logged_in,user_id,payment,bt_token,bt_client,CARD_FORMATS={_default:/(.{1,4})/g,amex:/(.{1,4})(.{1,6})?(.{1,5})?/,dinersclub:/(.{1,4})(.{1,6})?(.{1,4})?/},CARD_ICONS=["amex","dinersclub","discover","jcb","mastercard","visa"],REGEX_EMAIL=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,RESPONSE_CARD_ATTEMPTS="Card declined after too many failed attempts",RESPONSE_CARD_DECLINED="Card declined",RESPONSE_SAVED_CARD_BAD="Stored card invalid, please use another card",RESPONSE_EMAIL_INVALID="Enter a valid email",RESPONSE_NUMBER_INVALID="Invalid card number",RESPONSE_NUMBER_DECLINED="Card declined",RESPONSE_EXPIRY_INVALID="Invalid expiry date",RESPONSE_EXPIRY_EXPIRED="Card has expired",RESPONSE_CVV_INVALID="Invalid CVV number",tracking_event="Purchase (Single Image)";function refreshHeight(){pane_content.outerHeight()>pane.outerHeight()?pane.addClass("scrolling"):pane.removeClass("scrolling")}function onPaymentSelect(type){page.attr("data-payment",type),refreshHeight(),type==PaymentScreenPay.CARD_ADDITIONAL&&(pane.scrollTop(pane_content.height()-pane.height()),input_card_number.focus())}function toggleFieldAddress(){cbox_billing.checked?(field_billing.show(),input_billing.focus()):field_billing.hide(),refreshHeight()}function onNumberUpdate(number){function hideCardIcon(){icon_card.removeClass("reveal"),setTimeout(function(){icon_card.attr("class","card")},200)}var type=$.payment.cardType(number);type?0<=CARD_ICONS.indexOf(type)?function(type){icon_card.attr("class","card reveal "+type)}(type):hideCardIcon():icon_card.hasClass("reveal")&&hideCardIcon()}function onSubmit(event){input_card_number.clearError(),input_card_expiry.clearError(),input_card_cvv.clearError(),input_email.clearError();var errors_firstfield,payment_type=radioboxes_payment.value||null,errors=!1,errors_offset=9999,tracking_user=user_id?"Account ("+user_id+")":"Email ("+input_email.value+")",tracking_cost=Math.round(total_cost);if(payment_type!==PaymentScreenPay.CARD_SAVED){logged_in||input_email.value.match(REGEX_EMAIL)||(input_email.showError(RESPONSE_EMAIL_INVALID),errors=!0,errors_offset=Math.min(errors_offset,input_email.input.offset().top-pane_content.offset().top),errors_firstfield=errors_firstfield||input_email,VectorStock.track("send","event","Error (User)",tracking_event,"Client: Email ("+input_email.value+")",tracking_cost));var card={number:input_card_number.value,expiry:$.payment.cardExpiryVal(input_card_expiry.value),cvv:input_card_cvv.value};$.payment.validateCardNumber(card.number)||(input_card_number.showError(RESPONSE_NUMBER_INVALID),errors=!0,errors_offset=Math.min(errors_offset,input_card_number.input.offset().top-pane_content.offset().top),errors_firstfield=errors_firstfield||input_card_number,VectorStock.track("send","event","Error (User)",tracking_event,"Client: Number ("+input_card_number.value+"), "+tracking_user,tracking_cost)),$.payment.validateCardExpiry(card.expiry.month,card.expiry.year)||(input_card_expiry.showError(RESPONSE_EXPIRY_INVALID),errors=!0,errors_offset=Math.min(errors_offset,input_card_expiry.input.offset().top-pane_content.offset().top),errors_firstfield=errors_firstfield||input_card_expiry,VectorStock.track("send","event","Error (User)",tracking_event,"Client: Expiry ("+input_card_expiry.value+"), "+tracking_user,tracking_cost)),$.payment.validateCardCVC(card.cvv)||(input_card_cvv.showError(RESPONSE_CVV_INVALID),errors=!0,errors_offset=Math.min(errors_offset,input_card_cvv.input.offset().top-pane_content.offset().top),errors_firstfield=errors_firstfield||input_card_cvv,VectorStock.track("send","event","Error (User)",tracking_event,"Client: CVV ("+input_card_cvv.value+"), "+tracking_user,tracking_cost))}errors?(pane.scrollTop(errors_offset),errors_firstfield.focus()):(radioboxes_payment.disable(),input_email.disable(),cbox_billing.disable(),input_billing.disable(),input_card_number.disable(),input_card_expiry.disable(),input_card_cvv.disable(),cbox_remember.disable(),but_submit.prop("disabled",!0),but_submit_label.text("Processing…"),but_submit_icon=$(".icon",but_submit).loadingIcon(),radioboxes_payment.value==PaymentScreenPay.CARD_SAVED?submitToServer():bt_client?bt_client.tokenizeCard({number:card.number,expirationMonth:card.expiry.month,expirationYear:card.expiry.year,cvv:card.cvv},function(err,nonce){err?VectorStock.track("send","event","Error (User)",tracking_event,"Braintree: Nonce could not be created",tracking_cost):submitToServer(nonce,card,input_email.value)}):submitToServer("EMPTY_NONCE",card,input_email.value)),event.preventDefault()}function submitToServer(nonce,card,email_address){var url=image?"/api/creditcard/singleimage/"+image.id+"/"+image.license:"/api/cart/singleimage/creditcard",params={email:email_address||null,address:cbox_billing.checked?input_billing.value:null,nonce:nonce||null,card:null,set_token:logged_in?Number(1==cbox_remember.checked):0,use_token:nonce?0:1};$.post(url,params).done(function(response){1==response.success?onPurchaseSuccess(response):0==response.attempts?showPurchaseError("attempts"):params.use_token?(area_select.remove(),page.attr("data-payment",PaymentScreenPay.CARD_ADDITIONAL),showPurchaseError("stored_card"),input_card_number.focus()):"processor"==response.error?function(transaction_id,card){var params={id:transaction_id,card_number:card.number,card_month:card.expiry.month,card_year:card.expiry.year,card_cvv:card.cvv},url=image?"/api/single-image/reprocess":"/api/cart-purchase/reprocess";$.post(url,params,function(response){1==response.success?onPurchaseSuccess(response):showPurchaseError(response.error);var outcome=response.success?"Success":"Failure",usertype=user_id?"User #"+user_id:"Guest",purchase=image?"Image: "+image.id:"Cart contents";VectorStock.track("send","event","Card Reprocess",outcome,"Type: Single-Image, "+purchase+", "+usertype,Math.round(INSTANCE.value))})}(response.id,card):showPurchaseError(response.error)}).fail(function(event){showPurchaseError()})}function showPurchaseError(error_type){var tracking_user=user_id?"Account ("+user_id+")":"Email ("+input_email.value+")",tracking_cost=Math.round(total_cost);switch(error_type){case"attempts":input_card_number.showError(RESPONSE_CARD_ATTEMPTS),VectorStock.track("send","event","Error (User)",tracking_event,"Server: Attempt limit exceeded, "+tracking_user,tracking_cost);break;case"cvv":input_card_cvv.showError(RESPONSE_CVV_INVALID),VectorStock.track("send","event","Error (User)",tracking_event,"Server: CVV ("+input_card_cvv.value+"), "+tracking_user,tracking_cost);break;case"email":input_email.showError(RESPONSE_EMAIL_INVALID),VectorStock.track("send","event","Error (User)",tracking_event,"Server: Email ("+input_email.value+"), "+tracking_user,tracking_cost);break;case"expiry":case"expire_month":case"expire_year":input_card_expiry.showError(RESPONSE_EXPIRY_INVALID),VectorStock.track("send","event","Error (User)",tracking_event,"Server: Expiry ("+input_card_expiry.value+"), "+tracking_user,tracking_cost);break;case"expired":input_card_expiry.showError(RESPONSE_EXPIRY_EXPIRED),VectorStock.track("send","event","Error (User)",tracking_event,"Server: Expired ("+input_card_expiry.value+"), "+tracking_user,tracking_cost);break;case"invalid":case"number":input_card_number.showError(RESPONSE_NUMBER_INVALID),VectorStock.track("send","event","Error (User)",tracking_event,"Server: Number ("+input_card_number.value+"), "+tracking_user,tracking_cost);break;case"stored_card":input_card_number.showError(RESPONSE_SAVED_CARD_BAD),VectorStock.track("send","event","Error (User)",tracking_event,"Server: Card already stored ("+input_card_number.value+"), "+tracking_user,tracking_cost);break;case"card_attempts":case"process_attempts":input_card_number.showError(RESPONSE_CARD_DECLINED),VectorStock.track("send","event","Error (User)",tracking_event,"Server: Too many attempts, "+tracking_user,tracking_cost);break;default:input_card_number.showError(RESPONSE_NUMBER_DECLINED),VectorStock.track("send","event","Error (User)",tracking_event,"Server: "+(error_type||"Undefined")+" ("+input_card_number.value+"), "+tracking_user,tracking_cost)}radioboxes_payment.enable(),input_email.enable(),cbox_billing.enable(),input_billing.enable(),input_card_number.enable(),input_card_expiry.enable(),input_card_cvv.enable(),cbox_remember.enable(),but_submit.prop("disabled",!1),but_submit_label.text("Pay Now"),but_submit_icon.remove()}function onPurchaseSuccess(response){VectorStock.trackPurchase(response.transaction.type,response.transaction.id,response.transaction.value,response.transaction.email,response.transaction.country,response.transaction.provider,response.transaction.txn_id),VectorStock.trackConversion({google_conversion_label:"IxeuCM-1m28QiJXH9wM",google_conversion_value:parseInt(response.transaction.value),google_conversion_currency:"USD"});var params=[response];image&&params.push(image.license),INSTANCE.dispatchEvent("purchase",params)}function close(){INSTANCE.dispatchEvent("close")}return INSTANCE.show=function(){screen.show()},INSTANCE.hide=function(){screen.hide()},function(){var but_close,total_cost_formatted=(total_cost===parseInt(total_cost,10)?total_cost:total_cost.toFixed(2)).formatCommas(),screen_title=(image?"Single Image":"Cart")+" "+(is_upgrade?"Upgrade":"Purchase");pane=$("> .panel .pane",screen),pane_content=$("> div",pane),$(".header h1",screen).html(screen_title+" (<small>$</small><em>"+total_cost_formatted+"</em>)"),page=$("#pbox_details_card",screen),area_contact=$("#pbox_payment_new_contact",screen),area_select=$("#pbox_payment_card_select",screen),area_card=$("#pbox_payment_details",screen),but_close=$('button[data-action="close"]',screen);var load_attempts=0,loaded_setup=!1,loaded_braintree=!1,loaded_paypal=!1;function isLoaded(){var input_number,input_expiry,input_cvv,but_close;loaded_setup&&loaded_braintree&&loaded_paypal&&(input_email=new VectorStock.FieldInput($('input[name="email"]',area_contact)),cbox_billing=new VectorStock.FieldCheckbox($('input[name="inc_billing_address"]',area_contact)),field_billing=$('.fieldgroup[data-id="address"]',area_contact),input_billing=new VectorStock.FieldInput($('textarea[name="billing_address"]',field_billing)),radioboxes_payment=new VectorStock.FieldRadioboxes($("ul.radiobuttons li",area_select)),input_number=$('input[name="card_number"]',area_card).payment("formatCardNumber"),input_card_number=new VectorStock.FieldInput(input_number),icon_card=$('fieldset[data-field="card_number"] .card',area_card),input_expiry=$('input[name="card_expiry"]',area_card).payment("formatCardExpiry"),input_card_expiry=new VectorStock.FieldInput(input_expiry),input_cvv=$('input[name="card_cvv"]',area_card).payment("formatCardCVC"),input_card_cvv=new VectorStock.FieldInput(input_cvv),cbox_remember=new VectorStock.FieldCheckbox($('input[name="remember_card"]',area_card)),but_submit=$('.footer button[type="submit"]',screen),but_submit_label=$(".label",but_submit),but_close=$('button[data-action="close"]',screen),window.braintree&&bt_token&&(bt_client=new window.braintree.api.Client({clientToken:bt_token})),radioboxes_payment.on("change",onPaymentSelect),input_card_number.on("update",onNumberUpdate),cbox_billing.on("change",toggleFieldAddress),but_submit.on("click",onSubmit),but_close.on("click",function(){INSTANCE.dispatchEvent("close")}),INSTANCE.show(),setTimeout(function(){logged_in?payment||input_card_number.focus():input_email.focus()},200))}but_close.on("click",close);var icon=screen.parent().loadingIcon("large");!function loadSetup(){$.get("/api/purchases/setup").done(function(response){void 0===response.credits&&void 0===response.downloads?(logged_in=response.logged_in,user_id=response.user_id||null,payment=response.payment||null,bt_token=response.bt_token,loaded_setup=!0,icon.remove(),page.attr("data-account",1==logged_in?"member":"guest"),page.attr("data-payment",payment?"saved":"new"),response.payment&&function(card_number,card_expiry){var card_type=$.payment.cardType(card_number);if(CARD_FORMATS[card_type]?CARD_FORMATS[card_type]:CARD_FORMATS._default,CARD_FORMATS[card_type]){var match=card_number.match(CARD_FORMATS[card_type]);match.length&&(match.shift(),card_number=match.join(" "))}else{var match=card_number.match(CARD_FORMATS._default);match.length&&(card_number=match.join(" "))}card_number=(card_number=card_number.replace(/(\.+[\.\s]+\.+)/,"<em>$1</em>")).replace(/\./g,"•");var item=$('<li class="checked" />'),label=$('<label for="pbox_payment_saved" />').appendTo(item);$('<input type="radio" id="pbox_payment_saved" name="pbox_payment" value="saved" checked="checked">').appendTo(label),$('<span class="title">Card: '+card_number+' <span class="expiry">Exp. '+card_expiry+"</span></span>").appendTo(label),item.prependTo($("ul.radiobuttons",area_select))}(payment.card,payment.expiry),isLoaded()):window.location.reload(!0)}).fail(function(event){if(load_attempts++<2)loadSetup();else{var data_packet={cookie:document.cookie};VectorStock.track("send","event","Error (JS)","CustomError: Setup failed to load",JSON.stringify(data_packet)),INSTANCE.dispatchEvent("close"),setTimeout(function(){alert("Server unavailable - please contact customer support")},5)}})}(),head.load(["https://js.braintreegateway.com/v2/braintree.js","https://www.paypalobjects.com/api/checkout.js"],function(){loaded_paypal=loaded_braintree=!0,window.paypal&&paypal.Button.render({env:"production",style:{label:"paypal",size:"small",shape:"rect",color:"blue",tagline:!1},commit:!0,payment:function(){return image?paypal.request.get("/api/single/purchase/"+image.id+"/"+image.license).then(function(response){return response.payment_id?response.payment_id:response.token}):paypal.request.post("/api/cart/singleimage/paypal").then(function(response){return response.payment_id?response.payment_id:response.token})},onAuthorize:function(data,actions){var data={paymentID:data.paymentID,payerID:data.payerID,paymentToken:data.paymentToken,email:input_email.value||null,address:cbox_billing.checked?input_billing.value:null},url=image?"/api/single/purchase/validate":"/api/cart/paypal/validate";return paypal.request.post(url,data).then(function(response){1==response.success?onPurchaseSuccess(response):alert("Error: There was a problem connecting to your PayPal account")})}},"#paypal-button"),isLoaded()})}(),INSTANCE};PaymentScreenPay.CARD_NEW="new",PaymentScreenPay.CARD_SAVED="saved",PaymentScreenPay.CARD_ADDITIONAL="additional";var PaymentScreenSuccess=function(screen,url_download,copy_close){var but_download,but_download_label,timeout_button,pane_content,but_view_options,but_return,INSTANCE=new VSModule,TIME_DISABLE_BUTTON=5*MS_MINUTE;function triggerDownload(){VectorStock.goToURL(url_download)}function disableDownloadLink(){but_download&&(but_download.prop("disabled",!0).addClass("expired"),but_download_label.html("Link has now expired..."),but_download.off("click",triggerDownload))}return INSTANCE.show=function(){screen.show()},INSTANCE.hide=function(){timeout_button&&clearTimeout(timeout_button),screen.hide()},pane_content=$("> .panel .pane",screen),but_download=$('.feature button[data-action="download"]',pane_content),but_download_label=$("> .label",but_download),$("> .icon",but_download),but_view_options=$('.feature button[data-action="view"]',pane_content),but_return=$(".footer a",screen),but_close=$('button[data-action="close"]',screen),but_download.on("click",triggerDownload),but_view_options.on("click",function(){INSTANCE.dispatchEvent("view_options")}),but_return.on("click",function(event){event.preventDefault(),INSTANCE.dispatchEvent("close")}),but_close.on("click",function(event){INSTANCE.dispatchEvent("close")}),but_return.html(copy_close),timeout_button=setTimeout(disableDownloadLink,TIME_DISABLE_BUTTON),INSTANCE.show(),$("html").hasClass("mobile")||triggerDownload(),INSTANCE},PaymentBox=function(){var image,images,total_cost,total_images,is_upgrade,filetype,overlay,screen_pay,screen_success,imageset,timeout_session_expiry,INSTANCE=new VSModule;function addImage(image_id,image_title){var figure;figure=$("<figure />").appendTo(imageset),$('<img width="238" height="250">').attr("src",VectorStock.imagePath(image_id,image_title,"medium")).attr("alt",image_title||"").appendTo(figure),$('<span class="inner" />').appendTo(figure)}function onClickOverlay(event){$(event.target)[0]==overlay[0]&&INSTANCE.close()}function onPurchase(transaction_response,image_license){screen_pay.hide();var url_download=transaction_response.url;"zip"!==filetype&&transaction_response.file_urls[filetype]&&(url_download=transaction_response.file_urls[filetype]),(screen_success=new PaymentScreenSuccess($('.pb-screen[data-screen="success"]',screens),url_download,"Return to "+(image?"page":"Cart")+"...")).on("view_options",function(){INSTANCE.dispatchEvent("view_options"),INSTANCE.close()}),screen_success.on("close",function(){INSTANCE.close()}),images?VectorStock.track("send","event","CTR: Cart Popup","Purchased"):VectorStock.track("send","event","CTR: Single-Image Popup","Purchased"),INSTANCE.dispatchEvent("purchase",[transaction_response,image_license,total_cost])}return $.isArray(arguments[0])?(images=arguments[0],total_cost=arguments[1],total_images=arguments[2]):(image=arguments[0],total_cost=arguments[1],is_upgrade=arguments[2],filetype=arguments[3]),INSTANCE.close=function(){container&&container.remove(),overlay.remove(),clearTimeout(timeout_session_expiry),INSTANCE.dispatchEvent("close")},function(){if(overlay=$('<div class="overlay" />').css({height:$(document).height()}).appendTo("body").on("click",onClickOverlay),setTimeout(function(){overlay.addClass("reveal")}),function(html_template){var sidebar,pb_screen,pb_content,banner,total_cost_formatted=total_cost===parseInt(total_cost,10)?total_cost:total_cost.toFixed(2);if(total_cost_formatted=total_cost_formatted.formatCommas(),container=$(html_template).appendTo(overlay),sidebar=$(".pb-sidebar",container),pb_screen=$(".pb-screen",sidebar).show(),pb_content=$(".pb-content",pb_screen),screens=$(".pb-screens",container),banner=$(".pb-banner button",container),screen_pay=images?new PaymentScreenPay($('.pb-screen[data-screen="pay"]',screens),total_cost):new PaymentScreenPay($('.pb-screen[data-screen="pay"]',screens),image,total_cost,is_upgrade),images){var total_previews=Math.min(5,images.length);imageset=$(".imageset",pb_content).attr("data-images",total_previews);for(var i=total_previews;i--;)addImage(images[i]);$("h1",pb_content).text("Cart images ("+total_images+")"),$("ul li:eq(0)",pb_content).remove(),$("ul li:eq(1) .dd em",pb_content).text(total_cost_formatted)}else imageset=$(".imageset",pb_content).attr("data-images",1),addImage(image.id,image.title),$("h1",pb_content).text(image.title+" vector image"),$("ul li:eq(0) .dd",pb_content).text(image.license),$("ul li:eq(2) .dd em",pb_content).text(total_cost_formatted);screen_pay.on("purchase",onPurchase),screen_pay.on("close",INSTANCE.close),is_upgrade?banner.parent().remove():banner.on("click",function(event){var event_type=images?"CTR: Cart Popup":"CTR: Single-Image Popup";if(VectorStock.isLoggedIn()){VectorStock.track("send","event",{eventCategory:event_type,eventAction:"Banner Credits",eventLabel:"",transport:"beacon"});var min_cost=Math.max(30,5*Math.ceil(Math.round(total_cost)/5));images?VectorStock.goToURL("/purchase/credits/"+min_cost):VectorStock.goToURL("/purchase/credits/"+min_cost+"?id="+image.id)}else VectorStock.track("send","event",event_type,"Banner Credits"),INSTANCE.close(),VectorStock.goToURL("/signup")}),setTimeout(function(){container.addClass("reveal")})}(PaymentBox.template),VectorStock.isLoggedIn()&&(timeout_session_expiry=setTimeout(SignupBox.extendSession,SignupBox.TIME_EXPIRE)),images){var cart_snapshot={cart_tally:total_images,cart_value:total_cost};VectorStock.track("send","event","CTR: Cart Popup","Initiated",JSON.stringify(cart_snapshot))}else{var image_snapshot={id:image.id,value:total_cost};VectorStock.track("send","event","CTR: Single-Image Popup","Initiated",JSON.stringify(image_snapshot))}}(),INSTANCE};PaymentBox.template='<div id="box-payment"><div class="pb-wrap"><div class="pb-sidebar"><div class="pb-screen"><div class="pb-content"><div class="imageset" data-images="1"></div><h1></h1><ul><li><span class="dt">License</span><span class="dm"></span><span class="dd"></span></li><li><span class="dt">Files</span><span class="dm"></span><span class="dd"><abbr title="Encapsulated PostScript File">EPS</abbr>, <abbr title="Adobe Illustrator File">Ai</abbr>, <abbr title="Adobe Portable Document Format File">PDF</abbr> &amp; <abbr title="Joint Photographic Experts Group File">JPEG</abbr></span></li><li><span class="dt">Cost</span><span class="dm"></span><span class="dd"><small>$</small><em></em> <abbr title="United States Dollars">USD</abbr></span></li></ul></div><div class="pb-background"></div></div></div><div class="pb-screens"><div class="pb-screen" data-screen="pay"><div class="header"><h1></h1></div><div class="panel"><div class="pane reveal"><div id="pbox_details_card" data-account="" data-payment=""><div id="pbox_payment_new_contact" class="step"><h2><span class="point"></span><span class="title">Contact</span></h2><div class="fieldgroup" data-id="email"><fieldset data-field="email"><span class="icon"></span><input type="email" name="email" maxlength="100" autocomplete="email" autocorrect="off" autocapitalize="off" placeholder="Email address"></fieldset></div><label for="pbox_inc_billing_address" class="checkbox"><span class="box"><input type="checkbox" id="pbox_inc_billing_address" name="inc_billing_address" value="1"></span><span class="title">Add Billing address to invoice</span></label><div class="fieldgroup" data-id="address"><fieldset data-field="address"><textarea id="pbox_billing_address" name="billing_address" placeholder="Billing address"></textarea></fieldset></div></div><div id="pbox_payment_card_select" class="step"><h2><span class="point"></span><span class="title">Payment Type</span></h2><ul class="radiobuttons"><li><label for="pbox_payment_new"><input type="radio" id="pbox_payment_new" name="pbox_payment" value="additional"><span class="title">New payment method…</span></label></li></ul></div><div id="pbox_payment_details" class="step"><h2><span class="point"></span><span class="title">Payment Details</span></h2><div class="fieldgroup" data-id="card"><fieldset data-field="card_number"><span class="icon"></span><input type="tel" id="pbox_card_number" name="card_number" class="number" placeholder="Card Number" maxlength="19" autocomplete="cc-number"><span class="card"></span></fieldset></div><div class="fieldgroup" data-id="meta"><fieldset data-field="card_expiry"><span class="icon"></span><input type="tel" id="pbox_card_expiry" name="card_expiry" class="expiry" placeholder="MM / YY" maxlength="9" autocomplete="cc-exp"></fieldset><fieldset data-field="card_cvv"><span class="icon"></span><input type="tel" id="pbox_card_cvv" name="card_cvv" placeholder="CVV" maxlength="4" autocomplete="off"></fieldset><label for="pbox_remember_card" class="checkbox checked"><span class="box"><input type="checkbox" id="pbox_remember_card" name="remember_card" checked="checked" value="1"></span><span class="title">Remember</span></label></div><div class="alt_options"><div class="divider"><em>Or</em><div class="options"><div id="paypal-button"></div></div></div></div></div></div></div></div><div class="footer"><button type="submit"><span class="label">Buy &amp; Download</span><span class="icon"><span></button></div><button data-action="close" type="button">Close</button></div><div class="pb-screen" data-screen="success"><div class="header"><h1>Payment Success!</h1></div><div class="panel"><div class="pane reveal"><div class="feature"><figure></figure><button type="button" data-action="download"><span class="icon"><span class="icon_download"></span></span><span class="label">Download again</span></button><button type="button" data-action="view"><span class="label">View download options...</span></button><p>We have also emailed you a copy of the invoice and download link.</p></div></div></div><div class="footer"><a href="/"></a></div><button data-action="close" type="button">Close</button></div></div></div><div class="pb-banner"><button type="button"><span class="label">You can also <strong>buy with Credits</strong> for <strong>$1 per image...</strong></span><span class="icon"></span></button></div></div>';var SearchResultData=function(params){var TYPES={};TYPES[SearchResultData.TYPE_BROWSE]={title:"Find Royalty-Free Vectors",header:"Royalty Free Vectors",path:"royalty-free-vectors"},TYPES[SearchResultData.TYPE_FREE]={title:"Find Free Vectors",header:"Free Vector Art & Graphics",path:"free-vectors"},TYPES[SearchResultData.TYPE_PURCHASED]={title:"Purchased Vectors",header:"Purchased",path:"purchased"},TYPES.pending_manage={title:"Manage Pending",header:"Pending",path:"manage-pending"},TYPES.pending_self={title:"Pending",header:"Pending",path:"pending"},TYPES.pending_artist={title:"Pending",header:"Pending",path:"manage-pending/vectors-by_"};var type=TYPES[params.type]||TYPES[SearchResultData.TYPE_BROWSE];params.type==SearchResultData.TYPE_PENDING&&(params.pending?params.pending==SearchResultData.TYPE_PENDING_SELF?type=TYPES.pending_self:(type=TYPES.pending_artist).path+=params.pending:type=TYPES.pending_manage);var path_url=[type.path],path_crumbs=[],title_window=type.title,title_header="",title_keywords=type.header,keywords=params.keywords,category=params.categories||null,artist=params.artists||null,similar=params.similar||null,page=(keywords.length,params.page||1),order=params.order;if(order||(order=0<keywords.length?SearchResults.ORDER_BESTMATCH:SearchResults.ORDER_TRENDING),keywords?(title_window=(title_keywords=keywords.toTitleCase())+" Vector Art",path_url[1]=keywords.replace(/\s+/g,"-").toLowerCase()+"-vectors",path_crumbs.push("<li><span>"+title_keywords+" vectors</span></li>"),params.type==SearchResultData.TYPE_FREE&&(title_window="Free "+title_window,title_keywords="Free "+title_keywords),title_keywords+=" vectors"):title_keywords=type.header,title_header+="<strong>"+title_keywords+"</strong>",category){var category_id=SearchBoxTag.termToURL(category),category_url=category_id+"-vectors",category_title=SearchBox.dictionary.getCategory(category_id)||category;title_window+=" within "+category_title,title_header+=" within <strong>"+category_title+"</strong>",path_url[0]=category_url,path_crumbs.unshift('<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/'+category_url+'" itemprop="url"><span itemprop="title">'+category_title+"</span></a></li>")}if(path_crumbs.unshift('<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/'+type.path+'" itemprop="url"><span itemprop="title">'+type.header+" Vectors</span></a></li>"),artist){var artist_id=SearchBoxTag.termToURL(artist),artist_url="by_"+artist_id,artist_title=SearchBox.dictionary.getArtist(artist_id)||artist;is_following=VectorStock.userData.isFollowing(artist_id),button_label=is_following?"Following":"Follow",button_selected=is_following?"selected":"",logged_in=!!(VectorStock&&VectorStock.isLoggedIn&&VectorStock.isLoggedIn()),title_window+=" by "+artist_title,title_header+=' by <strong class="artist">'+artist_title+"</strong>",logged_in&&(title_header+='<button type="button" data-action="follow" data-artist="'+artist_title+'" class="'+button_selected+'" title="Follow Artists that you like to create a newsfeed of their recent images."><span class="label">'+button_label+"</span></button>"),path_url[1]=(path_url[1]||"vectors")+"-"+artist_url}return similar&&(title_window+=" similar to #"+similar,title_header+=" similar to <strong>#"+similar+"</strong>",path_url[1]||(path_url[1]="vectors"),path_url[1]+="-similar-to_"+similar),params.type==SearchResultData.TYPE_PURCHASED||params.type==SearchResultData.TYPE_PENDING||0==keywords.length&&order==SearchResults.ORDER_TRENDING||0<keywords.length&&order==SearchResults.ORDER_BESTMATCH||0==keywords.length&&!category&&artist&&order==SearchResults.ORDER_BESTMATCH||path_url.push(path_url.pop()+"-order_"+order),1<page&&(title_window+=" - Page "+page,path_url.push(path_url.pop()+"-page_"+page)),{url:VectorStock.formatURL("/"+path_url.join("/")),crumbs:path_crumbs.join(""),header:title_header,title:title_window}};SearchResultData.TYPE_BROWSE="browse",SearchResultData.TYPE_FREE="free",SearchResultData.TYPE_PURCHASED="purchased",SearchResultData.TYPE_PENDING="pending",SearchResultData.TYPE_PENDING_SELF="_self";var SearchBoxDictionary=function(){var INSTANCE=VSModule();function addTerms(type,terms){for(var i=terms.length;i--;){var term_display=terms[i],term_id=SearchBoxTag.termToURL(term_display);INSTANCE[type][term_id]=term_display}}return INSTANCE.keywords={},INSTANCE.artists={},INSTANCE.categories={abstract:"Abstract","animals-wildlife":"Animals & Wildlife","artistic-experimental":"Artistic & Experimental","backgrounds-textures":"Backgrounds & Textures","beauty-fashion":"Beauty & Fashion","borders-frames":"Borders & Frames","buildings-landmarks":"Buildings & Landmarks","business-finance":"Business & Finance",cartoons:"Cartoons","celebration-party":"Celebration & Party","children-family":"Children & Family",christmas:"Christmas",cityscapes:"Cityscapes",communication:"Communication",computers:"Computers","copy-space":"Copy-Space",dancing:"Dancing","design-elements":"Design Elements","digital-media":"Digital Media","dj-dance-music":"DJ-Dance Music","document-template":"Document Template",easter:"Easter",education:"Education",entertainment:"Entertainment","flags-ribbons":"Flags & Ribbons","floral-decorative":"Floral & Decorative","fonts-type":"Fonts & Type","food-drink":"Food & Drink","game-assets":"Game Assets","geographical-maps":"Geographical & Maps",graffiti:"Graffiti","graphs-charts":"Graphs & Charts",grunge:"Grunge",halloween:"Halloween","healthcare-medical":"Healthcare & Medical",heraldry:"Heraldry",housing:"Housing","icon-emblem-(single)":"Icon & Emblem (single)","icons-emblems-(sets)":"Icon & Emblem (sets)",industrial:"Industrial",infographics:"Infographics",interiors:"Interiors","landscapes-nature":"Landscapes & Nature","marriage-engagement":"Marriage & Engagement",military:"Military",miscellaneous:"Miscellaneous",music:"Music","objects-still-life":"Objects & Still Life",packaging:"Packaging",patterns:"Patterns","patterns-(seamless)":"Patterns (seamless)",people:"People","photo-real":"Photo-Real",religion:"Religion",science:"Science",seasons:"Seasons","shopping-retail":"Shopping & Retail","signs-symbols":"Signs & Symbols",silhouettes:"Silhouettes","sports-recreation":"Sports & Recreation","t-shirt-graphics":"T-Shirt Graphics",technology:"Technology",telecommunications:"Telecommunications",transportation:"Transportation","urban-scenes":"Urban Scenes","user-interface":"User Interface","vacation-travel":"Vacation & Travel","valentines-day":"Valentines Day",vintage:"Vintage"},INSTANCE.update=function(terms){terms&&(terms.keywords&&addTerms("keywords",terms.keywords),terms.artists&&addTerms("artists",terms.artists))},INSTANCE.getKeyword=function(keyword){return!!INSTANCE.keywords.hasOwnProperty(keyword)&&INSTANCE.keywords[keyword]},INSTANCE.getArtist=function(artist){return!!INSTANCE.artists.hasOwnProperty(artist)&&INSTANCE.artists[artist]},INSTANCE.getCategory=function(category){return!!INSTANCE.categories.hasOwnProperty(category)&&INSTANCE.categories[category]},INSTANCE};SearchBoxDictionary.WORDS_SKIP=["an?d?","are","art","as","at","artworks?","be","by","clip-?art","do","for","from","got","graphics?","it'?s?","into","images?","illustrat(ions?|ed|ive)","my","on","of","or","so","to","the","vectors?","with","where","were","your"];var SearchBoxRelated=function(nav){var no_results,is_open,container,INSTANCE=VSModule();function onClick(event){var item=$(this).parent(),list=item.parent().parent(),term=item.attr("data-term");"categories"==item.parents("div").attr("class")?VectorStock.search_box.setCategory(term):VectorStock.search_box.addSearchTerm(term),0==item.siblings().length&&list.hide(),item.remove(),event.preventDefault()}function populateList(type,list,terms,existing,max){if(terms&&0!=terms.length){for(var table={},i=existing?existing.length:0;i--;)table[existing[i]]=!0;for(var index=added=0;index<terms.length&&added<max;){var term_display=terms[index],term_url=SearchBoxTag.termToURL(term_display);if("categories"==type&&(term_display=term_display.replace("+"," &amp; ")),!table[term_url]){var url="/"+("keywords"==type?"royalty-free-vectors/":"")+term_url+"-vectors",item=$('<li data-term="'+term_display+'" />').appendTo(list);$('<a href="'+url+'" title="'+term_display+' vectors">'+term_display+"</a>").appendTo(item);added++}index++}return list.toggle(0<added),0<added}}return INSTANCE.open=function(){nav.addClass("expanded"),is_open=!0},INSTANCE.close=function(){nav.removeClass("expanded"),is_open=!1},INSTANCE.update=function(keywords,categories,is_all){if(kw_list.empty(),cg_list.empty(),is_all)INSTANCE.close();else{is_open||INSTANCE.open();var existing=VectorStock.search_box.getValue();populateList("keywords",kw_list,keywords,existing.keywords.split(/\s+/g),5),populateList("categories",cg_list,categories,[existing.categories],2);var total_categories=categories&&categories.length?categories.length:0;kw_area.toggle(""!==keywords),cg_area.toggle(0<total_categories),no_results.toggle(!(keywords||total_categories))}},is_open=nav.hasClass("expanded"),0==nav.children().length?($("<h4>Related</h4>").appendTo(nav),container=$("<div />").appendTo(nav),kw_area=$('<div class="keywords" />').appendTo(container),kw_list=$("<ul />").appendTo(kw_area),cg_area=$('<div class="categories" />').appendTo(container),cg_list=$("<ul />").appendTo(cg_area),$('<span class="icon" />').prependTo($("> div",container))):(container=$("> div",nav),kw_area=$(".keywords",container),kw_list=$("ul",kw_area),cg_area=$(".categories",container),cg_list=$("ul",cg_area)),(no_results=$("p",container)).length||(no_results=$("<p>No related terms found</p>").hide().appendTo(container)),nav.on("click","a",onClick),INSTANCE},SearchBoxSuggestions=function(box){var fieldset_sbs,suggestions,input,INSTANCE=VSModule(),URL_AUTOCOMPLETE="/api/search/autocomplete",MIN_CHARS=1,MAX_SUGGESTIONS_GROUP=6,MAX_SUGGESTIONS_ALL=10;INSTANCE.visible=null;var timeout_load,mem_suggestions=INSTANCE.loading=null,current_term=null;function onMouseOver(){$("li.highlight",suggestions).removeClass("highlight"),$(this).addClass("highlight")}function onMouseOut(){$(this).removeClass("highlight")}function onSelect(){var term_id=$(this).attr("data-term"),context=$(this).parents(".group").attr("data-context");INSTANCE.toggle(),INSTANCE.dispatchEvent("selectItem",[term_id,context])}function onClickOutside(event){$(event.target).parents().is(suggestions)?event.preventDefault():INSTANCE.toggle(!1)}function populateSuggestions(term_id,results){var is_results=!1;if(term_id.length>=MIN_CHARS){var list=$("div",suggestions).empty(),items_all=0,populateGroup=function(context){for(var group=$('<div class="group" data-context="'+context+'" />'),terms=($("<h6>"+context+"</h6>").appendTo(group),$("<ul />").appendTo(group)),items=0,i=0;i<results[context].length&&i<MAX_SUGGESTIONS_GROUP&&(items_all<MAX_SUGGESTIONS_ALL||0==i);){var rterm=results[context][i],search=(SearchBoxTag.termToURL(rterm),new RegExp("("+term_id.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+")","i"));$('<li data-term="'+rterm+'">'+rterm.replace(search,"<em>$1</em>")+"</li>").appendTo(terms),items++,items_all++,is_results=!0,i++}items&&group.appendTo(list)};for(var context in results)populateGroup(context);INSTANCE.toggle(is_results),INSTANCE.loading=!1}else INSTANCE.toggle(!1)}return INSTANCE.toggle=function(show){show!==INSTANCE.visible&&(show=null==show?!INSTANCE.visible:show,box.toggleClass("open",show),suggestions.toggle(show),show?$(document).on("mousedown",onClickOutside):($(document).off("mousedown",onClickOutside),$("li.highlight",suggestions).removeClass("highlight")),INSTANCE.visible=show)},INSTANCE.update=function(term){clearTimeout(timeout_load),term=(term=VectorStock.sanitizeInput(term)).toLowerCase(),mem_suggestions[term]?populateSuggestions(term,mem_suggestions[term]):timeout_load=setTimeout(function(){var term_id;current_term=term_id=term,$.ajax({url:URL_AUTOCOMPLETE,data:{prefix:encodeURIComponent(term_id)},dataType:"json",type:"GET"}).done(function(response){if(head.sessionStorage&&JSON&&JSON.stringify)try{sessionStorage.autocomplete=JSON.stringify(mem_suggestions)}catch(e){}input.is(":focus")&&current_term===term_id&&populateSuggestions(term_id,response.results)}).fail(function(response){populateSuggestions(term_id,{keywords:null,artists:null,categories:null})}),term_id.length<MIN_CHARS?INSTANCE.toggle(!1):INSTANCE.loading||(INSTANCE.toggle(!1),INSTANCE.loading=!0)},350)},INSTANCE.selectedTerm=function(){var suggestion=$("li.highlight",suggestions);if(suggestion.length){var group=suggestion.closest(".group");return{term:suggestion.attr("data-term"),context:group.attr("data-context")}}return null},INSTANCE.moveHighlight=function(direction){var items=$("li",suggestions),length=items.length;if(0<length){var incumbent=items.filter(".highlight"),index=items.index(incumbent)+direction;index=index<0?index<-1?length-1:length:index;var successor=$(items[index]);incumbent.removeClass("highlight"),0<successor.length&&successor.addClass("highlight")}},INSTANCE.cancelSearch=function(){current_term=null,clearTimeout(timeout_load),INSTANCE.toggle(!1)},fieldset_sbs=$("fieldset",box),suggestions=$('<div class="suggestions" />').append("<div />").appendTo(fieldset_sbs),input=$("input[type=text]",fieldset_sbs),INSTANCE.visible=!1,INSTANCE.loading=!1,mem_suggestions=head.sessionStorage&&sessionStorage.autocomplete?JSON.parse(sessionStorage.autocomplete):{},suggestions.on("mouseover","li",onMouseOver).on("mouseout","li",onMouseOut).on("click","li",onSelect),INSTANCE},SearchBoxTag=function(list_or_item,context,label){var tag_list,tag_item,tag_button,INSTANCE=VSModule();return INSTANCE.context=null,INSTANCE.label=null,INSTANCE.value=null,INSTANCE.remove=function(suppress_bubbling){return tag_item.remove(),suppress_bubbling||INSTANCE.dispatchEvent("remove"),null},INSTANCE.update=function(label){INSTANCE.label=label,INSTANCE.value=SearchBoxTag.termToURL(label),tag_label.html(INSTANCE.label),tag_item.attr("data-value",INSTANCE.value)},list_or_item.is("ul")?(INSTANCE.context=context,INSTANCE.label=label,INSTANCE.value=SearchBoxTag.termToURL(label),tag_list=list_or_item,tag_item=$('<li data-context="'+INSTANCE.context+'" data-value="'+INSTANCE.value+'" />').appendTo(tag_list),tag_label=$('<span class="label">'+INSTANCE.label+"</span>").appendTo(tag_item),tag_button=$('<button type="button">×</button>').appendTo(tag_item)):(tag_list=list_or_item.parent(),tag_item=list_or_item,tag_label=$(".label",tag_item),tag_button=$("button",tag_item),INSTANCE.context=tag_item.data("context"),INSTANCE.label=tag_label.html(),INSTANCE.value=tag_item.data("value")),tag_button.on("click",function(){INSTANCE.remove()}),INSTANCE};SearchBoxTag.termToURL=function(term){return term=(term=(term=term+""||"").replace(/\s*&\s*|\s*\+\s*|\s+/g,"-")).toLowerCase()},SearchBoxTag.termToDisplay=function(term){return term.replace(/\+/g," & ")};var SearchBox=function(box){var fieldset,taglist,tag_artist,tag_category,tag_similar,input,but_clear,submit,suggestions,is_empty,is_loading,last_search,INSTANCE=VSModule();function onInputFocus(){box.addClass("focused")}function onInputBlur(){box.removeClass("focused")}function onInputKeyPress(event){switch(event.keyCode){case 13:var selected=suggestions.selectedTerm();selected?onSelectSuggestion(selected.term,selected.context):search(),event.preventDefault();break;case 38:case 40:if(suggestions.visible){var direction=event.keyCode<39?-1:1;suggestions.moveHighlight(direction),event.preventDefault()}break;default:onChange()}}function onChange(){setTimeout(function(){var term=$.trim(input.val());""!==term?(suggestions.update(term),box.removeClass("empty"),is_empty=!1):(suggestions.cancelSearch(),0==$("li",taglist).length&&(box.addClass("empty"),is_empty=!0))},10)}function onSelectSuggestion(term,context){"keywords"==context?INSTANCE.setSearch(term):"artists"==context?(input.val(""),INSTANCE.setArtist(term)):"categories"==context&&INSTANCE.setCategory(term),search()}function onSearchButtonClick(event){search(),event.preventDefault()}function onTagArtistRemove(){tag_artist=null,search()}function onTagCategoryRemove(){tag_category=null,search()}function onTagSimilarRemove(){tag_similar=null,search()}function search(){is_empty=0==$("li",taglist).length&&""==input.val(),box.toggleClass("empty",is_empty),last_search=INSTANCE.getValue(),suggestions.cancelSearch(),INSTANCE.dispatchEvent("change",last_search)}return INSTANCE.box=box,INSTANCE.mode=SearchBox.MODE_DYNAMIC,INSTANCE.focus=function(){input.focus()},INSTANCE.empty=function(prevent_search){tag_artist&&(tag_artist=tag_artist.remove(!0)),tag_category&&(tag_category=tag_category.remove(!0)),tag_similar&&(tag_similar=tag_similar.remove(!0)),taglist.empty(),input.val(""),is_empty||prevent_search||search(),box.addClass("empty"),is_empty=!0,INSTANCE.dispatchEvent("empty")},INSTANCE.getValue=function(){var scope=$("#search_type").val();""!=scope&&"browse"!=scope||(scope=SearchResults.SCOPE_ALL);var keywords=$.trim(input.val());return{scope:scope,keywords:keywords=keywords.replace(/<\/?\w+.*?>/g,""),artists:tag_artist?tag_artist.value:null,categories:tag_category?tag_category.value:null,similar:tag_similar?tag_similar.value:null}},INSTANCE.getSearchTerms=function(){return last_search&&last_search.keywords||""},INSTANCE.getSearch=function(){return input.val()},INSTANCE.setSearch=function(search_term,prevent_search){input.val(search_term),prevent_search||search()},INSTANCE.addSearchTerm=function(search_term){var search_terms=input.val().split(" ");search_terms.push(search_term),INSTANCE.setSearch(search_terms.join(" "))},INSTANCE.setArtist=function(label_artist,prevent_search){tag_category&&(tag_category=tag_category.remove(!0)),tag_similar&&(tag_similar=tag_similar.remove(!0)),tag_artist?tag_artist.update(label_artist):(tag_artist=SearchBoxTag(taglist,"artist",label_artist)).on("remove",onTagArtistRemove),prevent_search||search()},INSTANCE.setCategory=function(label_category,prevent_search){tag_artist&&(tag_artist=tag_artist.remove(!0)),tag_similar&&(tag_similar=tag_similar.remove(!0)),tag_category?tag_category.update(label_category):(tag_category=SearchBoxTag(taglist,"category",label_category)).on("remove",onTagCategoryRemove),prevent_search||search()},INSTANCE.setSimilar=function(label_similar,prevent_search){tag_artist&&(tag_artist=tag_artist.remove(!0)),tag_category&&(tag_category=tag_category.remove(!0)),input.val(""),tag_similar?tag_similar.update(label_similar):(tag_similar=SearchBoxTag(taglist,"similar",label_similar)).on("remove",onTagSimilarRemove),prevent_search||search()},INSTANCE.setValue=function(search_state,prevent_search){INSTANCE.empty(!0),search_state.keywords&&INSTANCE.setSearch(search_state.keywords,!0),search_state.artists&&INSTANCE.setArtist(search_state.artists,!0),search_state.categories&&INSTANCE.setCategory(search_state.categories,!0),search_state.similar&&INSTANCE.setSimilar(search_state.similar,!0),prevent_search||search()},INSTANCE.setStatus=function(status){status==SearchBox.STATUS_LOADING?is_loading||(submit.prop("disabled",!0),submit.loadingIcon(),is_loading=!0):is_loading&&(submit.prop("disabled",!1),$(".vs_loadicon",submit).remove(),is_loading=!1)},INSTANCE.setMode=function(mode){INSTANCE.mode=mode},INSTANCE.reload=function(){INSTANCE.dispatchEvent("change",INSTANCE.getValue())},function(){fieldset=$("fieldset",box),taglist=$(".tags ul",fieldset),input=$(".input input[type=text]",fieldset),but_clear=$('.input button[data-action="clear"]',fieldset),submit=$("button[type=submit]",box),suggestions=SearchBoxSuggestions(box);var item_artist=$('li[data-context="artist"]',taglist);item_artist.length&&(tag_artist=SearchBoxTag(item_artist)).on("remove",onTagArtistRemove);var item_category=$('li[data-context="category"]',taglist);item_category.length&&(tag_category=SearchBoxTag(item_category)).on("remove",onTagCategoryRemove);var item_similar=$('li[data-context="similar"]',taglist);item_similar.length&&(tag_similar=SearchBoxTag(item_similar)).on("remove",onTagSimilarRemove),is_loading=!(is_empty=!0),is_empty=0==$("li",taglist).length&&""==input.val(),last_search=null,box.toggleClass("empty",is_empty),fieldset.on("click",INSTANCE.focus),input.on("focus",onInputFocus).on("blur",onInputBlur).on("keydown",onInputKeyPress).on("paste",onChange),but_clear.on("click",function(){INSTANCE.empty()}),submit.on("click",onSearchButtonClick),suggestions.on("selectItem",onSelectSuggestion)}(),INSTANCE};SearchBox.STATUS_LOADING="loading",SearchBox.STATUS_READY="ready",SearchBox.MODE_DYNAMIC="dynamic",SearchBox.MODE_STATIC="static",SearchBox.dictionary=SearchBoxDictionary();var SearchLoadBar=function(){var container,bar,INSTANCE=VSModule(),ID_NAMESPACE="bar_loading",DURATION_LATENCY=1e3,DURATION_WAITING=5e3,LOAD_POINTS=[0,40,60,100];return INSTANCE.update=function(percent){var wide=LOAD_POINTS[2]+Math.round(percent*(100-LOAD_POINTS[2]))+"%";bar.stop().animate({width:wide},300,"easeOutQuad")},INSTANCE.complete=function(){bar.stop().animate({width:"100%"},500,"easeOutCubic"),setTimeout(function(){container.animate({opacity:0},750,"easeOutCubic",function(){container.remove()})},2e3)},$("#"+ID_NAMESPACE).remove(),container=$('<div id="'+ID_NAMESPACE+'" />').appendTo("body"),(bar=$("<div />").appendTo(container)).animate({width:LOAD_POINTS[1]+"%"},DURATION_LATENCY,"easeInCubic",function(){bar.animate({width:LOAD_POINTS[2]+"%"},DURATION_WAITING)}),INSTANCE},SearchBubble=function(header){var container,inner,contents,link,but_close,INSTANCE=VSModule(),is_open=!1;function open(){is_open||(container.appendTo(header),container.stop().hide().slideDown(300,"easeOutCubic"),inner.stop().hide().fadeIn(300),is_open=!0)}function close(){is_open&&(container.stop().slideUp(300,"easeOutCubic",function(){container.detach()}),inner.stop().fadeOut(300),INSTANCE.term=null,INSTANCE.type=null,INSTANCE.name=null,INSTANCE.url=null,is_open=!1)}function saveAndClose(){INSTANCE.type!==SearchBubble.TYPE_FREE&&(SearchBubble.closed[INSTANCE.term]=!0),close()}function onLinkClick(){if(INSTANCE.type==SearchBubble.TYPE_FREE)VectorStock.search_results.setScope(SearchResults.SCOPE_ALL),VectorStock.search_box.dispatchEvent("change",VectorStock.search_box.getValue());else{if(INSTANCE.type==SearchBubble.TYPE_VECTOR)return!0;VectorStock.search_box.addTag(INSTANCE.name,INSTANCE.type,!0)}return close(),!1}return INSTANCE.term=null,INSTANCE.type=null,INSTANCE.name=null,INSTANCE.url=null,INSTANCE.hits=null,INSTANCE.set=function(params,response){if(params.type==SearchResults.SCOPE_FREE){var is_keywords=params.keywords&&params.keywords.length,is_artists=params.artists&&params.artists.length;if(is_keywords||is_artists){(params=$.extend({},params)).type=SearchResults.SCOPE_ALL;var data=SearchResultData(params);INSTANCE.type=SearchBubble.TYPE_FREE,INSTANCE.name=$(data.header).text().replace(/^All /i,""),INSTANCE.term=INSTANCE.name,INSTANCE.hits=response.altresults&&response.altresults.hit_count||0,INSTANCE.url=data.url,contents.html("This was a Free vector search. <a></a>");var counter=0<INSTANCE.hits?"("+INSTANCE.hits.formatCommas()+")":"our";(link=$("a",contents).text("View "+counter+" Royalty-Free "+INSTANCE.name).attr("href",INSTANCE.url)).on("click",onLinkClick),open()}}else if(response.altresults&&1==params.page){var term,type,name,url,copy;if(term=response.altresults.term,type=response.altresults.type,name=response.altresults.name,url=response.altresults.url,INSTANCE.name!==name&&!SearchBubble.closed[name]){switch(type){case SearchBubble.TYPE_ARTIST:copy="We also have an Artist named <a></a>";break;case SearchBubble.TYPE_CATEGORY:copy="We also have a Category for <a></a>";break;case SearchBubble.TYPE_VECTOR:copy="We also have a Vector with the ID <a></a>"}contents.html(copy),link=$("a",contents).text(name).attr("href",url).attr("data-context",type),INSTANCE.term=term,INSTANCE.type=type,INSTANCE.name=name,INSTANCE.url=url,link.on("click",onLinkClick),open()}}},INSTANCE.update=function(params){if(is_open){var match_term=!1;if(params.keywords.length||params.artists.length)if(params.type==SearchResults.SCOPE_FREE&&INSTANCE.type==SearchBubble.TYPE_FREE)match_term=!0;else if(INSTANCE.term&&INSTANCE.term.toLowerCase)for(var i=params.keywords.length;i--;)if(params.keywords[i]==INSTANCE.term.toLowerCase()){match_term=!0;break}if(!match_term){for(var terms_by_id={},j=params.keywords.length;j--;)terms_by_id[params.keywords[i]]=!0;for(var term in SearchBubble.closed)terms_by_id[term]||delete SearchBubble.closed[term];close()}}},(container=$(".alternatives",header)).length?(inner=$("> div",container),$(".icon",inner),contents=$("p",inner),link=$("a",contents),but_close=$("button",inner),INSTANCE.term=link.text(),INSTANCE.type=link.data("context"),INSTANCE.name=link.text(),INSTANCE.url=link.attr("href"),link.on("click",onLinkClick),is_open=!0):(container=$('<div class="alternatives" />'),inner=$("<div />").appendTo(container),$('<span class="icon" />').appendTo(inner),contents=$("<p />").appendTo(inner),but_close=$("<button>Close</button>").appendTo(inner)),but_close.on("click",saveAndClose),INSTANCE};SearchBubble.TYPE_FREE="free",SearchBubble.TYPE_ARTIST="artists",SearchBubble.TYPE_VECTOR="vectors",SearchBubble.TYPE_CATEGORY="categories",SearchBubble.closed={};var SearchSimilar=function(sidebar){var container,search_list,tooltip,timeout_hoveritem,container_height,document_height,footer_height,INSTANCE=new VSModule,OFFSET_PADDING=19,offset_top=0,is_fixed=!1,is_over_link=!1,list_searches=[];function setSearchTermEvents(){container_height=container.outerHeight()+OFFSET_PADDING;var terms_list=$("li",search_list);terms_list.each(function(){for(var item=$(this),link=$("a",item),search_term=link.text(),image_ids=item.attr("data-ids").split(","),image_titles=item.attr("data-titles").split(","),images_list=[],i=0;i<image_ids.length;i++)images_list.push({id:image_ids[i],title:image_titles[i]});link.on("mouseover",function(){terms_list.removeClass("highlighted"),item.addClass("highlighted"),is_over_link=!0,tooltip?tooltip.update(item.position().top,images_list):(tooltip=new SearchSimilarTooltip(container,images_list,item.position().top)).on("mouseout",function(){tooltip&&!is_over_link&&(tooltip.remove(),tooltip=null,terms_list.removeClass("highlighted"))}),clearTimeout(timeout_hoveritem)}),link.on("mouseout",function(){is_over_link=!1,timeout_hoveritem=setTimeout(function(){tooltip&&!tooltip.mouseover&&(tooltip.remove(),tooltip=null,item.removeClass("highlighted")),timeout_hoveritem=null},10)}),link.on("click",function(event){var is_free_search=1==$("header nav.top li.selected").index(),event_label={position:item.index()+1,link:link.text(),search:VectorStock.search_box.getSearch(),scope:is_free_search?"free":"all",list:list_searches};VectorStock.track("send","event",{eventCategory:"Search: Similar Link",eventAction:"Click",eventLabel:JSON.stringify(event_label),transport:is_free_search?"beacon":null}),is_free_search||(item.addClass("selected"),VectorStock.search_box.setSearch(search_term),VectorStock.search_results.scrollToTop(),event.preventDefault())})})}function onResize(){container&&(offset_top=container.prev().offset().top+container.prev().outerHeight()-OFFSET_PADDING,document_height=$(document).height(),footer_height=$("body > footer").outerHeight(),onScroll())}function onScroll(){if(container){var pos_scroll=$(window).scrollTop(),remaining_space=document_height-pos_scroll-footer_height-OFFSET_PADDING,container_offset=0;remaining_space<container_height&&(container_offset=remaining_space-container_height),container.css({top:container_offset}),offset_top<=pos_scroll?is_fixed||(container.addClass("fixed"),is_fixed=!0):is_fixed&&(container.removeClass("fixed"),is_fixed=!1)}}return INSTANCE.set=function(searches){if(searches&&searches.length&&sidebar.length){container?search_list.empty():(container=$('<div id="related-searches"><p>Similar Premium Searches</p><ul></ul></div>').appendTo(sidebar),search_list=$("ul",container),onResize());for(var total_searches=Math.min(15,searches.length),i=0;i<total_searches;i++){for(var search_term=searches[i].search,search_url="/royalty-free-vectors/"+search_term.split(" ").join("-")+"-vectors",search_ids=[],search_titles=[],j=0;j<searches[i].results.length;j++)search_ids.push(searches[i].results[j].id),search_titles.push(searches[i].results[j].title);$('<li data-ids="'+search_ids.join(",")+'" data-titles="'+search_titles.join(",")+'"><a href="'+search_url+'">'+search_term+"</a></li>").appendTo(search_list)}setSearchTermEvents(),list_searches=[];for(j=0;j<searches.length;j++)list_searches.push(searches[j].search)}else INSTANCE.clear()},INSTANCE.clear=function(){container&&container.remove(),container=null},(container=$("#related-searches",sidebar)).length?(search_list=$("ul",container),setSearchTermEvents(),onResize()):container=null,$(window).on("resize",onResize).on("scroll",onScroll),INSTANCE},SearchSimilarTooltip=function(container,images,offset_y){var preview,image_list,timeout_leave,INSTANCE=new VSModule;function loadImage(link,image_src){var icon=link.loadingIcon("small"),image=new Image;image.onload=function(){icon.remove();var image=$('<span class="image" />').appendTo(link);image.css("background-image","url("+image_src+")"),setTimeout(function(){image.addClass("reveal")},10)},image.onerror=function(){icon.remove()},image.src=image_src}function populate(images){for(var images_str="",i=images.length;i--;)images_str+=images[i].id;if(images_str!=INSTANCE.images_str){image_list.empty();for(i=0;i<images.length;i++){var item=$("<li />").appendTo(image_list);loadImage($('<a href="'+VectorStock.vectorURL(images[i].id,images[i].title)+'" />').appendTo(item),VectorStock.imagePath(images[i].id,images[i].title))}INSTANCE.images_str=images_str}}return INSTANCE.images_str=null,INSTANCE.mouseover=!1,INSTANCE.update=function(new_offset_y,images){preview.css("top",new_offset_y),offset_y=new_offset_y,populate(images)},INSTANCE.remove=function(){preview.addClass("conceal"),setTimeout(function(){preview.remove()},500)},preview=$('<div class="preview" />').css("top",offset_y).appendTo(container),image_list=$("<ul />").appendTo(preview),populate(images),preview.on("mouseover",function(){clearTimeout(timeout_leave),INSTANCE.mouseover=!0}).on("mouseout",function(){INSTANCE.mouseover=!1,timeout_leave=setTimeout(function(){INSTANCE.dispatchEvent("mouseout")},100)}),setTimeout(function(){preview.addClass("reveal")},10),INSTANCE},SearchAlternative=function(header,init_container){var thumbs_list,search_obj,INSTANCE=VSModule(),container=init_container.length?init_container:null;function addImageThumb(image_id,image_url,image_src,image_title){var item=$("<li />").appendTo(thumbs_list),link=$('<a href="'+image_url+'" />').appendTo(item),image=new Image;image.onload=function(){$(image).attr({title:image_title+" vector",alt:image_title}).appendTo(link),setTimeout(function(){item.addClass("reveal")},10)},image.onerror=function(){item.remove()},image.src=image_src,link.on("click",function(){EventTracker.store("vs_search_referer",JSON.stringify(search_obj))})}return INSTANCE.parameters=null,INSTANCE.set=function(parameters){INSTANCE.parameters&&parameters.type==INSTANCE.parameters.type&&parameters.name==INSTANCE.parameters.name||"free"!==parameters.type&&"vectors"!==parameters.type||function(parameters){var title,thumbs,link_all,link_label;if(INSTANCE.parameters=parameters,container?container.empty():container=$('<div class="altresults" />').insertAfter(header),title=$("<h4 />").appendTo(container),thumbs=$('<div class="thumbs" />').appendTo(container),thumbs_list=$("<ul />").appendTo(thumbs),link_all=$('<a href="" class="premium" />').appendTo(container),link_label=$('<span class="label" />').appendTo(link_all),$('<span class="icon"></span>').appendTo(link_all),delete(search_obj=VectorStock.search_box.getValue()).similar,"free"==parameters.type)search_obj.scope=SearchResults.SCOPE_ALL,title.html('<strong><a href="'+parameters.url+'">Premium '+parameters.name+"</a></strong> ("+parameters.hit_count.formatCommas()+")"),link_all.attr("href",parameters.url),link_label.html("More "+parameters.name+"…");else if("vectors"==parameters.type){title.html("<strong>Image #"+parameters.name+"</strong>"),link_all.remove();var image_id=parameters.name,image_title=parameters.title,image_src=VectorStock.imagePath(image_id,image_title,"small");addImageThumb(0,parameters.url,image_src,image_title)}if(parameters.documents)for(var i=0;i<parameters.documents.length;i++)image_id=parameters.documents[i].id,image_title=parameters.documents[i].title,addImageThumb(0,parameters.documents[i].url,image_src=VectorStock.imagePath(image_id,image_title,"small"),image_title)}(parameters)},INSTANCE.remove=function(){container&&(container.remove(),container=null)},INSTANCE},SearchResults=function(settings){var INSTANCE=VSModule(),URL_SEARCH="/api/search",URL_PURCHASED="/api/template/purchased",URL_PENDING_ARTIST="/api/pending/artist",URL_PENDING_INSPECTOR="/api/pending",FLAG_TYPES={M:"Metadata",K:"Keywords",C:"Categories"},SEARCH_CACHE_LIMIT=5;INSTANCE.PAGE_LIMIT=100,INSTANCE.PAGE_LIMIT_PENDING=100;var collection,pagination,fs_order,fs_order_items,opt_bestmatch,fs_layout,pagenumbers,results_none,results_fail,loadbar,scope=settings.scope,search_params=settings.params,search_cache={},search_current="",search_url=window.location.pathname,search_order="",search_layout="",search_scope="",search_page=1,search_pages=1,search_history=[],search_results={},vectorset=[],order_set=!1,show_gallery=settings.gallery,show_cart=settings.cart,is_pending=!1,manage_pending=!1,preferred_filetype=!1;function getSearchID(params){var params_ordered={},keys=[];for(var key in params)params.hasOwnProperty(key)&&keys.push(key);keys.sort();for(var i=0;i<keys.length;){params_ordered[key=keys[i]]=params[key],i++}return $.param(params_ordered).toLowerCase()}function createVectors(init){for(var i=vectorset.length;i--;)vectorset[i].delete();vectorset=[];var results=[],image_ids=[];$("> li",collection).each(function(){var vector=new SearchVector({scope:$(this),gallery:show_gallery,cart:show_cart,layout:search_layout,pending:is_pending,filetype:preferred_filetype});vectorset.push(vector),image_ids.push(vector.id),init&&results.push({id:vector.id,title:vector.title})}),init&&(search_results.results=results)}function updatePagination(results){if(results&&(search_url=results.url||"",(search_pages=results.pages||1)<=1))pagenumbers.empty();else{var url_base=search_url.replace(/-page_\d+$/gi,"");if($(".prev",pagination).prop("disabled",search_page<=1),$(".next",pagination).prop("disabled",search_page==search_pages),pagenumbers.empty(),5<search_pages){var stack=[],from=search_page-1,to=search_page+1;from<1?(from=1,to++):search_pages<to&&(from--,to=search_pages);for(var i=from;i<=to;)stack.push(i),i++;1<from&&(2<from&&stack.unshift(null),stack.unshift(1)),to<search_pages&&to+1<search_pages&&stack.push(null);for(var j=0;j<stack.length;){var value=stack[j],item=$("<li />").toggleClass("selected",value==search_page).appendTo(pagenumbers);if(value){var url=url_base+(1<value?"-page_"+value:"");item.append('<a href="'+url+'">'+value.formatCommas()+"</a>")}else item.addClass("period").text("...");j++}}else for(i=1;i<=search_pages;){url=url_base+(1<i?"-page_"+i:"");$('<li><a href="'+url+'">'+i.formatCommas()+"</a></li>").toggleClass("selected",i==search_page).appendTo(pagenumbers),i++}}}function jumpTo(page){search_params.page=page,performSearch(SearchResults.SEARCH_PAGE)}function performSearch(type){var search_id=getSearchID(search_params);if(search_current=search_id,search_history.push(search_id),search_page=search_params.page||1,search_history.length>SEARCH_CACHE_LIMIT)for(var old_searches=search_history.slice(0,search_history-SEARCH_CACHE_LIMIT),i=old_searches.length;i--;){search_id=old_searches[i];search_cache[search_id]&&delete search_cache[search_id]}if(search_params.keywords){var search_data=SearchResultData(search_params);VectorStock.trackSearch(search_params.keywords,search_data.url,search_scope,search_data.title)}$("#previewpane").remove();var cached_response=search_cache[search_id];if(cached_response)type==SearchResults.SEARCH_NEW?updatePagination(cached_response):updatePagination(),loadbar&&loadbar.complete(),loadbar=null,collection.removeClass("loading"),INSTANCE.populate(cached_response),INSTANCE.dispatchEvent(SearchResults.LOAD_CACHED,[type,cached_response,search_params]);else{type==SearchResults.SEARCH_NEW?function(){$("button",pagination).prop("disabled",!0),pagenumbers.empty();var item=$('<li class="period" />').appendTo(pagenumbers);item.loadingIcon&&item.loadingIcon()}():updatePagination(),collection.addClass("loading"),INSTANCE.dispatchEvent(SearchResults.LOAD_INIT,[type,search_params]),loadbar=SearchLoadBar();var url=URL_SEARCH;if(search_scope==SearchResults.SCOPE_PURCHASED&&(url=URL_PURCHASED),search_scope==SearchResults.SCOPE_PENDING){var artist=$("#pending_scope").val();url=artist?URL_PENDING_ARTIST+("_self"==artist?"":"/"+artist):URL_PENDING_INSPECTOR}var showFailMessage=function(response){loadbar&&loadbar.complete(),loadbar=null,showMessage(results_fail),collection.removeClass("loading"),pagenumbers.empty(),INSTANCE.dispatchEvent(SearchResults.LOAD_FAILED,[response,search_params])};$.ajax({url:url,data:search_params,type:"GET",xhr:function(){var xhr=new window.XMLHttpRequest;return xhr.addEventListener("progress",function(event){event.lengthComputable&&loadbar&&loadbar.update(event.loaded/event.total)},!1),xhr}}).done(function(response){if(response){if(search_cache[search_id]=response,SearchBox.dictionary.update(response),search_current==search_id){if(response.is_vector&&0===response.results.length)return void VectorStock.goToURL(response.altresults.url);loadbar&&loadbar.complete(),loadbar=null,INSTANCE.populate(response),type==SearchResults.SEARCH_NEW&&updatePagination(response),collection.removeClass("loading"),INSTANCE.dispatchEvent(SearchResults.LOAD_COMPLETE,[type,response,search_params])}}else showFailMessage(response)}).fail(showFailMessage)}}function showMessage(content){fs_order.hide(),fs_layout.hide(),collection.hide(),$(".message",scope).remove(),scope.addClass("message").append(content)}return INSTANCE.getValue=function(){return search_params},INSTANCE.setOrder=function(params){search_order=params.order||$("li.selected",fs_order_items).attr("data-value"),params.keywords.length?(order_set||(search_order=SearchResults.ORDER_BESTMATCH),opt_bestmatch.show()):(search_order==SearchResults.ORDER_BESTMATCH&&(search_order=SearchResults.ORDER_TRENDING,order_set=!1),opt_bestmatch.hide()),$("li.selected",fs_order_items).removeClass("selected"),$('li[data-value="'+search_order+'"]',fs_order_items).addClass("selected")},INSTANCE.search=function(params){INSTANCE.setOrder(params),(search_params=$.extend({},params)).page=params.page||1,search_params.order=search_order,search_params.limit=params.limit||INSTANCE.PAGE_LIMIT,search_params.type=params.type||search_scope,(search_params.type==SearchResults.SCOPE_FREE&&search_params.categories||search_params.type==SearchResults.SCOPE_PURCHASED)&&(search_scope=SearchResults.SCOPE_ALL,search_params.type=SearchResults.SCOPE_ALL),performSearch(SearchResults.SEARCH_NEW)},INSTANCE.populate=function(dataset){if(collection.length)if(collection.empty(),dataset&&dataset.results&&dataset.results.length){for(var html="",i=dataset.results.length;i--;){var item="",id=new String(dataset.results[i].id),size=search_layout==SearchResults.LAYOUT_LARGE?"medium":"small",title=dataset.results[i].title+" vector"||"",path=title.replace(/[^\d\w\s-]+/g,"").replace(/[\s-]+/g,"-").toLowerCase()+"-"+id,href=is_pending?"/upload/"+id:"/royalty-free-vector/"+path,src=VectorStock.imagePath(id,title,size,is_pending);if(dataset.results[i].highlight?item+='<li class="artist-highlight" data-vector-id="'+id+'" data-vector-title="'+dataset.results[i].title+'" data-vector-src="'+src+'">':item+='<li data-vector-id="'+id+'" data-vector-title="'+dataset.results[i].title+'" data-vector-src="'+src+'">',item+='<a href="'+href+'" title="'+title+'">',item+='<span class="title">'+title+"</span>",item+='<span class="image"></span>',item+="</a>",manage_pending){var flags=dataset.results[i].alert;if(item+='<div class="info">',item+='<span class="checkbox"></span>',item+="<ul>",dataset.results[i].artist_note&&(item+='<li title="'+dataset.results[i].artist_note+'" class="artist-note">i</li>'),flags)for(var j=0;j<flags.length;j++)item+='<li title="'+FLAG_TYPES[flags[j]]+' Missing" class="missing">'+flags[j]+"</li>";item+='<li title="Artist Score: '+dataset.results[i].artist_score+'" class="score" data-score="'+dataset.results[i].artist_score+'">'+dataset.results[i].artist_score+"</li>",item+="</ul>",item+="</div>"}html=(item+="</li>")+html}collection[0].innerHTML=html,$(".message",scope).remove(),scope.removeClass("message"),results_none.remove(),fs_order.show(),fs_layout.show(),collection.show(),createVectors()}else if(search_params.type===SearchResults.SCOPE_FREE){var params=$.extend({},search_params);if(params.type=SearchResults.SCOPE_ALL,dataset.is_artist){var artist=dataset.is_artist;for(i=params.keywords.length;i--;)if(params.keywords[i]===artist){params.keywords.splice(i,1);break}params.artists.push(artist)}var data=SearchResultData(params);data.header=data.header.replace(/\bAll /,""),$("p a",results_none).attr("href",data.url),$("p strong",results_none).replaceWith(data.header),showMessage(results_none)}else showMessage(results_none)},INSTANCE.scrollToTop=function(speed,easing){speed=speed||500,easing=easing||"easeOutExpo";0<($("body").scrollTop()||$("html").scrollTop())&&VectorStock.scrollTo(0,speed,easing)},INSTANCE.setScope=function(scope){search_scope=scope},function(){if(collection=$("> ul",scope),pagination=$(".pagination"),fs_order=$("fieldset.type_order",pagination),fs_order_items=$("> ul",fs_order),opt_bestmatch=$('li[data-value="bestmatch"]',fs_order_items),fs_layout=$("fieldset.type_layout",pagination),fs_layout_items=$("> ul",fs_layout),0==(pagenumbers=$("ul.pages",pagination)).length&&(pagenumbers=$('<ul class="pages" />').appendTo(pagination.last())),results_none=$('<div class="message"><h1>Sorry, there are no matches.</h1><p>Keep trying - here are a couple of tips:</p><ul><li>Check the spelling is correct</li><li>Use simpler search terms</li></ul><p>If you continue to have problems, visit the <a href="/contact">Contact page</a> to let us know.</p></div>'),results_fail=$('<div class="message"><h1>Hmmm... this search had problems loading.</h1><p>Try <a href="">reloading this page</a>.</p><p>If you\'re still having issues, <a href="/contact">please let us know.</a> and we\'ll do our best to address the problem.</p></div>'),$(window),search_order=$(".selected",fs_order_items).attr("data-value")||SearchResults.ORDER_LATEST,search_layout=$(".selected",fs_layout_items).attr("data-value")||SearchResults.LAYOUT_LARGE,search_scope=$("#search_type").val()||SearchResults.SCOPE_ALL,search_page=parseInt($("#search_page").val())||search_page,search_pages=parseInt($("#search_pages").val())||search_pages,is_pending=search_scope==SearchResults.SCOPE_PENDING,is_pending_admin=is_pending&&"_self"!==$("#pending_scope").val(),manage_pending=$("body > article").hasClass("pending"),preferred_filetype=scope.attr("data-filetype")||!1,is_pending_admin&&(search_layout=SearchResults.LAYOUT_SMALL),fs_order_items.on("click","li",function(){var order;$("li.selected",fs_order_items).removeClass("selected"),$(this).addClass("selected"),search_order=$(this).attr("data-value"),search_page=1,search_order=order=search_order,search_params.page=1,search_params.order=order,order_set=!0,performSearch(SearchResults.SEARCH_REORDER)}),fs_layout_items.on("click","li",function(){$("li.selected",fs_layout_items).removeClass("selected"),$(this).addClass("selected"),function(layout){if(search_layout!=layout){search_layout=layout,scope.toggleClass(SearchResults.LAYOUT_LARGE,search_layout==SearchResults.LAYOUT_LARGE);for(var i=0;i<vectorset.length;)vectorset[i++].setSize(search_layout);document.cookie="layout="+search_layout+"; path=/",$(window).trigger("resize")}}($(this).attr("data-value"))}),pagination.on("click","button",function(){var button=$(this);jumpTo(search_page+=button.hasClass("prev")?-1:1),INSTANCE.scrollToTop(),setTimeout(function(){button.blur()},100)}),pagenumbers.on("click","li a",function(){var page_number=$(this).text().replace(/[^0-9]/g,"");return jumpTo(search_page=parseInt(page_number)),setTimeout(function(){INSTANCE.scrollToTop()},1),!1}),opt_bestmatch.length||is_pending||(opt_bestmatch=$('<li role="radio" data-value="bestmatch"><span class="icon"></span>Best Match</li>').prependTo(fs_order_items).hide()),search_params.page=search_page,search_params.order=search_order,search_params.type=search_scope,search_params.limit=INSTANCE.PAGE_LIMIT,is_pending){var pending_scope=$("#pending_scope").val();pending_scope&&(search_params.pending=pending_scope),search_params.limit=INSTANCE.PAGE_LIMIT_PENDING}if(search_current=getSearchID(search_params),search_history.push(search_current),search_results={url:window.location.pathname,page:search_page,pages:search_pages,total:parseInt($("#search_total").val())},createVectors(!0),search_cache[search_current]=search_results,search_params.keywords){var search_data=SearchResultData(search_params);VectorStock.trackSearch(search_params.keywords,search_data.url,search_scope,search_data.title)}}(),INSTANCE};SearchResults.LOAD_INIT="load_init",SearchResults.LOAD_CACHED="load_cached",SearchResults.LOAD_COMPLETE="load_complete",SearchResults.LOAD_FAILED="load_failed",SearchResults.SCOPE_ALL="all",SearchResults.SCOPE_FREE="free",SearchResults.SCOPE_PENDING="pending",SearchResults.SCOPE_PURCHASED="purchased",SearchResults.SEARCH_NEW="new",SearchResults.SEARCH_PAGE="page",SearchResults.SEARCH_REORDER="reorder",SearchResults.ORDER_BESTMATCH="bestmatch",SearchResults.ORDER_TRENDING="trending",SearchResults.ORDER_LATEST="latest",SearchResults.LAYOUT_SMALL="small",SearchResults.LAYOUT_LARGE="large";var SearchVector=function(settings){var link,preview,image_wrap,image,info,search_obj,viewport_height,viewport_top,timeout_view,INSTANCE=new VSModule,LOAD_ATTEMPTS_MAX=10,SCROLL_MARGIN=200,TIME_VIEWED_DURATION=2500,show_gallery=!1!==settings.gallery&&VectorStock.isLoggedIn(),show_cart=!1!==settings.cart,show_download=null,in_cart=!1,is_mobile=$("html").hasClass("mobile"),preferred_filetype=settings.filetype;function trackEvent(event_type,event_delay){if(search_obj&&(search_obj.scope==SearchResults.SCOPE_ALL||search_obj.scope==SearchResults.SCOPE_FREE)){var event={action:event_type,image:INSTANCE.id,search:search_obj.keywords};return search_obj.scope!==SearchResults.SCOPE_ALL&&(event.search_scope=search_obj.scope),search_obj.artists&&(event.search_artist=search_obj.artists),search_obj.categories&&(event.search_category=search_obj.categories),EventTracker.track(event,event_delay),!0}return!1}function onResize(){viewport_height=$(window).height(),viewport_top=$(window).scrollTop(),INSTANCE.dimensions.width=INSTANCE.item.width(),INSTANCE.dimensions.height=INSTANCE.item.height();var offset=INSTANCE.item.offset();INSTANCE.position.top=offset.top,INSTANCE.position.bottom=INSTANCE.position.top+INSTANCE.dimensions.height,INSTANCE.position.left=offset.left,INSTANCE.position.right=INSTANCE.position.left+INSTANCE.dimensions.width}function onScroll(){viewport_top=$(window).scrollTop()}function isOnScreen(offset){offset=offset||0;var below_the_top=INSTANCE.position.bottom>viewport_top-offset,above_the_bottom=INSTANCE.position.top<viewport_top+viewport_height+offset;return below_the_top&&above_the_bottom}function isReadyToShowImage(){isOnScreen(SCROLL_MARGIN)&&(loadImage(),$(window).off("resize scroll",isReadyToShowImage))}function loadImage(){var load_attempts=1,icon=image_wrap.loadingIcon();function loadAttempt(){var image=new Image;image.onload=onLoad,image.onerror=onError,image.src=INSTANCE.src}function onLoad(){icon.remove(),image=$('<img src="'+INSTANCE.src+'" alt="'+INSTANCE.title+'">').appendTo(image_wrap),setTimeout(function(){image.addClass("reveal"),onImageLoad()},10)}function onError(){if(load_attempts<LOAD_ATTEMPTS_MAX){var wait=500+Math.round(500*Math.random());setTimeout(loadAttempt,wait)}else{icon.remove();var icon_broken=$('<span class="icon_broken" />').appendTo(image_wrap);setTimeout(function(){icon_broken.addClass("reveal")},10)}load_attempts++}loadAttempt()}function onImageLoad(){$(window).on("resize scroll",isImageVisible),isImageVisible(),INSTANCE.dispatchEvent("loaded")}function isImageVisible(){isOnScreen(-INSTANCE.dimensions.height/2)?timeout_view||(timeout_view=setTimeout(onViewedImage,TIME_VIEWED_DURATION)):timeout_view&&(clearTimeout(timeout_view),timeout_view=null)}function onViewedImage(){$(window).off("resize scroll",isImageVisible),trackEvent("view",!0),INSTANCE.dispatchEvent("viewed")}function onClickImage(event){if($(event.target).hasClass(".expand"))return!1;trackEvent("click",!0)&&EventTracker.store("vs_search_referer",JSON.stringify(search_obj))}function onHoverPreviewImage(){trackEvent("preview")}function toggleSelect(){INSTANCE.item.toggleClass("selected"),VectorStock.BarPending.toggle(INSTANCE.id)}return INSTANCE.item=settings.scope,INSTANCE.id=null,INSTANCE.title=null,INSTANCE.href=null,INSTANCE.src=null,INSTANCE.dimensions={width:0,height:0},INSTANCE.position={top:0,right:0,bottom:0,left:0},INSTANCE.setSize=function(layout){var size=layout==SearchResults.LAYOUT_LARGE?SearchVector.SIZE_MEDIUM:SearchVector.SIZE_SMALL;INSTANCE.size!==size&&(settings.layout=layout,INSTANCE.size=size,INSTANCE.src=VectorStock.imagePath(INSTANCE.id,INSTANCE.title,size,settings.pending),image.attr("src",INSTANCE.src),layout==SearchResults.LAYOUT_LARGE?preview.disable():preview.enable(),onResize())},INSTANCE.delete=function(){timeout_view&&clearTimeout(timeout_view),$(window).off("resize",onResize).off("scroll",onScroll).off("resize scroll",isImageVisible)},INSTANCE.item.parent(),link=$("a",INSTANCE.item),image_wrap=$(".image",link),image=$("img",link),info=$(".info",INSTANCE.item),INSTANCE.id=parseInt(INSTANCE.item.attr("data-vector-id")),INSTANCE.title=INSTANCE.item.attr("data-vector-title"),INSTANCE.size=settings.layout==SearchResults.LAYOUT_LARGE?SearchVector.SIZE_MEDIUM:SearchVector.SIZE_SMALL,INSTANCE.href=VectorStock.vectorURL(INSTANCE.id,INSTANCE.title,settings.pending),INSTANCE.src=VectorStock.imagePath(INSTANCE.id,INSTANCE.title,INSTANCE.size,settings.pending),preview=new PreviewLink(link,INSTANCE.id,INSTANCE.title,settings.pending),(INSTANCE.size==SearchVector.SIZE_MEDIUM||is_mobile)&&preview.disable(),VectorStock.userData.isInCart(INSTANCE.id)&&(in_cart=!0),show_download=settings.download||VectorStock.userData.hasPurchased(INSTANCE.id),settings.pending||is_mobile||function(){var background=$('<div class="bg" />').appendTo(INSTANCE.item),actions=$('<div class="actions" />').appendTo(background),actions_list=$("<ul />").appendTo(actions);if(link_similar=$('<span class="link"><em>View </em>Similar Images…</span>').appendTo(actions),link.attr("title",""),image.attr("title",""),show_download){var item_download=$("<li />").appendTo(actions_list),button_download=$('<button type="button">Download</button>').appendTo(item_download);button_download.on("click",function(){VectorStock.downloadVector(INSTANCE.id,preferred_filetype)})}else{if(show_cart){var item_cart=$("<li />").appendTo(actions_list),button_cart=$('<button type="button"><em>Add to </em>Cart</button>').appendTo(item_cart);function selectCartButton(){button_cart.html("In Cart"),item_cart.addClass("selected")}function unselectCartButton(){button_cart.html("<em>Add to </em>Cart"),item_cart.removeClass("selected")}button_cart.on("click",function(){if(item_cart.hasClass("selected"))unselectCartButton(),VectorStock.removeFromCart(INSTANCE.id);else{selectCartButton();var search_terms=VectorStock.search_box.getSearchTerms();search_terms&&trackEvent("cart"),VectorStock.addToCart(INSTANCE.id,function(response){if(!response.success){var cart_tally=VectorStock.userData.removeFromCart(INSTANCE.id);VectorStock.setCartTally(cart_tally),unselectCartButton()}})}}),in_cart&&selectCartButton()}if(show_gallery){var item_gallery=$("<li />").appendTo(actions_list),button_gallery=$('<button type="button">Gallery</button>').appendTo(item_gallery);button_gallery.on("click",function(){var search_terms=VectorStock.search_box.getSearchTerms();search_terms&&trackEvent("gallery"),new GalleryBox(INSTANCE.id,INSTANCE.title)})}}link_similar.on("click",function(){var search_terms=VectorStock.search_box.getSearchTerms();search_terms&&trackEvent("similar",!0),VectorStock.search_results.setScope(SearchResults.SCOPE_ALL),VectorStock.search_box.setSimilar(INSTANCE.id),VectorStock.search_results.scrollToTop()})}(),delete(search_obj=VectorStock.search_box.getValue()).similar,info.on("click",toggleSelect),link.on("click contextmenu",onClickImage),preview.on("hover",onHoverPreviewImage),$(window).on("resize",onResize).on("scroll",onScroll),$(".score",INSTANCE.item).each(function(){var points_hidden=$(".details span.hide",this),link_expand=$(".details .expand span",this);link_expand.on("click",function(){points_hidden.removeClass("hide"),link_expand.parent().remove()})}),setTimeout(function(){onResize(),image.length?image.hasClass("reveal")?onImageLoad():loadImage():($(window).on("resize scroll",isReadyToShowImage),isReadyToShowImage())}),INSTANCE};SearchVector.SIZE_SMALL="small",SearchVector.SIZE_MEDIUM="medium",VectorStock.getCDNHost=function(vector_id){return vector_id=parseInt(vector_id),"https://cdn"+((vector_id=isNaN(vector_id)?0:vector_id)%5+1)+".vectorstock.com"},VectorStock.imagePath=function(vector_id,vector_title,image_size,is_pending){if(!vector_id)return"";image_size=(image_size||"small").toLowerCase();if(is_pending)return VectorStock.amazonHost+"/images/"+{small:"112x118",medium:"238x250",large:"380x400"}[image_size]+"/"+vector_id+".jpg";var url_parts=[VectorStock.getCDNHost(vector_id),"i",{small:"thumbs",medium:"thumb-large",large:"1000x1000"}[image_size]];if(id_formatted=vector_id.zeroPad(4),url_parts.push(id_formatted.substr(-4,2),id_formatted.substr(-2)),vector_title&&("string"==typeof vector_title||vector_title instanceof String)){var title_formatted=vector_title.toLowerCase()+"-vector-"+vector_id;title_formatted=(title_formatted=(title_formatted=title_formatted.replace(/[^\d\w\s-]+/g,"")).replace(/[\s-]+/g,"-")).replace(/\-+/g,"-"),url_parts.push(title_formatted+".jpg")}else url_parts.push(vector_id+".jpg");return url_parts.join("/")},VectorStock.vectorURL=function(vector_id,vector_title,is_pending){var path=is_pending?"/upload/":"/royalty-free-vector/";if(vector_title&&("string"==typeof vector_title||vector_title instanceof String)){var title_formatted=vector_title.toLowerCase()+"-vector-"+vector_id;path+=title_formatted=(title_formatted=(title_formatted=title_formatted.replace(/[^\d\w\s-]+/g,"")).replace(/[\s-]+/g,"-")).replace(/\-+/g,"-")}else path+=vector_id;return path},VectorStock.formatCredits=function(source,target,max,min,currency){max=max||1/0,min=min||0,currency=!1!==currency;return amount=Number(source.val()),error=!0,display=0,amount===+amount&&amount===(0|amount)&&(error=amount<min||amount>max,display=amount.formatCommas()),currency&&(display="<small>$</small>"+display+".00"),target.html(display),target.parent().toggleClass("error",error),source.parent().toggleClass("error",error),error},VectorStock.formatURL=function(url_string){return url_string=(url_string=(url_string=url_string.replace(/[^\w\s-\/]+/g,"")).replace(/[\s]+/g,"-")).toLowerCase()},VectorStock.rgbToHex=function(r,g,b){var componentToHex=function(c){var hex=c.toString(16);return 1==hex.length?"0"+hex:hex};return"#"+componentToHex(r)+componentToHex(g)+componentToHex(b)},VectorStock.setupTabs=function(){var selectTab=function(tab_new){if(!tab_new.attr("disabled")){var id_tab=tab_new.attr("data-tab-id"),group=tab_new.closest(".tabs");tab_old=tab_new.siblings(".selected").removeClass("selected"),sec_old=$("section.selected",group).removeClass("selected"),sec_new=$("section[data-tab-id="+id_tab+"]",group).addClass("selected"),tab_new.addClass("selected"),group.trigger("switch",[sec_new,sec_old])}};$(".tabs").each(function(){$("> nav li",this).on("click",function(){selectTab($(this))}).on("selectTab",function(){selectTab($(this))})})},VectorStock.setupFormElements=function(){var doc=$(document);doc.on("mouseup",".checkbox",function(){$(this).toggleClass("checked")}),doc.on("disable","button",function(event,is_loading,loading_label){var value_orig,label_orig,loading_icon,button=$(this),is_master=button.hasClass("master");if(button.prop("disabled",!0),is_loading)if(is_master){var title=$(".title",button),value=$(".value",button),wrap=$('<span class="wrapper" />').hide();value.wrapInner(wrap),label_orig=title.text(),title.text(loading_label||"LOADING..."),loading_icon=value.loadingIcon("medium")}else value_orig=button.text(),button.get(0).lastChild.nodeValue=loading_label||value_orig,loading_icon=button.loadingIcon("small"),button.addClass("loading");$(this).one("enable",function(){button.prop("disabled",!1),loading_icon&&(is_master?($(".wrapper",value).contents().unwrap(),title.text(label_orig)):(button.text(value_orig),button.removeClass("loading")),loading_icon.remove())})})},VectorStock.setupSharingButtons=function(){$("a.addthis_button").length&&head.js(VectorStock.js.addthis,function(){window.addthis&&addthis.addEventListener&&addthis.addEventListener("addthis.menu.share",function(event){VectorStock.track("send","event","Share",event.data.service.toTitleCase()+" (AddThis)",window.location.pathname)})}),$("button.smedia").each(function(){var button=$(this),type=(button.closest(".share"),parseInt(button.attr("data-tally")),button.hasClass("googleplus")?"googleplus":button.hasClass("facebook")?"facebook":button.hasClass("twitter")?"twitter":button.hasClass("pinterest")?"pinterest":button.hasClass("linkedin")?"linkedin":""),popupWindow=function(url,width,height){var popup=window.open(url,"share-dialog-"+type,"width="+width+",height="+height+",resizable=1,toolbar=0,menubar=0,status=0,location=0");if(!button.data("static"))var popup_int=setInterval(function(){popup.closed&&(checkTally(),clearInterval(popup_int))},5e3)},checkTally=function(){};button.on("click",function(){var url=$('meta[property="og:url"]').attr("content"),img=$('meta[property="og:image"]').attr("content"),title=$('meta[property="og:title"]').attr("content"),desc=$('meta[property="og:description"]').attr("content");switch(type){case"googleplus":var params="url="+encodeURIComponent(url);popupWindow("https://plus.google.com/share?"+params,600,450),type="Google";break;case"facebook":params=["s=100","p[url]="+encodeURIComponent(url),"p[images][0]="+encodeURIComponent(img),"p[title]="+escape("VectorStock: "+title),"p[summary]="+escape(desc)];popupWindow("http://www.facebook.com/sharer.php?"+params.join("&"),626,326);break;case"twitter":params="text="+escape(title)+escape(" from VectorStock:\n")+encodeURIComponent(url);popupWindow("http://twitter.com/intent/tweet?"+params,600,256)}VectorStock.track("send","event","Share",type.toTitleCase()+" (Custom)",window.location.pathname)})})},VectorStock.setupFacebookLike=function(){$("#fb-root").length||($("body").append('<div id="fb-root" />'),head.js(VectorStock.js.facebook))},VectorStock.setupCompetition=function(){var element=$("#competition");element.length&&Competition(element)},VectorStock.goToURL=function(url,replace){try{var anchor=document.createElement("a");anchor.href=url;var pathname=("/"==anchor.pathname[0]?"":"/")+anchor.pathname,event=$.Event("redirect");$(window).trigger(event,[url,pathname]),event.isDefaultPrevented()||(replace?window.location.replace(url):window.location.assign(url))}catch(error){VectorStock.track("send","event","Error (JS)","CustomError: Go to URL failed",url)}},VectorStock.preloadImages=function(images){for(var img=new Image,i=images.length;i--;)img.src=images[i]},VectorStock.loadImage=function(image_src){var event_load,event_error,INSTANCE={},image=new Image;return INSTANCE.then=function(callback){return event_load=callback,INSTANCE},INSTANCE.catch=function(callback){return event_error=callback,INSTANCE},image.onload=function(){event_load&&setTimeout(function(){event_load.apply(image,[image_src])},10)},image.onerror=function(error){event_error&&event_error.apply(image,[error])},image.src=image_src,INSTANCE},VectorStock.addToCart=function(vector_id,license,callback){if(VectorStock.isNumeric(vector_id)){"function"==typeof license&&(callback=license,license=null);var items=VectorStock.userData.addToCart(vector_id);VectorStock.setCartTally(items);var url="/api/cart/add/"+vector_id+(license?"/"+license:"");$.get(url,function(response){VectorStock.setCartTally(response.cart_total),callback&&callback(response)},"json"),VectorStock.track("send","event","Add To Cart","Image",JSON.stringify({id:vector_id}))}},VectorStock.removeFromCart=function(vector_id,callback){if(VectorStock.isNumeric(vector_id)){var items=VectorStock.userData.removeFromCart(vector_id);VectorStock.setCartTally(items),$.get("/api/cart/remove/"+vector_id,function(response){VectorStock.setCartTally(response.cart_total),callback&&callback(response)},"json")}},VectorStock.updateCartImageLicense=function(vector_id,vector_license){$.get("/api/cart/license/"+vector_id+"/"+vector_license)},VectorStock.emptyCart=function(callback){VectorStock.userData.emptyCart(),VectorStock.setCartTally(0),$.get("/api/cart/empty",function(response){callback&&callback(response)},"json")},VectorStock.setCartTally=function(tally,callback){if(tally||0===tally){var item=$("#sb_account li[data-id=cart]");if(0===item.length&&($("#nav_sidebar > nav li[data-tab-id=login]").trigger("selectTab"),0==(item=$("#sb_login li[data-id=cart]")).length)){var extras=$('<div class="extras" />').appendTo("#sb_login"),list=($("<h6>Account</h6>").appendTo(extras),$("<ul />").appendTo(extras));item=$('<li data-id="cart"><a href="/cart"><span class="title">Cart</span><span class="value empty"><var data-value="0">0</var></span><span class="icon"></span></a></li>').appendTo(list),extras.hide().slideDown(500,"easeOutCubic")}if(item.trigger("setTally",tally),item=$('#mobilenav-menu li[data-id="cart"]'),tally=tally&&tally.formatCommas?tally.formatCommas():tally,0===item.length){list=$("#mobilenav-menu ul");item=$('<li data-id="cart"><a href="/cart">Cart <em></em></a></li>').appendTo(list)}$("em",item).text("("+tally+")")}},VectorStock.likeImage=function(vector_id,callback){$.get("/api/like/add/"+vector_id,function(response){callback&&callback(response)},"json")},VectorStock.unlikeImage=function(vector_id,callback){$.get("/api/like/remove/"+vector_id,function(response){callback&&callback(response)},"json")},VectorStock.updateTally=function(type,offset){$("#sb_account li[data-id="+type+"]").trigger("updateTally",offset)},VectorStock.setTally=function(type,tally){$("#mobilenav-menu li[data-id="+type+"] a em").text("("+tally+")"),$("#sb_account li[data-id="+type+"]").trigger("setTally",tally)},VectorStock.updateFollowingCount=function(offset){var item_sb=$('#sb_account li[data-id="following"]'),item_mb=$('#mobilenav-menu li[data-id="artists"] em'),tally=parseInt($("a .value var",item_sb).data("value"))+offset;item_sb.trigger("setTally",tally),item_mb.length&&item_mb.html("("+tally+")")},VectorStock.addToFollowing=function(artist_name){artist_name&&(VectorStock.updateFollowingCount(1),$.put("/api/following/"+artist_name))},VectorStock.removeFromFollowing=function(artist_name){artist_name&&(VectorStock.updateFollowingCount(-1),$.delete("/api/following/"+artist_name))},VectorStock.isLoggedIn=function(){return $("body > header > div > nav ul.account").length&&0==$("body > header > div > nav ul.account li.signup").length||0<$("#nav_sidebar #sb_account").length},VectorStock.trackPurchase=function(transaction_type,transaction_id,transaction_cost,user_email,user_country,provider_type,provider_id){var transaction_name,transaction_category,transaction_price=transaction_cost,transaction_quantity="1";switch(transaction_type.toLowerCase()){case"credits":transaction_price="1",transaction_quantity=transaction_cost,transaction_name=provider_type+" Credit Purchase",transaction_category="VS Currency";break;case"subscription":transaction_name=provider_type+" Subscription Purchase",transaction_category="VS Subscription";break;case"singleimage":transaction_name=provider_type+" Single-Image Purchase",transaction_category="VS Single-Image"}try{ga("require","ecommerce"),ga("ecommerce:addTransaction",{id:transaction_id,affiliation:"VectorStock Media",revenue:transaction_cost,shipping:user_email,tax:"na"}),ga("ecommerce:addItem",{id:transaction_id,name:transaction_name,sku:provider_id,category:transaction_category,price:transaction_price,quantity:transaction_quantity}),ga("ecommerce:send")}catch(err){window.console&window.console.log&&console.log(err)}},VectorStock.showBrowserMessage=function(){if(window.head&&head.browser){var current_browser_version={chrome:6,ff:2,ie:7,safari:3}[head.browser.name];current_browser_version&&head.browser.version<current_browser_version&&$("body").prepend('<div class="browser"><div class="inner"><h1>Outdated Browser</h1><p>For a better experience, keep your browser up to date. Try one of the following:</p><ul><li class="chrome"><a href="https://www.google.com/chrome/browser/desktop/" target="_blank">Google Chrome</a></li><li class="firefox"><a href="http://www.mozilla.org/firefox/new/" target="_blank">Mozilla Firefox</a></li><li class="edge"><a href="https://www.microsoft.com/software-download/windows10" target="_blank">Microsoft Edge</a></li><li class="safari"><a href="http://www.apple.com/osx/" target="_blank">Apple Safari</a></li></ul></div></div>')}},VectorStock.setupPlaceholderSupport=function(){if(!("placeholder"in document.createElement("input"))){$(document).on("focus","input, textarea",function(){$(this).isEmpty()&&$(this).removeClass("empty").val("")}).on("blur","input, textarea",function(){if($(this).isEmpty()){var placeholder=$(this).attr("placeholder")||"";$(this).removeClass("empty").val(placeholder)}}),$("input, textarea").each(function(){var placeholder=$(this).attr("placeholder")||"";""==$(this).val()&&""!=placeholder?$(this).addClass("empty").val(placeholder):$(this).val()==placeholder&&$(this).addClass("empty")})}},VectorStock.scrollTo=function(target,duration,easing,callback){var y_target=isNaN(target)?target.offset().top:target,doc_height=(duration=duration||500,callback="function"==typeof easing?easing:callback,easing=easing||"easeInOutQuad",$(document).height()),win_height=$(window).height();if(win_height<doc_height){doc_height<y_target+win_height&&(y_target=doc_height-win_height);var cancelScroll=function(){$("html, body").stop(),$(window).off("mousewheel",cancelScroll),callback&&callback()};$(window).on("mousewheel",cancelScroll),$("html, body").animate({scrollTop:y_target},duration,easing,cancelScroll)}},VectorStock.downloadVector=function(vector_id,preferred_filetype){$.get("/api/vector/download/"+vector_id,function(response){if(1==response.success){var url_download=response.url;preferred_filetype&&response.file_urls&&response.file_urls[preferred_filetype]&&(url_download=response.file_urls[preferred_filetype]),VectorStock.goToURL(url_download)}},"json")},VectorStock.sanitizeInput=function(value){return"string"==typeof value?value:$(value).text()},VectorStock.trackConversion=function(settings,callback){function track(){if(window.google_conversion_id=1056033416,window.google_conversion_format="3",window.google_remarketing_only=!1,settings)for(var setting in settings)window[setting]=settings[setting];if(window.google_trackConversion){var handler=callback?{onload_callback:callback}:void 0;window.google_trackConversion(handler)}}window.google_trackConversion?track():head.js("//www.googleadservices.com/pagead/conversion_async.js",track)},VectorStock.isNumeric=function(value){return!isNaN(parseFloat(value))&&isFinite(value)},VectorStock.setupHeader=function(){$("body > .promo").each(function(){var promo=$(this),link=$(".message a",promo),ticker=$(".ticker",promo),ticker_display=$(".display",ticker),but_close=$('button[data-action="close"]',promo),time_remaining=parseInt(ticker.attr("data-remaining")||0);time_remaining?setInterval(function(){if(0==(time_remaining-=MS_SECOND))promo.remove();else{var hours=Math.floor(time_remaining/MS_HOUR),minutes=Math.floor((time_remaining-hours*MS_HOUR)/MS_MINUTE),seconds=Math.floor((time_remaining-(hours*MS_HOUR+minutes*MS_MINUTE))/MS_SECOND),time_display=hours.zeroPad(2)+":"+minutes.zeroPad(2)+":"+seconds.zeroPad(2);ticker_display.html(time_display)}},1e3):promo.remove(),link.on("click",function(event){VectorStock.isLoggedIn()||(VectorStock.goToURL("/signup"),event.preventDefault())}),but_close.on("click",function(){document.cookie="promo_cyber_2018=1",promo.remove()})}),$("body > .alert").each(function(){var REGEX_EMAIL=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,alert=$(this),message=$("p",alert),fieldset=$("fieldset",alert),email_input=$('input[name="email_address"]',fieldset),email_but=($(".icon",fieldset),$("button",fieldset)),email_old=$("strong",message).text(),is_error=!1;function flagError(){fieldset.addClass("error"),email_input.focus(),is_error=!0}function submitEmailAddress(){var email_submitted=email_input.val();if(is_error||email_submitted.toUpperCase()==email_old.toUpperCase()||!email_submitted.match(REGEX_EMAIL))flagError();else{fieldset.addClass("disabled"),email_input.prop("disabled",!0),email_but.text("Saving…");var email_submission={email:email_submitted,csrf_emailupdate_name:$('input[name="csrf_emailupdate_name"]',fieldset).val(),csrf_emailupdate_value:$('input[name="csrf_emailupdate_value"]',fieldset).val()};$.put("/api/account/email/quickupdate",email_submission,function(response){response.success?(alert.addClass("updated"),message.html("Your email address has been updated to <strong>"+email_submitted+"</strong> - thanks!"),fieldset.remove(),VectorStock.track("send","event","Action","Bounced Email Address Update",email_submitted),alert.css({height:alert.outerHeight()}),setTimeout(function(){alert.addClass("close"),alert.css({height:0})},3e3)):(fieldset.removeClass("disabled"),email_input.prop("disabled",!1),email_but.text("Update"),flagError(),$('input[name="csrf_emailupdate_name"]',fieldset).val(response.csrf_update.csrf_name),$('input[name="csrf_emailupdate_value"]',fieldset).val(response.csrf_update.csrf_value),VectorStock.track("send","event","Action","Bounced Email Address Update Failed",JSON.stringify(response)))})}}email_input.on("keydown cut paste",function(event){if(13==event.keyCode)submitEmailAddress();else{var value_before=email_input.val();setTimeout(function(){email_input.val()!==value_before&&is_error&&(fieldset.removeClass("error"),is_error=!1)},10)}}),email_but.on("click",submitEmailAddress)}),$("#searchbox").each(function(){var nav_items=$("body > header .grid ul li a"),link_all=nav_items.eq(0),link_free=nav_items.eq(1);VectorStock.search_box=SearchBox($(this)),VectorStock.search_box.on("change",function(params){if(VectorStock.search_box.mode==SearchBox.MODE_STATIC){var data=new SearchResultData(params);VectorStock.goToURL(data.url)}else{(params.artists||params.categories||params.similar)&&(link_all.parent().addClass("selected"),link_free.parent().removeClass("selected"));var data_all=new SearchResultData($.extend({type:SearchResultData.TYPE_BROWSE},params)),data_free=new SearchResultData($.extend({type:SearchResultData.TYPE_FREE},params));link_all.attr("href",data_all.url),link_free.attr("href",data_free.url)}});var search_type=$("#search_type").val();search_type!==SearchResultData.TYPE_BROWSE&&search_type!==SearchResultData.TYPE_FREE&&VectorStock.search_box.setMode(SearchBox.MODE_STATIC)}),$('body > header nav.top button[data-action="signup"]').on("click",function(){VectorStock.goToURL("/signup")});new MenuMobile},VectorStock.setupSidebar=function(){$("#nav_sidebar").each(function(){var scope=$(this),setTally=function(item,value_new){var offset=30,container=$(".value",item),tally_old=$("var",container).last(),value_old=parseInt(tally_old.attr("data-value"));if((value_new=Math.max(value_new,0))!=value_old){if(offset*=value_old<value_new?1:-1,item.closest("nav").hasClass("primary")){var tally_new=$("<var>"+value_new.formatCommas(!0)+"</var>").attr("data-value",value_new).appendTo(container);item.removeClass("unhighlight").addClass("highlight"),container.toggleClass("empty",0==value_new),tally_new.css({marginTop:-1*offset,opacity:0}).animate({marginTop:0,opacity:1},900,"easeOutExpo",function(){$(this).css({marginTop:"",opacity:""})}),tally_old.stop().animate({opacity:0},900,"easeOutExpo",function(){$(this).remove(),item.removeClass("highlight").addClass("unhighlight")})}else tally_old.attr("data-value",value_new).text(value_new),item.stop().css({opacity:0}).animate({opacity:1},500,"easeOutQuad",function(){item.css({opacity:""})});item.toggleClass("empty",0==value_new),0!=value_new||$(".alert",item).length||$('<span class="alert" />').prependTo($("a",item))}};$(".textfield",scope).each(function(){var textfield=$(this),fieldset_tf=textfield.closest("fieldset"),input=$("input",textfield);textfield.on("click",function(){input.focus()}),input.on("focus",function(){fieldset_tf&&fieldset_tf.addClass("focus")}).on("blur",function(){fieldset_tf&&fieldset_tf.removeClass("focus")})}),$(".checkbox label",scope).on("mouseup",function(){$(this).toggleClass("selected")}),$("#sb_signup",scope).each(function(){var tab=$(this);$(".footer button",tab).on("click",function(){VectorStock.goToURL("/signup")})}),$("#sb_login",scope).each(function(){var tab=$(this),form=$("form",tab),login=$("> button",form),credentials_changed=!1;$("#vs_username",tab).on("input",function(){credentials_changed=!0}),$("#vs_password",tab).on("input",function(){credentials_changed=!0});var showMessage=function(message,forgotten){var container=$(".message",tab);if(login.trigger("enable"),0==container.length){container=$('<div class="message" />');var wrap1=$('<div class="wrap1" />').appendTo(container);$('<div class="wrap2" />').appendTo(wrap1);login.before(container)}var height_a=container.height();$(".wrap2",container).empty().append("<p>"+message+"</p>"),forgotten&&$(".wrap2",container).append('<p><a href="/request/password">Click here if you&rsquo;d like a reminder...</a></p>'),$("p",container).css({top:15,opacity:0}).animate({top:0,opacity:1},800,"easeOutQuint");var height_b=container.css({height:""}).height();container.stop().css({height:height_a}).animate({height:height_b},400,"easeOutCubic",function(){container.css({height:""})})},matchAutoFillColors=function(){var filled={};try{$("input:-webkit-autofill",form).each(function(){filled[$(this).attr("id")]=!0})}catch(err){}$("input",form).each(function(){var color_txt="",color_bg="";filled[$(this).attr("id")]&&(color_txt=$(this).css("color"),color_bg=$(this).css("backgroundColor")),$(this).css({color:color_txt}),$(this).parent().css({backgroundColor:color_bg})})};$("button.forgot",tab).on("click",function(){VectorStock.goToURL("/request/password")}),$("input",form).on("blur",matchAutoFillColors),setTimeout(matchAutoFillColors,500),login.on("click",function(event){var username=$("#vs_username",tab).val(),password=$("#vs_password",tab).val(),remember=$("#vs_remember",tab).is(":checked");if(""==username)showMessage("Missing username...");else if(""==password)showMessage("Missing password...",!0);else if(credentials_changed){var container=$(".message",tab);container.length&&container.stop().animate({height:0},300,"easeOutCubic"),login.trigger("disable",[!0,"Checking..."]),credentials_changed=!1,$.ajax({type:"POST",url:"/api/json/login",data:{login_user:username,login_password:password,login_remember:remember},success:function(response,textStatus,xhr){if(1==response.success)VectorStock.userData.setProfile(response.profile),response.redirect?VectorStock.goToURL(response.redirect):window.location.reload();else{if(response.message)showMessage(response.message,"DISABLED"!==response.error);else{showMessage("Unknown server issue - Please try again later",!0);var log={username:username,status:textStatus,code:xhr.status,response:JSON.stringify(response),headers:xhr.getAllResponseHeaders()};void 0!==response.message&&(log.message=response.message),VectorStock.track("send","event","Error (JS)","CustomError: Login issue (Success)",JSON.stringify(log))}login.trigger("enable")}},error:function(xhr,textStatus,errorThrown){showMessage("Connection failed - Please try again later",!0);var log={username:username,status:textStatus,code:xhr.status,error:errorThrown,headers:xhr.getAllResponseHeaders()};VectorStock.track("send","event","Error (JS)","CustomError: Login issue (Error)",JSON.stringify(log)),login.trigger("enable")}})}event.preventDefault(),event.stopPropagation()}),$(".alternatives li",tab).each(function(){var item=$(this),link=$("a",item),title=$(".title",link);link.on("click",function(){var title_pre=title.text();item.addClass("loading"),title.text("Connecting...");var icon=link.loadingIcon("small");function restoreLink(){item.removeClass("loading"),title.html(title_pre),icon.remove()}return item.hasClass("gp")?$.get("/api/google/auth",function(response){restoreLink(),1==response.success&&(VectorStock.userData.destroy(),VectorStock.goToURL(response.url))}):item.hasClass("fb")&&$.post("/api/json/fblogin",function(response){restoreLink(),1==response.success&&(VectorStock.userData.destroy(),VectorStock.goToURL(response.url))},"json"),!1})}),tab.on("setTally",".extras li",function(event,value_new){setTally($(this),value_new)}).on("updateTally",".extras li",function(event,value_offset){var value=parseInt($("var",this).attr("data-value"))+value_offset;setTally($(this),value)})}),$("#sb_account",scope).each(function(){var tab=$(this),form=$("form",tab),logout=$("button",tab);$("li",tab).on("setTally",function(event,value_new){setTally($(this),value_new)}).on("updateTally",function(event,value_offset){var value=parseInt($("var",this).attr("data-value"))+value_offset;setTally($(this),value)}),logout.on("click",function(){VectorStock.userData.destroy(),form.submit()})})})},VectorStock.setupFooter=function(){var sel_legals=$("#legals");sel_legals.length&&(sel_legals.on("change",function(){var path=$("option:checked",this).val();path&&VectorStock.goToURL(path)}),sel_legals.dropdown&&sel_legals.dropdown({theme:"dark"}))},$(function(){VectorStock.userData=UserData(),VectorStock.setupHeader(),VectorStock.setupSidebar(),VectorStock.setupFooter(),VectorStock.setupTabs(),VectorStock.setupFormElements(),VectorStock.setupCompetition(),VectorStock.setupPlaceholderSupport(),VectorStock.showBrowserMessage()});